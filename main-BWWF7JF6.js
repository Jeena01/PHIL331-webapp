var ZM=Object.defineProperty,JM=Object.defineProperties;var XM=Object.getOwnPropertyDescriptors;var DI=Object.getOwnPropertySymbols,eN=Object.getPrototypeOf,tN=Object.prototype.hasOwnProperty,nN=Object.prototype.propertyIsEnumerable,rN=Reflect.get;var CI=(t,e,n)=>e in t?ZM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V=(t,e)=>{for(var n in e||={})tN.call(e,n)&&CI(t,n,e[n]);if(DI)for(var n of DI(e))nN.call(e,n)&&CI(t,n,e[n]);return t},oe=(t,e)=>JM(t,XM(e));var Tr=(t,e,n)=>rN(eN(t),n,e);var v=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});function SI(t,e){return Object.is(t,e)}var Ke=null,ou=!1,bf=1,jt=Symbol("SIGNAL");function ue(t){let e=Ke;return Ke=t,e}function AI(){return Ke}var Zs={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function au(t){if(ou)throw new Error("");if(Ke===null)return;Ke.consumerOnSignalRead(t);let e=Ke.nextProducerIndex++;if(lu(Ke),e<Ke.producerNode.length&&Ke.producerNode[e]!==t&&Ys(Ke)){let n=Ke.producerNode[e];uu(n,Ke.producerIndexOfThis[e])}Ke.producerNode[e]!==t&&(Ke.producerNode[e]=t,Ke.producerIndexOfThis[e]=Ys(Ke)?xI(t,Ke,e):0),Ke.producerLastReadVersion[e]=t.version}function iN(){bf++}function RI(t){if(!(Ys(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===bf)){if(!t.producerMustRecompute(t)&&!Cf(t)){TI(t);return}t.producerRecomputeValue(t),TI(t)}}function MI(t){if(t.liveConsumerNode===void 0)return;let e=ou;ou=!0;try{for(let n of t.liveConsumerNode)n.dirty||oN(n)}finally{ou=e}}function NI(){return Ke?.consumerAllowSignalWrites!==!1}function oN(t){t.dirty=!0,MI(t),t.consumerMarkedDirty?.(t)}function TI(t){t.dirty=!1,t.lastCleanEpoch=bf}function cu(t){return t&&(t.nextProducerIndex=0),ue(t)}function Df(t,e){if(ue(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ys(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)uu(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Cf(t){lu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(RI(n),r!==n.version))return!0}return!1}function Tf(t){if(lu(t),Ys(t))for(let e=0;e<t.producerNode.length;e++)uu(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function xI(t,e,n){if(PI(t),t.liveConsumerNode.length===0&&kI(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=xI(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function uu(t,e){if(PI(t),t.liveConsumerNode.length===1&&kI(t))for(let r=0;r<t.producerNode.length;r++)uu(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];lu(i),i.producerIndexOfThis[r]=e}}function Ys(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function lu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function PI(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function kI(t){return t.producerNode!==void 0}function OI(t){let e=Object.create(sN);e.computation=t;let n=()=>{if(RI(e),au(e),e.value===su)throw e.error;return e.value};return n[jt]=e,n}var If=Symbol("UNSET"),Ef=Symbol("COMPUTING"),su=Symbol("ERRORED"),sN=oe(V({},Zs),{value:If,dirty:!0,error:null,equal:SI,kind:"computed",producerMustRecompute(t){return t.value===If||t.value===Ef},producerRecomputeValue(t){if(t.value===Ef)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Ef;let n=cu(t),r,i=!1;try{r=t.computation(),ue(null),i=e!==If&&e!==su&&r!==su&&t.equal(e,r)}catch(o){r=su,t.error=o}finally{Df(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function aN(){throw new Error}var FI=aN;function VI(t){FI(t)}function LI(t){FI=t}var cN=null;function jI(t){let e=Object.create(Sf);e.value=t;let n=()=>(au(e),e.value);return n[jt]=e,n}function du(t,e){NI()||VI(t),t.equal(t.value,e)||(t.value=e,uN(t))}function UI(t,e){NI()||VI(t),du(t,e(t.value))}var Sf=oe(V({},Zs),{equal:SI,value:void 0,kind:"signal"});function uN(t){t.version++,iN(),MI(t),cN?.()}function ee(t){return typeof t=="function"}function ro(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var hu=ro(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Js(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var je=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ee(r))try{r()}catch(o){e=o instanceof hu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{BI(o)}catch(s){e=e??[],s instanceof hu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new hu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)BI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Js(n,e)}remove(e){let{_finalizers:n}=this;n&&Js(n,e),e instanceof t&&e._removeParent(this)}};je.EMPTY=(()=>{let t=new je;return t.closed=!0,t})();var Af=je.EMPTY;function fu(t){return t instanceof je||t&&"closed"in t&&ee(t.remove)&&ee(t.add)&&ee(t.unsubscribe)}function BI(t){ee(t)?t():t.unsubscribe()}var cn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var io={setTimeout(t,e,...n){let{delegate:r}=io;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=io;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function pu(t){io.setTimeout(()=>{let{onUnhandledError:e}=cn;if(e)e(t);else throw t})}function Xs(){}var $I=Rf("C",void 0,void 0);function HI(t){return Rf("E",void 0,t)}function qI(t){return Rf("N",t,void 0)}function Rf(t,e,n){return{kind:t,value:e,error:n}}var oi=null;function oo(t){if(cn.useDeprecatedSynchronousErrorHandling){let e=!oi;if(e&&(oi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=oi;if(oi=null,n)throw r}}else t()}function zI(t){cn.useDeprecatedSynchronousErrorHandling&&oi&&(oi.errorThrown=!0,oi.error=t)}var si=class extends je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,fu(e)&&e.add(this)):this.destination=hN}static create(e,n,r){return new so(e,n,r)}next(e){this.isStopped?Nf(qI(e),this):this._next(e)}error(e){this.isStopped?Nf(HI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Nf($I,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},lN=Function.prototype.bind;function Mf(t,e){return lN.call(t,e)}var xf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){gu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){gu(r)}else gu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){gu(n)}}},so=class extends si{constructor(e,n,r){super();let i;if(ee(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&cn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Mf(e.next,o),error:e.error&&Mf(e.error,o),complete:e.complete&&Mf(e.complete,o)}):i=e}this.destination=new xf(i)}};function gu(t){cn.useDeprecatedSynchronousErrorHandling?zI(t):pu(t)}function dN(t){throw t}function Nf(t,e){let{onStoppedNotification:n}=cn;n&&io.setTimeout(()=>n(t,e))}var hN={closed:!0,next:Xs,error:dN,complete:Xs};var ao=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ut(t){return t}function Pf(...t){return kf(t)}function kf(t){return t.length===0?Ut:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Ie=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=pN(n)?n:new so(n,r,i);return oo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=GI(r),new r((i,o)=>{let s=new so({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ao](){return this}pipe(...n){return kf(n)(this)}toPromise(n){return n=GI(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function GI(t){var e;return(e=t??cn.Promise)!==null&&e!==void 0?e:Promise}function fN(t){return t&&ee(t.next)&&ee(t.error)&&ee(t.complete)}function pN(t){return t&&t instanceof si||fN(t)&&fu(t)}function Of(t){return ee(t?.lift)}function me(t){return e=>{if(Of(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(t,e,n,r,i){return new Ff(t,e,n,r,i)}var Ff=class extends si{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function co(){return me((t,e)=>{let n=null;t._refCount++;let r=de(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var uo=class extends Ie{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Of(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new je;let n=this.getSubject();e.add(this.source.subscribe(de(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=je.EMPTY)}return e}refCount(){return co()(this)}};var WI=ro(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=(()=>{class t extends Ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new mu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new WI}next(n){oo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){oo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){oo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Af:(this.currentObservers=null,o.push(n),new je(()=>{this.currentObservers=null,Js(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Ie;return n.source=this,n}}return t.create=(e,n)=>new mu(e,n),t})(),mu=class extends Ue{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Af}};var Be=class extends Ue{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Rt=new Ie(t=>t.complete());function KI(t){return t&&ee(t.schedule)}function QI(t){return t[t.length-1]}function yu(t){return ee(QI(t))?t.pop():void 0}function Sr(t){return KI(QI(t))?t.pop():void 0}function Vf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ZI(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function YI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ai(t){return this instanceof ai?(this.v=t,this):new ai(t)}function JI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(T){return Promise.resolve(T).then(m,p)}}function a(m,T){r[m]&&(i[m]=function(N){return new Promise(function(P,j){o.push([m,N,P,j])>1||u(m,N)})},T&&(i[m]=T(i[m])))}function u(m,T){try{l(r[m](T))}catch(N){y(o[0][3],N)}}function l(m){m.value instanceof ai?Promise.resolve(m.value.v).then(h,p):y(o[0][2],m)}function h(m){u("next",m)}function p(m){u("throw",m)}function y(m,T){m(T),o.shift(),o.length&&u(o[0][0],o[0][1])}}function XI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof YI=="function"?YI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var vu=t=>t&&typeof t.length=="number"&&typeof t!="function";function _u(t){return ee(t?.then)}function wu(t){return ee(t[ao])}function Iu(t){return Symbol.asyncIterator&&ee(t?.[Symbol.asyncIterator])}function Eu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function gN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var bu=gN();function Du(t){return ee(t?.[bu])}function Cu(t){return JI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ai(n.read());if(i)return yield ai(void 0);yield yield ai(r)}}finally{n.releaseLock()}})}function Tu(t){return ee(t?.getReader)}function $e(t){if(t instanceof Ie)return t;if(t!=null){if(wu(t))return mN(t);if(vu(t))return yN(t);if(_u(t))return vN(t);if(Iu(t))return eE(t);if(Du(t))return _N(t);if(Tu(t))return wN(t)}throw Eu(t)}function mN(t){return new Ie(e=>{let n=t[ao]();if(ee(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function yN(t){return new Ie(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function vN(t){return new Ie(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,pu)})}function _N(t){return new Ie(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function eE(t){return new Ie(e=>{IN(t,e).catch(n=>e.error(n))})}function wN(t){return eE(Cu(t))}function IN(t,e){var n,r,i,o;return ZI(this,void 0,void 0,function*(){try{for(n=XI(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Mt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Su(t,e=0){return me((n,r)=>{n.subscribe(de(r,i=>Mt(r,t,()=>r.next(i),e),()=>Mt(r,t,()=>r.complete(),e),i=>Mt(r,t,()=>r.error(i),e)))})}function Au(t,e=0){return me((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function tE(t,e){return $e(t).pipe(Au(e),Su(e))}function nE(t,e){return $e(t).pipe(Au(e),Su(e))}function rE(t,e){return new Ie(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function iE(t,e){return new Ie(n=>{let r;return Mt(n,e,()=>{r=t[bu](),Mt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>ee(r?.return)&&r.return()})}function Ru(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ie(n=>{Mt(n,e,()=>{let r=t[Symbol.asyncIterator]();Mt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function oE(t,e){return Ru(Cu(t),e)}function sE(t,e){if(t!=null){if(wu(t))return tE(t,e);if(vu(t))return rE(t,e);if(_u(t))return nE(t,e);if(Iu(t))return Ru(t,e);if(Du(t))return iE(t,e);if(Tu(t))return oE(t,e)}throw Eu(t)}function Fe(t,e){return e?sE(t,e):$e(t)}function Z(...t){let e=Sr(t);return Fe(t,e)}function lo(t,e){let n=ee(t)?t:()=>t,r=i=>i.error(n());return new Ie(e?i=>e.schedule(r,0,i):r)}function Lf(t){return!!t&&(t instanceof Ie||ee(t.lift)&&ee(t.subscribe))}var Qn=ro(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function he(t,e){return me((n,r)=>{let i=0;n.subscribe(de(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:EN}=Array;function bN(t,e){return EN(e)?t(...e):t(e)}function Mu(t){return he(e=>bN(t,e))}var{isArray:DN}=Array,{getPrototypeOf:CN,prototype:TN,keys:SN}=Object;function Nu(t){if(t.length===1){let e=t[0];if(DN(e))return{args:e,keys:null};if(AN(e)){let n=SN(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function AN(t){return t&&typeof t=="object"&&CN(t)===TN}function xu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Pu(...t){let e=Sr(t),n=yu(t),{args:r,keys:i}=Nu(t);if(r.length===0)return Fe([],e);let o=new Ie(RN(r,e,i?s=>xu(i,s):Ut));return n?o.pipe(Mu(n)):o}function RN(t,e,n=Ut){return r=>{aE(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)aE(e,()=>{let l=Fe(t[u],e),h=!1;l.subscribe(de(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function aE(t,e,n){t?Mt(n,t,e):e()}function cE(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,y=()=>{p&&!u.length&&!l&&e.complete()},m=N=>l<r?T(N):u.push(N),T=N=>{o&&e.next(N),l++;let P=!1;$e(n(N,h++)).subscribe(de(e,j=>{i?.(j),o?m(j):e.next(j)},()=>{P=!0},void 0,()=>{if(P)try{for(l--;u.length&&l<r;){let j=u.shift();s?Mt(e,s,()=>T(j)):T(j)}y()}catch(j){e.error(j)}}))};return t.subscribe(de(e,m,()=>{p=!0,y()})),()=>{a?.()}}function Qe(t,e,n=1/0){return ee(e)?Qe((r,i)=>he((o,s)=>e(r,o,i,s))($e(t(r,i))),n):(typeof e=="number"&&(n=e),me((r,i)=>cE(r,i,t,n)))}function ho(t=1/0){return Qe(Ut,t)}function uE(){return ho(1)}function fo(...t){return uE()(Fe(t,Sr(t)))}function ku(t){return new Ie(e=>{$e(t()).subscribe(e)})}function jf(...t){let e=yu(t),{args:n,keys:r}=Nu(t),i=new Ie(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;$e(n[h]).subscribe(de(o,y=>{p||(p=!0,l--),a[h]=y},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?xu(r,a):a),o.complete())}))}});return e?i.pipe(Mu(e)):i}function un(t,e){return me((n,r)=>{let i=0;n.subscribe(de(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Ar(t){return me((e,n)=>{let r=null,i=!1,o;r=e.subscribe(de(n,void 0,void 0,s=>{o=$e(t(s,Ar(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function lE(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(de(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function po(t,e){return ee(e)?Qe(t,e,1):Qe(t,1)}function Rr(t){return me((e,n)=>{let r=!1;e.subscribe(de(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Yn(t){return t<=0?()=>Rt:me((e,n)=>{let r=0;e.subscribe(de(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Ou(t=MN){return me((e,n)=>{let r=!1;e.subscribe(de(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function MN(){return new Qn}function ea(t){return me((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Zn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?un((i,o)=>t(i,o,r)):Ut,Yn(1),n?Rr(e):Ou(()=>new Qn))}function go(t){return t<=0?()=>Rt:me((e,n)=>{let r=[];e.subscribe(de(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Uf(t,e){let n=arguments.length>=2;return r=>r.pipe(t?un((i,o)=>t(i,o,r)):Ut,go(1),n?Rr(e):Ou(()=>new Qn))}function Bf(t,e){return me(lE(t,e,arguments.length>=2,!0))}function $f(...t){let e=Sr(t);return me((n,r)=>{(e?fo(t,n,e):fo(t,n)).subscribe(r)})}function ln(t,e){return me((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(de(r,u=>{i?.unsubscribe();let l=0,h=o++;$e(t(u,h)).subscribe(i=de(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Hf(t){return me((e,n)=>{$e(t).subscribe(de(n,()=>n.complete(),Xs)),!n.closed&&e.subscribe(n)})}function st(t,e,n){let r=ee(t)||e||n?{next:t,error:e,complete:n}:t;return r?me((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(de(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ut}var ZE="https://g.co/ng/security#xss",H=class extends Error{code;constructor(e,n){super(tg(e,n)),this.code=e}};function tg(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var JE=Symbol("InputSignalNode#UNSET"),NN=oe(V({},Sf),{transformFn:void 0,applyValueToInputSignal(t,e){du(t,e)}});function XE(t,e){let n=Object.create(NN);n.value=t,n.transformFn=e?.transform;function r(){if(au(n),n.value===JE)throw new H(-950,!1);return n.value}return r[jt]=n,r}function fl(t){return{toString:t}.toString()}var op=globalThis;function Ae(t){for(let e in t)if(t[e]===Ae)return e;throw Error("Could not find renamed property on target object.")}function xN(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Nt(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Nt).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function dE(t,e){return t?e?`${t} ${e}`:t:e||""}var PN=Ae({__forward_ref__:Ae});function Ro(t){return t.__forward_ref__=Ro,t.toString=function(){return Nt(this())},t}function Ct(t){return eb(t)?t():t}function eb(t){return typeof t=="function"&&t.hasOwnProperty(PN)&&t.__forward_ref__===Ro}function K(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function vi(t){return{providers:t.providers||[],imports:t.imports||[]}}function pl(t){return hE(t,nb)||hE(t,rb)}function tb(t){return pl(t)!==null}function hE(t,e){return t.hasOwnProperty(e)?t[e]:null}function kN(t){let e=t&&(t[nb]||t[rb]);return e||null}function fE(t){return t&&(t.hasOwnProperty(pE)||t.hasOwnProperty(ON))?t[pE]:null}var nb=Ae({\u0275prov:Ae}),pE=Ae({\u0275inj:Ae}),rb=Ae({ngInjectableDef:Ae}),ON=Ae({ngInjectorDef:Ae}),G=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=K({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ib(t){return t&&!!t.\u0275providers}var FN=Ae({\u0275cmp:Ae}),VN=Ae({\u0275dir:Ae}),LN=Ae({\u0275pipe:Ae}),jN=Ae({\u0275mod:Ae}),qu=Ae({\u0275fac:Ae}),ia=Ae({__NG_ELEMENT_ID__:Ae}),gE=Ae({__NG_ENV_ID__:Ae});function gl(t){return typeof t=="string"?t:t==null?"":String(t)}function UN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():gl(t)}function BN(t,e){throw new H(-200,t)}function ng(t,e){throw new H(-201,!1)}var se=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(se||{}),sp;function ob(){return sp}function Yt(t){let e=sp;return sp=t,e}function sb(t,e,n){let r=pl(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&se.Optional)return null;if(e!==void 0)return e;ng(t,"Injector")}var $N={},oa=$N,HN="__NG_DI_FLAG__",zu="ngTempTokenPath",qN="ngTokenPath",zN=/\n/gm,GN="\u0275",mE="__source",_o;function WN(){return _o}function Mr(t){let e=_o;return _o=t,e}function KN(t,e=se.Default){if(_o===void 0)throw new H(-203,!1);return _o===null?sb(t,void 0,e):_o.get(t,e&se.Optional?null:void 0,e)}function ae(t,e=se.Default){return(ob()||KN)(Ct(t),e)}function L(t,e=se.Default){return ae(t,ml(e))}function ml(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function ap(t){let e=[];for(let n=0;n<t.length;n++){let r=Ct(t[n]);if(Array.isArray(r)){if(r.length===0)throw new H(900,!1);let i,o=se.Default;for(let s=0;s<r.length;s++){let a=r[s],u=QN(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(ae(i,o))}else e.push(ae(r))}return e}function QN(t){return t[HN]}function YN(t,e,n,r){let i=t[zu];throw e[mE]&&i.unshift(e[mE]),t.message=ZN(`
`+t.message,i,n,r),t[qN]=i,t[zu]=null,t}function ZN(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==GN?t.slice(2):t;let i=Nt(e);if(Array.isArray(e))i=e.map(Nt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Nt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(zN,`
  `)}`}function Io(t,e){let n=t.hasOwnProperty(qu);return n?t[qu]:null}function JN(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function XN(t){return t.flat(Number.POSITIVE_INFINITY)}function rg(t,e){t.forEach(n=>Array.isArray(n)?rg(n,e):e(n))}function ab(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Gu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ex(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function tx(t,e,n){let r=wa(t,e);return r>=0?t[r|1]=n:(r=~r,ex(t,r,e,n)),r}function qf(t,e){let n=wa(t,e);if(n>=0)return t[n|1]}function wa(t,e){return nx(t,e,1)}function nx(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var ui={},Zt=[],Eo=new G(""),cb=new G("",-1),ub=new G(""),Wu=class{get(e,n=oa){if(n===oa){let r=new Error(`NullInjectorError: No provider for ${Nt(e)}!`);throw r.name="NullInjectorError",r}return n}};function lb(t,e){let n=t[jN]||null;if(!n&&e===!0)throw new Error(`Type ${Nt(t)} does not have '\u0275mod' property.`);return n}function li(t){return t[FN]||null}function db(t){return t[VN]||null}function hb(t){return t[LN]||null}function fb(t){let e=li(t)||db(t)||hb(t);return e!==null&&e.standalone}function yl(t){return{\u0275providers:t}}function rx(...t){return{\u0275providers:pb(!0,t),\u0275fromNgModule:!0}}function pb(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return rg(e,s=>{let a=s;cp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&gb(i,o),n}function gb(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];ig(i,o=>{e(o,r)})}}function cp(t,e,n,r){if(t=Ct(t),!t)return!1;let i=null,o=fE(t),s=!o&&li(t);if(!o&&!s){let u=t.ngModule;if(o=fE(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)cp(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{rg(o.imports,h=>{cp(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&gb(l,e)}if(!a){let l=Io(i)||(()=>new i);e({provide:i,useFactory:l,deps:Zt},i),e({provide:ub,useValue:i,multi:!0},i),e({provide:Eo,useValue:()=>ae(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;ig(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function ig(t,e){for(let n of t)ib(n)&&(n=n.\u0275providers),Array.isArray(n)?ig(n,e):e(n)}var ix=Ae({provide:String,useValue:Ae});function mb(t){return t!==null&&typeof t=="object"&&ix in t}function ox(t){return!!(t&&t.useExisting)}function sx(t){return!!(t&&t.useFactory)}function bo(t){return typeof t=="function"}function ax(t){return!!t.useClass}var vl=new G(""),Lu={},cx={},zf;function og(){return zf===void 0&&(zf=new Wu),zf}var Jt=class{},sa=class extends Jt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,lp(e,s=>this.processProvider(s)),this.records.set(cb,mo(void 0,this)),i.has("environment")&&this.records.set(Jt,mo(void 0,this));let o=this.records.get(vl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ub,Zt,se.Self))}destroy(){na(this),this._destroyed=!0;let e=ue(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ue(e)}}onDestroy(e){return na(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){na(this);let n=Mr(this),r=Yt(void 0),i;try{return e()}finally{Mr(n),Yt(r)}}get(e,n=oa,r=se.Default){if(na(this),e.hasOwnProperty(gE))return e[gE](this);r=ml(r);let i,o=Mr(this),s=Yt(void 0);try{if(!(r&se.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=fx(e)&&pl(e);l&&this.injectableDefInScope(l)?u=mo(up(e),Lu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&se.Self?og():this.parent;return n=r&se.Optional&&n===oa?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[zu]=a[zu]||[]).unshift(Nt(e)),o)throw a;return YN(a,e,"R3InjectorError",this.source)}else throw a}finally{Yt(s),Mr(o)}}resolveInjectorInitializers(){let e=ue(null),n=Mr(this),r=Yt(void 0),i;try{let o=this.get(Eo,Zt,se.Self);for(let s of o)s()}finally{Mr(n),Yt(r),ue(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Nt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ct(e);let n=bo(e)?e:Ct(e&&e.provide),r=lx(e);if(!bo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=mo(void 0,Lu,!0),i.factory=()=>ap(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=ue(null);try{return n.value===Lu&&(n.value=cx,n.value=n.factory()),typeof n.value=="object"&&n.value&&hx(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ue(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ct(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function up(t){let e=pl(t),n=e!==null?e.factory:Io(t);if(n!==null)return n;if(t instanceof G)throw new H(204,!1);if(t instanceof Function)return ux(t);throw new H(204,!1)}function ux(t){if(t.length>0)throw new H(204,!1);let n=kN(t);return n!==null?()=>n.factory(t):()=>new t}function lx(t){if(mb(t))return mo(void 0,t.useValue);{let e=yb(t);return mo(e,Lu)}}function yb(t,e,n){let r;if(bo(t)){let i=Ct(t);return Io(i)||up(i)}else if(mb(t))r=()=>Ct(t.useValue);else if(sx(t))r=()=>t.useFactory(...ap(t.deps||[]));else if(ox(t))r=()=>ae(Ct(t.useExisting));else{let i=Ct(t&&(t.useClass||t.provide));if(dx(t))r=()=>new i(...ap(t.deps));else return Io(i)||up(i)}return r}function na(t){if(t.destroyed)throw new H(205,!1)}function mo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function dx(t){return!!t.deps}function hx(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function fx(t){return typeof t=="function"||typeof t=="object"&&t instanceof G}function lp(t,e){for(let n of t)Array.isArray(n)?lp(n,e):n&&ib(n)?lp(n.\u0275providers,e):e(n)}function gn(t,e){t instanceof sa&&na(t);let n,r=Mr(t),i=Yt(void 0);try{return e()}finally{Mr(r),Yt(i)}}function px(){return ob()!==void 0||WN()!=null}function gx(t){return typeof t=="function"}var tr=0,re=1,J=2,vt=3,hn=4,mn=5,aa=6,Ku=7,Ze=8,ca=9,Jn=10,Je=11,ua=12,yE=13,Mo=14,fn=15,di=16,yo=17,Xn=18,_l=19,vb=20,Nr=21,Gf=22,Qu=23,Bt=24,Wf=25,Xt=26,_b=1;var hi=7,Yu=8,Do=9,yt=10;function xr(t){return Array.isArray(t)&&typeof t[_b]=="object"}function nr(t){return Array.isArray(t)&&t[_b]===!0}function wb(t){return(t.flags&4)!==0}function No(t){return t.componentOffset>-1}function sg(t){return(t.flags&1)===1}function Cn(t){return!!t.template}function Zu(t){return(t[J]&512)!==0}function Ia(t){return(t[J]&256)===256}var dp=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Ib(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var _i=(()=>{let t=()=>Eb;return t.ngInherit=!0,t})();function Eb(t){return t.type.prototype.ngOnChanges&&(t.setInput=yx),mx}function mx(){let t=Db(this),e=t?.current;if(e){let n=t.previous;if(n===ui)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function yx(t,e,n,r,i){let o=this.declaredInputs[r],s=Db(t)||vx(t,{previous:ui,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new dp(l&&l.currentValue,n,u===ui),Ib(t,e,i,n)}var bb="__ngSimpleChanges__";function Db(t){return t[bb]||null}function vx(t,e){return t[bb]=e}var vE=null;var Re=function(t,e=null,n){vE?.(t,e,n)},Cb="svg",_x="math";function Tn(t){for(;Array.isArray(t);)t=t[tr];return t}function Tb(t,e){return Tn(e[t])}function Rn(t,e){return Tn(e[t.index])}function ag(t,e){return t.data[e]}function Sn(t,e){let n=e[t];return xr(n)?n:n[tr]}function wx(t){return(t[J]&4)===4}function cg(t){return(t[J]&128)===128}function Ix(t){return nr(t[vt])}function Co(t,e){return e==null?null:t[e]}function Sb(t){t[yo]=0}function ug(t){t[J]&1024||(t[J]|=1024,cg(t)&&Il(t))}function Ex(t,e){for(;t>0;)e=e[Mo],t--;return e}function wl(t){return!!(t[J]&9216||t[Bt]?.dirty)}function hp(t){t[Jn].changeDetectionScheduler?.notify(8),t[J]&64&&(t[J]|=1024),wl(t)&&Il(t)}function Il(t){t[Jn].changeDetectionScheduler?.notify(0);let e=fi(t);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!cg(e)));)e=fi(e)}function Ab(t,e){if(Ia(t))throw new H(911,!1);t[Nr]===null&&(t[Nr]=[]),t[Nr].push(e)}function bx(t,e){if(t[Nr]===null)return;let n=t[Nr].indexOf(e);n!==-1&&t[Nr].splice(n,1)}function fi(t){let e=t[vt];return nr(e)?e[vt]:e}function Rb(t){return t[Ku]??=[]}function Mb(t){return t.cleanup??=[]}function Dx(t,e,n,r){let i=Rb(e);i.push(n),t.firstCreatePass&&Mb(t).push(r,i.length-1)}var ce={lFrame:Lb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var fp=!1;function Cx(){return ce.lFrame.elementDepthCount}function Tx(){ce.lFrame.elementDepthCount++}function Sx(){ce.lFrame.elementDepthCount--}function Nb(){return ce.bindingsEnabled}function Ax(){return ce.skipHydrationRootTNode!==null}function Rx(t){return ce.skipHydrationRootTNode===t}function Mx(){ce.skipHydrationRootTNode=null}function _e(){return ce.lFrame.lView}function _t(){return ce.lFrame.tView}function Tt(t){return ce.lFrame.contextLView=t,t[Ze]}function St(t){return ce.lFrame.contextLView=null,t}function xt(){let t=xb();for(;t!==null&&t.type===64;)t=t.parent;return t}function xb(){return ce.lFrame.currentTNode}function Nx(){let t=ce.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ea(t,e){let n=ce.lFrame;n.currentTNode=t,n.isParent=e}function Pb(){return ce.lFrame.isParent}function xx(){ce.lFrame.isParent=!1}function kb(){return fp}function _E(t){let e=fp;return fp=t,e}function Px(t){return ce.lFrame.bindingIndex=t}function xo(){return ce.lFrame.bindingIndex++}function kx(t){let e=ce.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Ox(){return ce.lFrame.inI18n}function Fx(t,e){let n=ce.lFrame;n.bindingIndex=n.bindingRootIndex=t,pp(e)}function Vx(){return ce.lFrame.currentDirectiveIndex}function pp(t){ce.lFrame.currentDirectiveIndex=t}function Lx(t){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Ob(){return ce.lFrame.currentQueryIndex}function lg(t){ce.lFrame.currentQueryIndex=t}function jx(t){let e=t[re];return e.type===2?e.declTNode:e.type===1?t[mn]:null}function Fb(t,e,n){if(n&se.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&se.Host);)if(i=jx(o),i===null||(o=o[Mo],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ce.lFrame=Vb();return r.currentTNode=e,r.lView=t,!0}function dg(t){let e=Vb(),n=t[re];ce.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Vb(){let t=ce.lFrame,e=t===null?null:t.child;return e===null?Lb(t):e}function Lb(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function jb(){let t=ce.lFrame;return ce.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Ub=jb;function hg(){let t=jb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ux(t){return(ce.lFrame.contextLView=Ex(t,ce.lFrame.contextLView))[Ze]}function wi(){return ce.lFrame.selectedIndex}function pi(t){ce.lFrame.selectedIndex=t}function fg(){let t=ce.lFrame;return ag(t.tView,t.selectedIndex)}function ct(){ce.lFrame.currentNamespace=Cb}function rr(){Bx()}function Bx(){ce.lFrame.currentNamespace=null}function $x(){return ce.lFrame.currentNamespace}var Bb=!0;function pg(){return Bb}function gg(t){Bb=t}function Hx(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Eb(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function $b(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function ju(t,e,n){Hb(t,e,3,n)}function Uu(t,e,n,r){(t[J]&3)===n&&Hb(t,e,n,r)}function Kf(t,e){let n=t[J];(n&3)===e&&(n&=16383,n+=1,t[J]=n)}function Hb(t,e,n,r){let i=r!==void 0?t[yo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[yo]+=65536),(a<o||o==-1)&&(qx(t,n,e,u),t[yo]=(t[yo]&4294901760)+u+2),u++}function wE(t,e){Re(4,t,e);let n=ue(null);try{e.call(t)}finally{ue(n),Re(5,t,e)}}function qx(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[J]>>14<t[yo]>>16&&(t[J]&3)===e&&(t[J]+=16384,wE(a,o)):wE(a,o)}var wo=-1,gi=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r){this.factory=e,this.canSeeViewProviders=n,this.injectImpl=r}};function zx(t){return t instanceof gi}function Gx(t){return(t.flags&8)!==0}function Wx(t){return(t.flags&16)!==0}function Kx(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];Qx(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function qb(t){return t===3||t===4||t===6}function Qx(t){return t.charCodeAt(0)===64}function la(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?IE(t,n,i,null,e[++r]):IE(t,n,i,null,null))}}return t}function IE(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var Qf={},gp=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ml(r);let i=this.injector.get(e,Qf,r);return i!==Qf||n===Qf?i:this.parentInjector.get(e,n,r)}};function zb(t){return t!==wo}function Ju(t){return t&32767}function Yx(t){return t>>16}function Xu(t,e){let n=Yx(t),r=e;for(;n>0;)r=r[Mo],n--;return r}var mp=!0;function EE(t){let e=mp;return mp=t,e}var Zx=256,Gb=Zx-1,Wb=5,Jx=0,Dn={};function Xx(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ia)&&(r=n[ia]),r==null&&(r=n[ia]=Jx++);let i=r&Gb,o=1<<i;e.data[t+(i>>Wb)]|=o}function el(t,e){let n=Kb(t,e);if(n!==-1)return n;let r=e[re];r.firstCreatePass&&(t.injectorIndex=e.length,Yf(r.data,t),Yf(e,null),Yf(r.blueprint,null));let i=mg(t,e),o=t.injectorIndex;if(zb(i)){let s=Ju(i),a=Xu(i,e),u=a[re].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Yf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Kb(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function mg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Xb(i),r===null)return wo;if(n++,i=i[Mo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return wo}function yp(t,e,n){Xx(t,e,n)}function eP(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(qb(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function Qb(t,e,n){if(n&se.Optional||t!==void 0)return t;ng(e,"NodeInjector")}function Yb(t,e,n,r){if(n&se.Optional&&r===void 0&&(r=null),(n&(se.Self|se.Host))===0){let i=t[ca],o=Yt(void 0);try{return i?i.get(e,r,n&se.Optional):sb(e,r,n&se.Optional)}finally{Yt(o)}}return Qb(r,e,n)}function Zb(t,e,n,r=se.Default,i){if(t!==null){if(e[J]&2048&&!(r&se.Self)){let s=iP(t,e,n,r,Dn);if(s!==Dn)return s}let o=Jb(t,e,n,r,Dn);if(o!==Dn)return o}return Yb(e,n,r,i)}function Jb(t,e,n,r,i){let o=nP(n);if(typeof o=="function"){if(!Fb(e,t,r))return r&se.Host?Qb(i,n,r):Yb(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&se.Optional))ng(n);else return s}finally{Ub()}}else if(typeof o=="number"){let s=null,a=Kb(t,e),u=wo,l=r&se.Host?e[fn][mn]:null;for((a===-1||r&se.SkipSelf)&&(u=a===-1?mg(t,e):e[a+8],u===wo||!DE(r,!1)?a=-1:(s=e[re],a=Ju(u),e=Xu(u,e)));a!==-1;){let h=e[re];if(bE(o,a,h.data)){let p=tP(a,e,n,s,r,l);if(p!==Dn)return p}u=e[a+8],u!==wo&&DE(r,e[re].data[a+8]===l)&&bE(o,a,e)?(s=h,a=Ju(u),e=Xu(u,e)):a=-1}}return i}function tP(t,e,n,r,i,o){let s=e[re],a=s.data[t+8],u=r==null?No(a)&&mp:r!=s&&(a.type&3)!==0,l=i&se.Host&&o===a,h=Bu(a,s,n,u,l);return h!==null?da(e,s,h,a):Dn}function Bu(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,y=i?a+h:l;for(let m=p;m<y;m++){let T=s[m];if(m<u&&n===T||m>=u&&T.type===n)return m}if(i){let m=s[u];if(m&&Cn(m)&&m.type===n)return u}return null}function da(t,e,n,r){let i=t[n],o=e.data;if(zx(i)){let s=i;s.resolving&&BN(UN(o[n]));let a=EE(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Yt(s.injectImpl):null,h=Fb(t,r,se.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&Hx(n,o[n],e)}finally{l!==null&&Yt(l),EE(a),s.resolving=!1,Ub()}}return i}function nP(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ia)?t[ia]:void 0;return typeof e=="number"?e>=0?e&Gb:rP:e}function bE(t,e,n){let r=1<<t;return!!(n[e+(t>>Wb)]&r)}function DE(t,e){return!(t&se.Self)&&!(t&se.Host&&e)}var ci=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Zb(this._tNode,this._lView,e,ml(r),n)}};function rP(){return new ci(xt(),_e())}function ba(t){return fl(()=>{let e=t.prototype.constructor,n=e[qu]||vp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[qu]||vp(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function vp(t){return eb(t)?()=>{let e=vp(Ct(t));return e&&e()}:Io(t)}function iP(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[J]&2048&&!Zu(s);){let a=Jb(o,s,n,r|se.Self,Dn);if(a!==Dn)return a;let u=o.parent;if(!u){let l=s[vb];if(l){let h=l.get(n,Dn,r);if(h!==Dn)return h}u=Xb(s),s=s[Mo]}o=u}return i}function Xb(t){let e=t[re],n=e.type;return n===2?e.declTNode:n===1?t[mn]:null}function yg(t){return eP(xt(),t)}function CE(t,e=null,n=null,r){let i=e0(t,e,n,r);return i.resolveInjectorInitializers(),i}function e0(t,e=null,n=null,r,i=new Set){let o=[n||Zt,rx(t)];return r=r||(typeof t=="object"?void 0:Nt(t)),new sa(o,e||og(),r||null,i)}var pn=class t{static THROW_IF_NOT_FOUND=oa;static NULL=new Wu;static create(e,n){if(Array.isArray(e))return CE({name:""},n,e,"");{let r=e.name??"";return CE({name:r},e.parent,e.providers,r)}}static \u0275prov=K({token:t,providedIn:"any",factory:()=>ae(cb)});static __NG_ELEMENT_ID__=-1};var oP=new G("");oP.__NG_ELEMENT_ID__=t=>{let e=xt();if(e===null)throw new H(204,!1);if(e.type&2)return e.value;if(t&se.Optional)return null;throw new H(204,!1)};var t0=!1,El=(()=>{class t{static __NG_ELEMENT_ID__=sP;static __NG_ENV_ID__=n=>n}return t})(),_p=class extends El{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return Ab(this._lView,e),()=>bx(this._lView,e)}};function sP(){return new _p(_e())}var ha=class{},bl=new G("",{providedIn:"root",factory:()=>!1});var n0=new G(""),r0=new G(""),Po=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Be(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=K({token:t,providedIn:"root",factory:()=>new t})}return t})();var wp=class extends Ue{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,px()&&(this.destroyRef=L(El,{optional:!0})??void 0,this.pendingTasks=L(Po,{optional:!0})??void 0)}emit(e){let n=ue(null);try{super.next(e)}finally{ue(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof je&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ye=wp;function tl(...t){}function i0(t){let e,n;function r(){t=tl;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function TE(t){return queueMicrotask(()=>t()),()=>{t=tl}}var vg="isAngularZone",nl=vg+"_ID",aP=0,at=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ye(!1);onMicrotaskEmpty=new Ye(!1);onStable=new Ye(!1);onError=new Ye(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=t0}=e;if(typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,lP(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(vg)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new H(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,cP,tl,tl);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},cP={};function _g(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function uP(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){i0(()=>{t.callbackScheduled=!1,Ip(t),t.isCheckStableRunning=!0,_g(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Ip(t)}function lP(t){let e=()=>{uP(t)},n=aP++;t._inner=t._inner.fork({name:"angular",properties:{[vg]:!0,[nl]:n,[nl+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(dP(u))return r.invokeTask(o,s,a,u);try{return SE(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),AE(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return SE(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!hP(u)&&e(),AE(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Ip(t),_g(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Ip(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function SE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function AE(t){t._nesting--,_g(t)}var Ep=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ye;onMicrotaskEmpty=new Ye;onStable=new Ye;onError=new Ye;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function dP(t){return o0(t,"__ignore_ng_zone__")}function hP(t){return o0(t,"__scheduler_tick__")}function o0(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Pr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},fP=new G("",{providedIn:"root",factory:()=>{let t=L(at),e=L(Pr);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function RE(t,e){return XE(t,e)}function pP(t){return XE(JE,t)}var s0=(RE.required=pP,RE);function gP(){return ko(xt(),_e())}function ko(t,e){return new en(Rn(t,e))}var en=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=gP}return t})();function mP(t){return t instanceof en?t.nativeElement:t}function yP(t){return typeof t=="function"&&t[jt]!==void 0}function Da(t,e){let n=jI(t),r=n[jt];return e?.equal&&(r.equal=e.equal),n.set=i=>du(r,i),n.update=i=>UI(r,i),n.asReadonly=vP.bind(n),n}function vP(){let t=this[jt];if(t.readonlyFn===void 0){let e=()=>this();e[jt]=t,t.readonlyFn=e}return t.readonlyFn}function a0(t){return yP(t)&&typeof t.set=="function"}function _P(){return this._results[Symbol.iterator]()}var bp=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ue}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=XN(e);(this._changesDetected=!JN(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=_P};function c0(t){return(t.flags&128)===128}var u0=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(u0||{}),l0=new Map,wP=0;function IP(){return wP++}function EP(t){l0.set(t[_l],t)}function Dp(t){l0.delete(t[_l])}var ME="__ngContext__";function Ca(t,e){xr(e)?(t[ME]=e[_l],EP(e)):t[ME]=e}function d0(t){return f0(t[ua])}function h0(t){return f0(t[hn])}function f0(t){for(;t!==null&&!nr(t);)t=t[hn];return t}var Cp;function p0(t){Cp=t}function bP(){if(Cp!==void 0)return Cp;if(typeof document<"u")return document;throw new H(210,!1)}var wg=new G("",{providedIn:"root",factory:()=>DP}),DP="ng",Ig=new G(""),Ta=new G("",{providedIn:"platform",factory:()=>"unknown"});var Eg=new G("",{providedIn:"root",factory:()=>bP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var CP="h",TP="b";var g0=!1,SP=new G("",{providedIn:"root",factory:()=>g0});var m0=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(m0||{}),Dl=new G(""),NE=new Set;function Sa(t){NE.has(t)||(NE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var AP=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=K({token:t,providedIn:"root",factory:()=>new t})}return t})();var RP=()=>null;function y0(t,e,n=!1){return RP(t,e,n)}function v0(t,e){let n=t.contentQueries;if(n!==null){let r=ue(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];lg(o),a.contentQueries(2,e[s],s)}}}finally{ue(r)}}}function Tp(t,e,n){lg(0);let r=ue(null);try{e(t,n)}finally{ue(r)}}function _0(t,e,n){if(wb(e)){let r=ue(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{ue(r)}}}var An=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(An||{});var Fu;function MP(){if(Fu===void 0&&(Fu=null,op.trustedTypes))try{Fu=op.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Fu}function xE(t){return MP()?.createScriptURL(t)||t}var rl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ZE})`}};function Aa(t){return t instanceof rl?t.changingThisBreaksApplicationSecurity:t}function bg(t,e){let n=NP(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${ZE})`)}return n===e}function NP(t){return t instanceof rl&&t.getTypeName()||null}var xP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function w0(t){return t=String(t),t.match(xP)?t:"unsafe:"+t}var Cl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Cl||{});function PP(t){let e=E0();return e?e.sanitize(Cl.URL,t)||"":bg(t,"URL")?Aa(t):w0(gl(t))}function kP(t){let e=E0();if(e)return xE(e.sanitize(Cl.RESOURCE_URL,t)||"");if(bg(t,"ResourceURL"))return xE(Aa(t));throw new H(904,!1)}function OP(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?kP:PP}function I0(t,e,n){return OP(e,n)(t)}function E0(){let t=_e();return t&&t[Jn].sanitizer}function b0(t){return t instanceof Function?t():t}function FP(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var D0="ng-template";function VP(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&FP(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Dg(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Dg(t){return t.type===4&&t.value!==D0}function LP(t,e,n){let r=t.type===4&&!n?D0:t.value;return e===r}function jP(t,e,n){let r=4,i=t.attrs,o=i!==null?$P(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!dn(r)&&!dn(u))return!1;if(s&&dn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!LP(t,u,n)||u===""&&e.length===1){if(dn(r))return!1;s=!0}}else if(r&8){if(i===null||!VP(t,i,u,n)){if(dn(r))return!1;s=!0}}else{let l=e[++a],h=UP(u,i,Dg(t),n);if(h===-1){if(dn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(dn(r))return!1;s=!0}}}}return dn(r)||s}function dn(t){return(t&1)===0}function UP(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return HP(e,t)}function BP(t,e,n=!1){for(let r=0;r<e.length;r++)if(jP(t,e[r],n))return!0;return!1}function $P(t){for(let e=0;e<t.length;e++){let n=t[e];if(qb(n))return e}return t.length}function HP(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function PE(t,e){return t?":not("+e.trim()+")":e}function qP(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!dn(s)&&(e+=PE(o,i),i=""),r=s,o=o||!dn(r);n++}return i!==""&&(e+=PE(o,i)),e}function zP(t){return t.map(qP).join(",")}function GP(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!dn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Ii={};function WP(t,e){return t.createText(e)}function KP(t,e,n){t.setValue(e,n)}function C0(t,e,n){return t.createElement(e,n)}function il(t,e,n,r,i){t.insertBefore(e,n,r,i)}function T0(t,e,n){t.appendChild(e,n)}function kE(t,e,n,r,i){r!==null?il(t,e,n,r,i):T0(t,e,n)}function QP(t,e,n){t.removeChild(null,e,n)}function YP(t,e,n){t.setAttribute(e,"style",n)}function ZP(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function S0(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Kx(t,e,r),i!==null&&ZP(t,e,i),o!==null&&YP(t,e,o)}function Cg(t,e,n,r,i,o,s,a,u,l,h){let p=Xt+r,y=p+i,m=JP(p,y),T=typeof l=="function"?l():l;return m[re]={type:t,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1,ssrId:h}}function JP(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ii);return n}function XP(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Cg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Tg(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[tr]=i,p[J]=r|4|128|8|64|1024,(l!==null||t&&t[J]&2048)&&(p[J]|=2048),Sb(p),p[vt]=p[Mo]=t,p[Ze]=n,p[Jn]=s||t&&t[Jn],p[Je]=a||t&&t[Je],p[ca]=u||t&&t[ca]||null,p[mn]=o,p[_l]=IP(),p[aa]=h,p[vb]=l,p[fn]=e.type==2?t[fn]:p,p}function ek(t,e,n){let r=Rn(e,t),i=XP(n),o=t[Jn].rendererFactory,s=Sg(t,Tg(t,i,null,A0(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function A0(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function R0(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Sg(t,e){return t[ua]?t[yE][hn]=e:t[ua]=e,t[yE]=e,e}function U(t=1){M0(_t(),_e(),wi()+t,!1)}function M0(t,e,n,r){if(!r)if((e[J]&3)===3){let o=t.preOrderCheckHooks;o!==null&&ju(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Uu(e,o,0,n)}pi(n)}var Tl=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Tl||{});function Sp(t,e,n,r){let i=ue(null);try{let[o,s,a]=t.inputs[n],u=null;(s&Tl.SignalBased)!==0&&(u=e[o][jt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):Ib(e,u,o,r)}finally{ue(i)}}function N0(t,e,n,r,i){let o=wi(),s=r&2;try{pi(-1),s&&e.length>Xt&&M0(t,e,Xt,!1),Re(s?2:0,i),n(r,i)}finally{pi(o),Re(s?3:1,i)}}function Ag(t,e,n){sk(t,e,n),(n.flags&64)===64&&ak(t,e,n)}function x0(t,e,n=Rn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function tk(t,e,n,r){let o=r.get(SP,g0)||n===An.ShadowDom,s=t.selectRootElement(e,o);return nk(s),s}function nk(t){rk(t)}var rk=()=>null;function ik(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function P0(t,e,n,r,i,o,s,a){if(!a&&Rg(e,t,n,r,i)){No(e)&&ok(n,e.index);return}if(e.type&3){let u=Rn(e,n);r=ik(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)}else e.type&12}function ok(t,e){let n=Sn(e,t);n[J]&16||(n[J]|=64)}function sk(t,e,n){let r=n.directiveStart,i=n.directiveEnd;No(n)&&ek(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||el(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=da(e,t,s,n);if(Ca(u,e),o!==null&&dk(e,s-r,u,a,n,o),Cn(a)){let l=Sn(n.index,e);l[Ze]=da(e,t,s,n)}}}function ak(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Vx();try{pi(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];pp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&ck(u,l)}}finally{pi(-1),pp(s)}}function ck(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function k0(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];BP(e,o.selectors,!1)&&(r??=[],Cn(o)?r.unshift(o):r.push(o))}return r}function uk(t,e,n,r,i,o){let s=Rn(t,e);lk(e[Je],s,o,t.value,n,r,i)}function lk(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?gl(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function dk(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Sp(r,n,u,l)}}function O0(t,e){let n=t[ca],r=n?n.get(Pr,null):null;r&&r.handleError(e)}function Rg(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Sp(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];Sp(h,l,r,i),a=!0}return a}function hk(t,e){let n=Sn(e,t),r=n[re];fk(r,n);let i=n[tr];i!==null&&n[aa]===null&&(n[aa]=y0(i,n[ca])),Re(18),Mg(r,n,n[Ze]),Re(19,n[Ze])}function fk(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Mg(t,e,n){dg(e);try{let r=t.viewQuery;r!==null&&Tp(1,r,n);let i=t.template;i!==null&&N0(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Xn]?.finishViewCreation(t),t.staticContentQueries&&v0(t,e),t.staticViewQueries&&Tp(2,t.viewQuery,n);let o=t.components;o!==null&&pk(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[J]&=-5,hg()}}function pk(t,e){for(let n=0;n<e.length;n++)hk(t,e[n])}function Sl(t,e,n,r){let i=ue(null);try{let o=e.tView,a=t[J]&4096?4096:16,u=Tg(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[di]=l;let h=t[Xn];return h!==null&&(u[Xn]=h.createEmbeddedView(o)),Mg(o,u,n),u}finally{ue(i)}}function fa(t,e){return!e||e.firstChild===null||c0(t)}var gk;function Ng(t,e){return gk(t,e)}var er=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(er||{});function F0(t){return(t.flags&32)===32}function vo(t,e,n,r,i){if(r!=null){let o,s=!1;nr(r)?o=r:xr(r)&&(s=!0,r=r[tr]);let a=Tn(r);t===0&&n!==null?i==null?T0(e,n,a):il(e,n,a,i||null,!0):t===1&&n!==null?il(e,n,a,i||null,!0):t===2?QP(e,a,s):t===3&&e.destroyNode(a),o!=null&&Sk(e,t,o,n,i)}}function mk(t,e){V0(t,e),e[tr]=null,e[mn]=null}function yk(t,e,n,r,i,o){r[tr]=i,r[mn]=e,Rl(t,r,n,1,i,o)}function V0(t,e){e[Jn].changeDetectionScheduler?.notify(9),Rl(t,e,e[Je],2,null,null)}function vk(t){let e=t[ua];if(!e)return Zf(t[re],t);for(;e;){let n=null;if(xr(e))n=e[ua];else{let r=e[yt];r&&(n=r)}if(!n){for(;e&&!e[hn]&&e!==t;)xr(e)&&Zf(e[re],e),e=e[vt];e===null&&(e=t),xr(e)&&Zf(e[re],e),n=e&&e[hn]}e=n}}function xg(t,e){let n=t[Do],r=n.indexOf(e);n.splice(r,1)}function Al(t,e){if(Ia(e))return;let n=e[Je];n.destroyNode&&Rl(t,e,n,3,null,null),vk(e)}function Zf(t,e){if(Ia(e))return;let n=ue(null);try{e[J]&=-129,e[J]|=256,e[Bt]&&Tf(e[Bt]),wk(t,e),_k(t,e),e[re].type===1&&e[Je].destroy();let r=e[di];if(r!==null&&nr(e[vt])){r!==e[vt]&&xg(r,e);let i=e[Xn];i!==null&&i.detachView(t)}Dp(e)}finally{ue(n)}}function _k(t,e){let n=t.cleanup,r=e[Ku];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Ku]=null);let i=e[Nr];if(i!==null){e[Nr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Qu];if(o!==null){e[Qu]=null;for(let s of o)s.destroy()}}function wk(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof gi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Re(4,a,u);try{u.call(a)}finally{Re(5,a,u)}}else{Re(4,i,o);try{o.call(i)}finally{Re(5,i,o)}}}}}function Ik(t,e,n){return Ek(t,e.parent,n)}function Ek(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[tr];if(No(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===An.None||i===An.Emulated)return null}return Rn(r,n)}function bk(t,e,n){return Ck(t,e,n)}function Dk(t,e,n){return t.type&40?Rn(t,n):null}var Ck=Dk,OE;function Pg(t,e,n,r){let i=Ik(t,r,e),o=e[Je],s=r.parent||e[mn],a=bk(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)kE(o,i,n[u],a,!1);else kE(o,i,n,a,!1);OE!==void 0&&OE(o,r,e,n,i)}function ra(t,e){if(e!==null){let n=e.type;if(n&3)return Rn(e,t);if(n&4)return Ap(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ra(t,r);{let i=t[e.index];return nr(i)?Ap(-1,i):Tn(i)}}else{if(n&128)return ra(t,e.next);if(n&32)return Ng(e,t)()||Tn(t[e.index]);{let r=L0(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=fi(t[fn]);return ra(i,r)}else return ra(t,e.next)}}}return null}function L0(t,e){if(e!==null){let r=t[fn][mn],i=e.projection;return r.projection[i]}return null}function Ap(t,e){let n=yt+t+1;if(n<e.length){let r=e[n],i=r[re].firstChild;if(i!==null)return ra(r,i)}return e[hi]}function kg(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&Ca(Tn(a),r),n.flags|=2),!F0(n))if(u&8)kg(t,e,n.child,r,i,o,!1),vo(e,t,i,a,o);else if(u&32){let l=Ng(n,r),h;for(;h=l();)vo(e,t,i,h,o);vo(e,t,i,a,o)}else u&16?Tk(t,e,r,n,i,o):vo(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Rl(t,e,n,r,i,o){kg(n,r,t.firstChild,e,i,o,!1)}function Tk(t,e,n,r,i,o){let s=n[fn],u=s[mn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];vo(e,t,i,h,o)}else{let l=u,h=s[vt];c0(r)&&(l.flags|=128),kg(t,e,l,h,i,o,!0)}}function Sk(t,e,n,r,i){let o=n[hi],s=Tn(n);o!==s&&vo(e,t,r,o,i);for(let a=yt;a<n.length;a++){let u=n[a];Rl(u[re],u,t,e,r,o)}}function Ak(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:er.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=er.Important),t.setStyle(n,r,i,o))}}function ol(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Tn(o)),nr(o)&&Rk(o,r);let s=n.type;if(s&8)ol(t,e,n.child,r);else if(s&32){let a=Ng(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=L0(e,n);if(Array.isArray(a))r.push(...a);else{let u=fi(e[fn]);ol(u[re],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Rk(t,e){for(let n=yt;n<t.length;n++){let r=t[n],i=r[re].firstChild;i!==null&&ol(r[re],r,i,e)}t[hi]!==t[tr]&&e.push(t[hi])}function j0(t){if(t[Wf]!==null){for(let e of t[Wf])e.impl.addSequence(e);t[Wf].length=0}}var U0=[];function Mk(t){return t[Bt]??Nk(t)}function Nk(t){let e=U0.pop()??Object.create(Pk);return e.lView=t,e}function xk(t){t.lView[Bt]!==t&&(t.lView=null,U0.push(t))}var Pk=oe(V({},Zs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Il(t.lView)},consumerOnSignalRead(){this.lView[Bt]=this}});function kk(t){let e=t[Bt]??Object.create(Ok);return e.lView=t,e}var Ok=oe(V({},Zs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=fi(t.lView);for(;e&&!B0(e[re]);)e=fi(e);e&&ug(e)},consumerOnSignalRead(){this.lView[Bt]=this}});function B0(t){return t.type!==2}function $0(t){if(t[Qu]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Qu])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[J]&8192)}}var Fk=100;function H0(t,e=!0,n=0){let i=t[Jn].rendererFactory,o=!1;o||i.begin?.();try{Vk(t,n)}catch(s){throw e&&O0(t,s),s}finally{o||i.end?.()}}function Vk(t,e){let n=kb();try{_E(!0),Rp(t,e);let r=0;for(;wl(t);){if(r===Fk)throw new H(103,!1);r++,Rp(t,1)}}finally{_E(n)}}function Lk(t,e,n,r){if(Ia(e))return;let i=e[J],o=!1,s=!1;dg(e);let a=!0,u=null,l=null;o||(B0(t)?(l=Mk(e),u=cu(l)):AI()===null?(a=!1,l=kk(e),u=cu(l)):e[Bt]&&(Tf(e[Bt]),e[Bt]=null));try{Sb(e),Px(t.bindingStartIndex),n!==null&&N0(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let m=t.preOrderCheckHooks;m!==null&&ju(e,m,null)}else{let m=t.preOrderHooks;m!==null&&Uu(e,m,0,null),Kf(e,0)}if(s||jk(e),$0(e),q0(e,0),t.contentQueries!==null&&v0(t,e),!o)if(h){let m=t.contentCheckHooks;m!==null&&ju(e,m)}else{let m=t.contentHooks;m!==null&&Uu(e,m,1),Kf(e,1)}Bk(t,e);let p=t.components;p!==null&&G0(e,p,0);let y=t.viewQuery;if(y!==null&&Tp(2,y,r),!o)if(h){let m=t.viewCheckHooks;m!==null&&ju(e,m)}else{let m=t.viewHooks;m!==null&&Uu(e,m,2),Kf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Gf]){for(let m of e[Gf])m();e[Gf]=null}o||(j0(e),e[J]&=-73)}catch(h){throw o||Il(e),h}finally{l!==null&&(Df(l,u),a&&xk(l)),hg()}}function q0(t,e){for(let n=d0(t);n!==null;n=h0(n))for(let r=yt;r<n.length;r++){let i=n[r];z0(i,e)}}function jk(t){for(let e=d0(t);e!==null;e=h0(e)){if(!(e[J]&2))continue;let n=e[Do];for(let r=0;r<n.length;r++){let i=n[r];ug(i)}}}function Uk(t,e,n){Re(18);let r=Sn(e,t);z0(r,n),Re(19,r[Ze])}function z0(t,e){cg(t)&&Rp(t,e)}function Rp(t,e){let r=t[re],i=t[J],o=t[Bt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Cf(o)),s||=!1,o&&(o.dirty=!1),t[J]&=-9217,s)Lk(r,t,r.template,t[Ze]);else if(i&8192){$0(t),q0(t,1);let a=r.components;a!==null&&G0(t,a,1),j0(t)}}function G0(t,e,n){for(let r=0;r<e.length;r++)Uk(t,e[r],n)}function Bk(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)pi(~i);else{let o=i,s=n[++r],a=n[++r];Fx(s,o);let u=e[o];Re(24,u),a(2,u),Re(25,u)}}}finally{pi(-1)}}function Og(t,e){let n=kb()?64:1088;for(t[Jn].changeDetectionScheduler?.notify(e);t;){t[J]|=n;let r=fi(t);if(Zu(t)&&!r)return t;t=r}return null}function W0(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function K0(t,e){let n=yt+e;if(n<t.length)return t[n]}function Ml(t,e,n,r=!0){let i=e[re];if($k(i,e,t,n),r){let s=Ap(n,t),a=e[Je],u=a.parentNode(t[hi]);u!==null&&yk(i,t[mn],a,e,u,s)}let o=e[aa];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Q0(t,e){let n=pa(t,e);return n!==void 0&&Al(n[re],n),n}function pa(t,e){if(t.length<=yt)return;let n=yt+e,r=t[n];if(r){let i=r[di];i!==null&&i!==t&&xg(i,r),e>0&&(t[n-1][hn]=r[hn]);let o=Gu(t,yt+e);mk(r[re],r);let s=o[Xn];s!==null&&s.detachView(o[re]),r[vt]=null,r[hn]=null,r[J]&=-129}return r}function $k(t,e,n,r){let i=yt+r,o=n.length;r>0&&(n[i-1][hn]=e),r<o-yt?(e[hn]=n[i],ab(n,yt+r,e)):(n.push(e),e[hn]=null),e[vt]=n;let s=e[di];s!==null&&n!==s&&Y0(s,e);let a=e[Xn];a!==null&&a.insertView(t),hp(e),e[J]|=128}function Y0(t,e){let n=t[Do],r=e[vt];if(xr(r))t[J]|=2;else{let i=r[vt][fn];e[fn]!==i&&(t[J]|=2)}n===null?t[Do]=[e]:n.push(e)}var mi=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,n=e[re];return ol(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[Ze]}get dirty(){return!!(this._lView[J]&9280)||!!this._lView[Bt]?.dirty}set context(e){this._lView[Ze]=e}get destroyed(){return Ia(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[vt];if(nr(e)){let n=e[Yu],r=n?n.indexOf(this):-1;r>-1&&(pa(e,r),Gu(n,r))}this._attachedToViewContainer=!1}Al(this._lView[re],this._lView)}onDestroy(e){Ab(this._lView,e)}markForCheck(){Og(this._cdRefInjectingView||this._lView,4)}markForRefresh(){ug(this._cdRefInjectingView||this._lView)}detach(){this._lView[J]&=-129}reattach(){hp(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,H0(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Zu(this._lView),n=this._lView[di];n!==null&&!e&&xg(n,this._lView),V0(this._lView[re],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e;let n=Zu(this._lView),r=this._lView[di];r!==null&&!n&&Y0(r,this._lView),hp(this._lView)}},ga=(()=>{class t{static __NG_ELEMENT_ID__=zk}return t})(),Hk=ga,qk=class extends Hk{_declarationLView;_declarationTContainer;elementRef;constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Sl(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new mi(i)}};function zk(){return Fg(xt(),_e())}function Fg(t,e){return t.type&4?new qk(e,t,ko(t,e)):null}function Vg(t,e,n,r,i){let o=t.data[e];if(o===null)o=Gk(t,e,n,r,i),Ox()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Nx();o.injectorIndex=s===null?-1:s.injectorIndex}return Ea(o,!0),o}function Gk(t,e,n,r,i){let o=xb(),s=Pb(),a=s?o:o&&o.parent,u=t.data[e]=Kk(t,a,n,e,r,i);return Wk(t,u,o,s),u}function Wk(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function Kk(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Ax()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var HW=new RegExp(`^(\\d+)*(${TP}|${CP})*(.*)`);var Qk=()=>null;function ma(t,e){return Qk(t,e)}var Mp=class{},sl=class{},Np=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Nt(e)}.`)}},To=class{static NULL=new Np},So=class{},Fr=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>Yk()}return t})();function Yk(){let t=_e(),e=xt(),n=Sn(e.index,t);return(xr(n)?n:t)[Je]}var Zk=(()=>{class t{static \u0275prov=K({token:t,providedIn:"root",factory:()=>null})}return t})();function FE(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=dE(i,a);else if(o==2){let u=a,l=e[++s];r=dE(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Q(t,e=se.Default){let n=_e();if(n===null)return ae(t,e);let r=xt();return Zb(r,n,Ct(t),e)}function Z0(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a,u=null,l=null,h=Xk(s);h===null?a=s:[a,u,l]=h,nO(t,e,n,a,o,u,l)}o!==null&&r!==null&&Jk(n,r,o)}function Jk(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new H(-301,!1);r.push(e[i],o)}}function Xk(t){let e=null,n=!1;for(let s=0;s<t.length;s++){let a=t[s];if(s===0&&Cn(a)&&(e=a),a.findHostDirectiveDefs!==null){n=!0;break}}if(!n)return null;let r=null,i=null,o=null;for(let s of t)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,eO(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?t:t.slice(1)),[r,i,o]):null}function eO(t,e,n,r){let i=e.length;t.findHostDirectiveDefs(t,e,r),n.set(t,[i,e.length-1])}function tO(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function nO(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let y=0;y<a;y++){let m=r[y];!u&&Cn(m)&&(u=!0,tO(t,n,y)),yp(el(n,e),t,m.type)}cO(n,t.data.length,a);for(let y=0;y<a;y++){let m=r[y];m.providersResolver&&m.providersResolver(m)}let l=!1,h=!1,p=R0(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let y=0;y<a;y++){let m=r[y];if(n.mergedAttrs=la(n.mergedAttrs,m.hostAttrs),iO(t,n,e,p,m),aO(p,m,i),s!==null&&s.has(m)){let[N,P]=s.get(m);n.directiveToIndex.set(m.type,[p,N+n.directiveStart,P+n.directiveStart])}else(o===null||!o.has(m))&&n.directiveToIndex.set(m.type,p);m.contentQueries!==null&&(n.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(n.flags|=64);let T=m.type.prototype;!l&&(T.ngOnChanges||T.ngOnInit||T.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(T.ngOnChanges||T.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}rO(t,n,o)}function rO(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))VE(0,e,i,r),VE(1,e,i,r),jE(e,r,!1);else{let o=n.get(i);LE(0,e,o,r),LE(1,e,o,r),jE(e,r,!0)}}}function VE(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),J0(e,o)}}function LE(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),J0(e,s)}}function J0(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function jE(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Dg(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function iO(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Io(i.type,!0)),s=new gi(o,Cn(i),Q);t.blueprint[r]=s,n[r]=s,oO(t,e,r,R0(t,n,i.hostVars,Ii),i)}function oO(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;sO(s)!=a&&s.push(a),s.push(n,r,o)}}function sO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function aO(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Cn(e)&&(n[""]=t)}}function cO(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function X0(t,e,n,r,i,o,s,a){let u=e.consts,l=Co(u,s),h=Vg(e,t,2,r,l);return o&&Z0(e,n,h,Co(u,a),i),h.mergedAttrs=la(h.mergedAttrs,h.attrs),h.attrs!==null&&FE(h,h.attrs,!1),h.mergedAttrs!==null&&FE(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function eD(t,e){$b(t,e),wb(e)&&t.queries.elementEnd(e)}var al=class extends To{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=li(e);return new ya(n,this.ngModule)}};function uO(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Tl.SignalBased)!==0};return i&&(o.transform=i),o})}function lO(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function dO(t,e,n){let r=e instanceof Jt?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new gp(n,r):n}function hO(t){let e=t.get(So,null);if(e===null)throw new H(407,!1);let n=t.get(Zk,null),r=t.get(ha,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r}}function fO(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return C0(e,n,n==="svg"?Cb:n==="math"?_x:null)}var ya=class extends sl{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){return uO(this.componentDef.inputs)}get outputs(){return lO(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=zP(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i){Re(22);let o=ue(null);try{let s=this.componentDef,a=r?["ng-version","19.2.0"]:GP(this.componentDef.selectors[0]),u=Cg(0,null,null,1,0,null,null,null,null,[a],null),l=dO(s,i||this.ngModule,e),h=hO(l),p=h.rendererFactory.createRenderer(null,s),y=r?tk(p,r,s.encapsulation,l):fO(s,p),m=Tg(null,u,null,512|A0(s),null,null,h,p,l,null,y0(y,l,!0));m[Xt]=y,dg(m);let T=null;try{let N=X0(Xt,u,m,"#host",()=>[this.componentDef],!0,0);y&&(S0(p,y,N),Ca(y,m)),Ag(u,m,N),_0(u,N,m),eD(u,N),n!==void 0&&pO(N,this.ngContentSelectors,n),T=Sn(N.index,m),m[Ze]=T[Ze],Mg(u,m,null)}catch(N){throw T!==null&&Dp(T),Dp(m),N}finally{Re(23),hg()}return new xp(this.componentType,m)}finally{ue(o)}}},xp=class extends Mp{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n){super(),this._rootLView=n,this._tNode=ag(n[re],Xt),this.location=ko(this._tNode,n),this.instance=Sn(this._tNode.index,n)[Ze],this.hostView=this.changeDetectorRef=new mi(n,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Rg(r,i[re],i,e,n);this.previousInputValues.set(e,n);let s=Sn(r.index,i);Og(s,1)}get injector(){return new ci(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function pO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Oo=(()=>{class t{static __NG_ELEMENT_ID__=gO}return t})();function gO(){let t=xt();return nD(t,_e())}var mO=Oo,tD=class extends mO{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ko(this._hostTNode,this._hostLView)}get injector(){return new ci(this._hostTNode,this._hostLView)}get parentInjector(){let e=mg(this._hostTNode,this._hostLView);if(zb(e)){let n=Xu(e,this._hostLView),r=Ju(e),i=n[re].data[r+8];return new ci(i,n)}else return new ci(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=UE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-yt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=ma(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,fa(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!gx(e),a;if(s)a=n;else{let T=n||{};a=T.index,r=T.injector,i=T.projectableNodes,o=T.environmentInjector||T.ngModuleRef}let u=s?e:new ya(li(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let N=(s?l:this.parentInjector).get(Jt,null);N&&(o=N)}let h=li(u.componentType??{}),p=ma(this._lContainer,h?.id??null),y=p?.firstChild??null,m=u.create(l,i,y,o);return this.insertImpl(m.hostView,a,fa(this._hostTNode,p)),m}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Ix(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[vt],l=new tD(u,u[mn],u[vt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Ml(s,i,o,r),e.attachToViewContainerRef(),ab(Jf(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=UE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=pa(this._lContainer,n);r&&(Gu(Jf(this._lContainer),n),Al(r[re],r))}detach(e){let n=this._adjustIndex(e,-1),r=pa(this._lContainer,n);return r&&Gu(Jf(this._lContainer),n)!=null?new mi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function UE(t){return t[Yu]}function Jf(t){return t[Yu]||(t[Yu]=[])}function nD(t,e){let n,r=e[t.index];return nr(r)?n=r:(n=W0(r,e,null,t),e[t.index]=n,Sg(e,n)),vO(n,e,t,r),new tD(n,t,e)}function yO(t,e){let n=t[Je],r=n.createComment(""),i=Rn(e,t),o=n.parentNode(i);return il(n,o,r,n.nextSibling(i),!1),r}var vO=IO,_O=()=>!1;function wO(t,e,n){return _O(t,e,n)}function IO(t,e,n,r){if(t[hi])return;let i;n.type&8?i=Tn(r):i=yO(e,n),t[hi]=i}var Pp=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},kp=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Lg(e,n).matches!==null&&this.queries[n].setDirty()}},Op=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=RO(e):this.predicate=e}},Fp=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Vp=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,EO(n,o)),this.matchTNodeWithReadOption(e,n,Bu(n,e,o,!1,!1))}else r===ga?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Bu(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===en||i===Oo||i===ga&&n.type&4)this.addMatch(n.index,-2);else{let o=Bu(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function EO(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function bO(t,e){return t.type&11?ko(t,e):t.type&4?Fg(t,e):null}function DO(t,e,n,r){return n===-1?bO(e,t):n===-2?CO(t,e,r):da(t,t[re],n,e)}function CO(t,e,n){if(n===en)return ko(e,t);if(n===ga)return Fg(e,t);if(n===Oo)return nD(e,t)}function rD(t,e,n,r){let i=e[Xn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(DO(e,h,s[u+1],n.metadata.read))}}i.matches=a}return i.matches}function Lp(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=rD(t,e,i,n);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=yt;p<h.length;p++){let y=h[p];y[di]===y[vt]&&Lp(y[re],y,l,r)}if(h[Do]!==null){let p=h[Do];for(let y=0;y<p.length;y++){let m=p[y];Lp(m[re],m,l,r)}}}}}return r}function TO(t,e){return t[Xn].queries[e].queryList}function SO(t,e,n){let r=new bp((n&4)===4);return Dx(t,e,r,r.destroy),(e[Xn]??=new kp).queries.push(new Pp(r))-1}function AO(t,e,n,r){let i=_t();if(i.firstCreatePass){let o=xt();MO(i,new Op(e,n,r),o.index),NO(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return SO(i,_e(),n)}function RO(t){return t.split(",").map(e=>e.trim())}function MO(t,e,n){t.queries===null&&(t.queries=new Fp),t.queries.track(new Vp(e,n))}function NO(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function Lg(t,e){return t.queries.getByIndex(e)}function xO(t,e){let n=t[re],r=Lg(n,e);return r.crossesNgTemplate?Lp(n,t,e,[]):rD(n,t,r,e)}var kr=class{},va=class{};var jp=class extends kr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new al(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=lb(e);this._bootstrapComponents=b0(o.bootstrap),this._r3Injector=e0(e,n,[{provide:kr,useValue:this},{provide:To,useValue:this.componentFactoryResolver},...r],Nt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Up=class extends va{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new jp(this.moduleType,e,[])}};var cl=class extends kr{injector;componentFactoryResolver=new al(this);instance=null;constructor(e){super();let n=new sa([...e.providers,{provide:kr,useValue:this},{provide:To,useValue:this.componentFactoryResolver}],e.parent||og(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function jg(t,e,n=null){return new cl({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var PO=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=pb(!1,n.type),i=r.length>0?jg([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=K({token:t,providedIn:"environment",factory:()=>new t(ae(Jt))})}return t})();function He(t){return fl(()=>{let e=iD(t),n=oe(V({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===u0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(PO).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||An.Emulated,styles:t.styles||Zt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Sa("NgStandalone"),oD(n);let r=t.dependencies;return n.directiveDefs=BE(r,!1),n.pipeDefs=BE(r,!0),n.id=LO(n),n})}function kO(t){return li(t)||db(t)}function OO(t){return t!==null}function Ei(t){return fl(()=>({type:t.type,bootstrap:t.bootstrap||Zt,declarations:t.declarations||Zt,imports:t.imports||Zt,exports:t.exports||Zt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function FO(t,e){if(t==null)return ui;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Tl.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function VO(t){if(t==null)return ui;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Pt(t){return fl(()=>{let e=iD(t);return oD(e),e})}function iD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||ui,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Zt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:FO(t.inputs,e),outputs:VO(t.outputs),debugInfo:null}}function oD(t){t.features?.forEach(e=>e(t))}function BE(t,e){if(!t)return null;let n=e?hb:kO;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(OO)}function LO(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function jO(t){return Object.getPrototypeOf(t.prototype).constructor}function Vr(t){let e=jO(t.type),n=!0,r=[t];for(;e;){let i;if(Cn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Xf(t.inputs),s.declaredInputs=Xf(t.declaredInputs),s.outputs=Xf(t.outputs);let a=i.hostBindings;a&&qO(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&$O(t,u),l&&HO(t,l),UO(t,i),xN(t.outputs,i.outputs),Cn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Vr&&(n=!1)}}e=Object.getPrototypeOf(e)}BO(r)}function UO(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function BO(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=la(i.hostAttrs,n=la(n,i.hostAttrs))}}function Xf(t){return t===ui?{}:t===Zt?[]:t}function $O(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function HO(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function qO(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function bi(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function zO(t,e,n,r,i,o,s,a,u){let l=e.consts,h=Vg(e,t,4,s||null,a||null);Nb()&&Z0(e,n,h,Co(l,u),k0),h.mergedAttrs=la(h.mergedAttrs,h.attrs),$b(e,h);let p=h.tView=Cg(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function Bp(t,e,n,r,i,o,s,a,u,l){let h=n+Xt,p=e.firstCreatePass?zO(h,e,t,r,i,o,s,a,u):e.data[h];Ea(p,!1);let y=GO(e,t,p,n);pg()&&Pg(e,t,y,p),Ca(y,t);let m=W0(y,t,y,p);return t[h]=m,Sg(t,m),wO(m,p,t),sg(p)&&Ag(e,t,p),u!=null&&x0(t,p,l),p}function xe(t,e,n,r,i,o,s,a){let u=_e(),l=_t(),h=Co(l.consts,o);return Bp(u,l,t,e,n,r,i,h,s,a),xe}var GO=WO;function WO(t,e,n,r){return gg(!0),e[Je].createComment("")}var Ug=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var sD=new G("");var KO=(()=>{class t{static \u0275prov=K({token:t,providedIn:"root",factory:()=>new $p})}return t})(),$p=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}};function Di(t){return!!t&&typeof t.then=="function"}function aD(t){return!!t&&typeof t.subscribe=="function"}var cD=new G("");var uD=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=L(cD,{optional:!0})??[];injector=L(pn);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=gn(this.injector,i);if(Di(o))n.push(o);else if(aD(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Bg=new G("");function QO(){LI(()=>{throw new H(600,!1)})}function YO(t){return t.isBoundToModule}var ZO=10;var Or=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=L(fP);afterRenderManager=L(AP);zonelessEnabled=L(bl);rootEffectScheduler=L(KO);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Ue;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=L(Po).hasPendingTasks.pipe(he(n=>!n));constructor(){L(Dl,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=L(Jt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){Re(10);let i=n instanceof sl;if(!this._injector.get(uD).done){let y=!i&&fb(n),m=!1;throw new H(405,m)}let s;i?s=n:s=this._injector.get(To).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let a=YO(s)?void 0:this._injector.get(kr),u=r||s.selector,l=s.create(pn.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(sD,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),$u(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),Re(11,l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Re(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(m0.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new H(101,!1);let n=ue(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ue(n),this.afterTick.next(),Re(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(So,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<ZO;)Re(14),this.synchronizeOnce(),Re(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)JO(r,i,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>wl(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;$u(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(Bg,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>$u(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new H(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $u(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function JO(t,e,n,r){if(!n&&!wl(t))return;H0(t,e,n&&!r?0:1)}function Nl(t,e,n,r){let i=_e(),o=xo();if(bi(i,o,e)){let s=_t(),a=fg();uk(a,i,t,e,n,r)}return Nl}function XO(t,e,n,r){return bi(t,xo(),n)?e+gl(n)+r:Ii}function Vu(t,e){return t<<17|e<<2}function yi(t){return t>>17&32767}function e1(t){return(t&2)==2}function t1(t,e){return t&131071|e<<17}function Hp(t){return t|2}function Ao(t){return(t&131068)>>2}function ep(t,e){return t&-131069|e<<2}function n1(t){return(t&1)===1}function qp(t){return t|1}function r1(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=yi(s),u=Ao(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||wa(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let y=yi(t[a+1]);t[r+1]=Vu(y,a),y!==0&&(t[y+1]=ep(t[y+1],r)),t[a+1]=t1(t[a+1],r)}else t[r+1]=Vu(a,0),a!==0&&(t[a+1]=ep(t[a+1],r)),a=r;else t[r+1]=Vu(u,0),a===0?a=r:t[u+1]=ep(t[u+1],r),u=r;l&&(t[r+1]=Hp(t[r+1])),$E(t,h,r,!0),$E(t,h,r,!1),i1(e,h,t,r,o),s=Vu(a,u),o?e.classBindings=s:e.styleBindings=s}function i1(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&wa(o,e)>=0&&(n[r+1]=qp(n[r+1]))}function $E(t,e,n,r){let i=t[n+1],o=e===null,s=r?yi(i):Ao(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];o1(u,e)&&(a=!0,t[s+1]=r?qp(l):Hp(l)),s=r?yi(l):Ao(l)}a&&(t[n+1]=r?Hp(i):qp(i))}function o1(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?wa(t,e)>=0:!1}function Xe(t,e,n){let r=_e(),i=xo();if(bi(r,i,e)){let o=_t(),s=fg();P0(o,s,r,t,e,r[Je],n,!1)}return Xe}function HE(t,e,n,r,i){Rg(e,t,n,i?"class":"style",r)}function Lr(t,e){return s1(t,e,null,!0),Lr}function s1(t,e,n,r){let i=_e(),o=_t(),s=kx(2);if(o.firstUpdatePass&&c1(o,t,s,r),e!==Ii&&bi(i,s,e)){let a=o.data[wi()];f1(o,a,i,i[Je],t,i[s+1]=p1(e,n),r,s)}}function a1(t,e){return e>=t.expandoStartIndex}function c1(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[wi()],s=a1(t,n);g1(o,r)&&e===null&&!s&&(e=!1),e=u1(i,o,e,r),r1(i,o,e,n,s,r)}}function u1(t,e,n,r){let i=Lx(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=tp(null,t,e,n,r),n=_a(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=tp(i,t,e,n,r),o===null){let u=l1(t,e,r);u!==void 0&&Array.isArray(u)&&(u=tp(null,t,e,u[1],r),u=_a(u,e.attrs,r),d1(t,e,r,u))}else o=h1(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function l1(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ao(r)!==0)return t[yi(r)]}function d1(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[yi(i)]=r}function h1(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=_a(r,s,n)}return _a(r,e.attrs,n)}function tp(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=_a(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function _a(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),tx(t,s,n?!0:e[++o]))}return t===void 0?null:t}function f1(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=n1(l)?qE(u,e,n,i,Ao(l),s):void 0;if(!ul(h)){ul(o)||e1(l)&&(o=qE(u,null,n,i,a,s));let p=Tb(wi(),n);Ak(r,s,p,i,o)}}function qE(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,y=n[i+1];y===Ii&&(y=p?Zt:void 0);let m=p?qf(y,r):h===r?y:void 0;if(l&&!ul(m)&&(m=qf(u,r)),ul(m)&&(a=m,s))return a;let T=t[i+1];i=s?yi(T):Ao(T)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=qf(u,r))}return a}function ul(t){return t!==void 0}function p1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Nt(Aa(t)))),t}function g1(t,e){return(t.flags&(e?8:16))!==0}var zp=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function np(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function m1(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),h=e[o],p=np(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let y=t.at(s),m=e[u],T=np(s,y,u,m,n);if(T!==0){T<0&&t.updateValue(s,m),s--,u--;continue}let N=n(o,l),P=n(s,y),j=n(o,h);if(Object.is(j,P)){let z=n(u,m);Object.is(z,N)?(t.swap(o,s),t.updateValue(s,m),u--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new ll,i??=GE(t,o,s,n),Gp(t,r,o,j))t.updateValue(o,h),o++,s++;else if(i.has(j))r.set(N,t.detach(o)),s--;else{let z=t.create(o,e[o]);t.attach(o,z),o++,s++}}for(;o<=u;)zE(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,y=np(o,h,o,p,n);if(y!==0)y<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new ll,i??=GE(t,o,s,n);let m=n(o,p);if(Gp(t,r,o,m))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(m))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let T=n(o,h);r.set(T,t.detach(o)),s--}}}for(;!l.done;)zE(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function Gp(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function zE(t,e,n,r,i){if(Gp(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function GE(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var ll=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function Ee(t,e){Sa("NgControlFlow");let n=_e(),r=xo(),i=n[r]!==Ii?n[r]:-1,o=i!==-1?dl(n,Xt+i):void 0,s=0;if(bi(n,r,t)){let a=ue(null);try{if(o!==void 0&&Q0(o,s),t!==-1){let u=Xt+t,l=dl(n,u),h=Yp(n[re],u),p=ma(l,h.tView.ssrId),y=Sl(n,h,e,{dehydratedView:p});Ml(l,y,s,fa(h,p))}}finally{ue(a)}}else if(o!==void 0){let a=K0(o,s);a!==void 0&&(a[Ze]=e)}}var Wp=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-yt}};function lD(t){return t}function Fo(t,e){return e}var Kp=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Mn(t,e,n,r,i,o,s,a,u,l,h,p,y){Sa("NgControlFlow");let m=_e(),T=_t(),N=u!==void 0,P=_e(),j=a?s.bind(P[fn][Ze]):s,z=new Kp(N,j);P[Xt+t]=z,Bp(m,T,t+1,e,n,r,i,Co(T.consts,o)),N&&Bp(m,T,t+2,u,l,h,p,Co(T.consts,y))}var Qp=class extends zp{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-yt}at(e){return this.getLView(e)[Ze].$implicit}attach(e,n){let r=n[aa];this.needsIndexUpdate||=e!==this.length,Ml(this.lContainer,n,e,fa(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,y1(this.lContainer,e)}create(e,n){let r=ma(this.lContainer,this.templateTNode.tView.ssrId),i=Sl(this.hostLView,this.templateTNode,new Wp(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Al(e[re],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Ze].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ze].$index=e}getLView(e){return v1(this.lContainer,e)}};function Nn(t){let e=ue(null),n=wi();try{let r=_e(),i=r[re],o=r[n],s=n+1,a=dl(r,s);if(o.liveCollection===void 0){let l=Yp(i,s);o.liveCollection=new Qp(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(m1(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=xo(),h=u.length===0;if(bi(r,l,h)){let p=n+2,y=dl(r,p);if(h){let m=Yp(i,p),T=ma(y,m.tView.ssrId),N=Sl(r,m,void 0,{dehydratedView:T});Ml(y,N,0,fa(m,T))}else Q0(y,0)}}}finally{ue(e)}}function dl(t,e){return t[e]}function y1(t,e){return pa(t,e)}function v1(t,e){return K0(t,e)}function Yp(t,e){return ag(t,e)}function R(t,e,n,r){let i=_e(),o=_t(),s=Xt+t,a=i[Je],u=o.firstCreatePass?X0(s,o,i,e,k0,Nb(),n,r):o.data[s],l=_1(o,i,u,a,e,t);i[s]=l;let h=sg(u);return Ea(u,!0),S0(a,l,u),!F0(u)&&pg()&&Pg(o,i,l,u),(Cx()===0||h)&&Ca(l,i),Tx(),h&&(Ag(o,i,u),_0(o,u,i)),r!==null&&x0(i,u),R}function M(){let t=xt();Pb()?xx():(t=t.parent,Ea(t,!1));let e=t;Rx(e)&&Mx(),Sx();let n=_t();return n.firstCreatePass&&eD(n,e),e.classesWithoutHost!=null&&Gx(e)&&HE(n,e,_e(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Wx(e)&&HE(n,e,_e(),e.stylesWithoutHost,!1),M}function we(t,e,n,r){return R(t,e,n,r),M(),we}var _1=(t,e,n,r,i,o)=>(gg(!0),C0(r,i,$x()));function kt(){return _e()}var hl="en-US";var w1=hl;function I1(t){typeof t=="string"&&(w1=t.toLowerCase().replace(/_/g,"-"))}var E1=(t,e,n)=>{};function be(t,e,n,r){let i=_e(),o=_t(),s=xt();return dD(o,i,i[Je],s,t,e,r),be}function b1(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Ku],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function dD(t,e,n,r,i,o,s){let a=sg(r),l=t.firstCreatePass?Mb(t):null,h=e[Ze],p=Rb(e),y=!0;if(r.type&3||s){let m=Rn(r,e),T=s?s(m):m,N=p.length,P=s?z=>s(Tn(z[r.index])):r.index,j=null;if(!s&&a&&(j=b1(t,e,i,r.index)),j!==null){let z=j.__ngLastListenerFn__||j;z.__ngNextListenerFn__=o,j.__ngLastListenerFn__=o,y=!1}else{o=QE(r,e,h,o),E1(m,i,o);let z=n.listen(T,i,o);p.push(o,z),l&&l.push(i,P,N,N+1)}}else o=QE(r,e,h,o);if(y){let m=r.outputs?.[i],T=r.hostDirectiveOutputs?.[i];if(T&&T.length)for(let N=0;N<T.length;N+=2){let P=T[N],j=T[N+1];WE(r,t,e,P,j,i,o,p,l)}if(m&&m.length)for(let N of m)WE(r,t,e,N,i,i,o,p,l)}}function WE(t,e,n,r,i,o,s,a,u){let l=n[r],p=e.data[r].outputs[i],m=l[p].subscribe(s),T=a.length;a.push(s,m),u&&u.push(o,t.index,T,-(T+1))}function KE(t,e,n,r){let i=ue(null);try{return Re(6,e,n),n(r)!==!1}catch(o){return O0(t,o),!1}finally{Re(7,e,n),ue(i)}}function QE(t,e,n,r){return function i(o){if(o===Function)return r;let s=No(t)?Sn(t.index,e):e;Og(s,5);let a=KE(e,n,r,o),u=i.__ngNextListenerFn__;for(;u;)a=KE(e,n,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function pe(t=1){return Ux(t)}function hD(t,e,n,r){AO(t,e,n,r)}function fD(t){let e=_e(),n=_t(),r=Ob();lg(r+1);let i=Lg(n,r);if(t.dirty&&wx(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=xO(e,r);t.reset(o,mP),t.notifyOnChanges()}return!0}return!1}function pD(){return TO(_e(),Ob())}function O(t,e=""){let n=_e(),r=_t(),i=t+Xt,o=r.firstCreatePass?Vg(r,i,1,e,null):r.data[i],s=D1(r,n,o,e,t);n[i]=s,pg()&&Pg(r,n,s,o),Ea(o,!1)}var D1=(t,e,n,r,i)=>(gg(!0),WP(e[Je],r));function Le(t){return yn("",t,""),Le}function yn(t,e,n){let r=_e(),i=XO(r,t,e,n);return i!==Ii&&C1(r,wi(),i),yn}function C1(t,e,n){let r=Tb(e,t);KP(t[Je],r,n)}function xn(t,e,n){a0(e)&&(e=e());let r=_e(),i=xo();if(bi(r,i,e)){let o=_t(),s=fg();P0(o,s,r,t,e,r[Je],n,!1)}return xn}function ir(t,e){let n=a0(t);return n&&t.set(e),n}function Pn(t,e){let n=_e(),r=_t(),i=xt();return dD(r,n,n[Je],i,t,e),Pn}function T1(t,e,n){let r=_t();if(r.firstCreatePass){let i=Cn(t);Zp(n,r.data,r.blueprint,i,!0),Zp(e,r.data,r.blueprint,i,!1)}}function Zp(t,e,n,r,i){if(t=Ct(t),Array.isArray(t))for(let o=0;o<t.length;o++)Zp(t[o],e,n,r,i);else{let o=_t(),s=_e(),a=xt(),u=bo(t)?t:Ct(t.provide),l=yb(t),h=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if(bo(t)||!t.multi){let m=new gi(l,i,Q),T=ip(u,e,i?h:h+y,p);T===-1?(yp(el(a,s),o,u),rp(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(m),s.push(m)):(n[T]=m,s[T]=m)}else{let m=ip(u,e,h+y,p),T=ip(u,e,h,h+y),N=m>=0&&n[m],P=T>=0&&n[T];if(i&&!P||!i&&!N){yp(el(a,s),o,u);let j=R1(i?A1:S1,n.length,i,r,l);!i&&P&&(n[T].providerFactory=j),rp(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(j),s.push(j)}else{let j=gD(n[i?T:m],l,!i&&r);rp(o,t,m>-1?m:T,j)}!i&&r&&P&&n[T].componentProviders++}}}function rp(t,e,n,r){let i=bo(e),o=ax(e);if(i||o){let u=(o?Ct(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function gD(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ip(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function S1(t,e,n,r){return Jp(this.multi,[])}function A1(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=da(n,n[re],this.providerFactory.index,r);o=a.slice(0,s),Jp(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Jp(i,o);return o}function Jp(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function R1(t,e,n,r,i){let o=new gi(t,n,Q);return o.multi=[],o.index=e,o.componentProviders=0,gD(o,i,r&&!n),o}function xl(t,e=[]){return n=>{n.providersResolver=(r,i)=>T1(r,i?i(t):t,e)}}var Xp=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},$g=(()=>{class t{compileModuleSync(n){return new Up(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=lb(n),o=b0(i.declarations).reduce((s,a)=>{let u=li(a);return u&&s.push(new ya(u)),s},[]);return new Xp(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var M1=(()=>{class t{zone=L(at);changeDetectionScheduler=L(ha);applicationRef=L(Or);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),N1=new G("",{factory:()=>!1});function mD({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new at(oe(V({},vD()),{scheduleInRootZone:n})),[{provide:at,useFactory:t},{provide:Eo,multi:!0,useFactory:()=>{let r=L(M1,{optional:!0});return()=>r.initialize()}},{provide:Eo,multi:!0,useFactory:()=>{let r=L(x1);return()=>{r.initialize()}}},e===!0?{provide:n0,useValue:!0}:[],{provide:r0,useValue:n??t0}]}function yD(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=mD({ngZoneFactory:()=>{let i=vD(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Sa("NgZone_CoalesceEvent"),new at(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return yl([{provide:N1,useValue:!0},{provide:bl,useValue:!1},r])}function vD(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var x1=(()=>{class t{subscription=new je;initialized=!1;zone=L(at);pendingTasks=L(Po);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{at.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{at.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var P1=(()=>{class t{appRef=L(Or);taskService=L(Po);ngZone=L(at);zonelessEnabled=L(bl);tracing=L(Dl,{optional:!0});disableScheduling=L(n0,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(nl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(L(r0,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ep||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?TE:i0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(nl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,TE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function k1(){return typeof $localize<"u"&&$localize.locale||hl}var Hg=new G("",{providedIn:"root",factory:()=>L(Hg,se.Optional|se.SkipSelf)||k1()});var eg=new G(""),O1=new G("");function ta(t){return!t.moduleRef}function F1(t){let e=ta(t)?t.r3Injector:t.moduleRef.injector,n=e.get(at);return n.run(()=>{ta(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Pr,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),ta(t)){let o=()=>e.destroy(),s=t.platformInjector.get(eg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(eg);s.add(o),t.moduleRef.onDestroy(()=>{$u(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return L1(r,n,()=>{let o=e.get(uD);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Hg,hl);if(I1(s||hl),!e.get(O1,!0))return ta(t)?e.get(Or):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(ta(t)){let u=e.get(Or);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return V1(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function V1(t,e){let n=t.injector.get(Or);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new H(-403,!1);e.push(t)}function L1(t,e,n){try{let r=n();return Di(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Hu=null;function j1(t=[],e){return pn.create({name:e,providers:[{provide:vl,useValue:"platform"},{provide:eg,useValue:new Set([()=>Hu=null])},...t]})}function U1(t=[]){if(Hu)return Hu;let e=j1(t);return Hu=e,QO(),B1(e),e}function B1(t){let e=t.get(Ig,null);gn(t,()=>{e?.forEach(n=>n())})}var jr=(()=>{class t{static __NG_ELEMENT_ID__=$1}return t})();function $1(t){return H1(xt(),_e(),(t&16)===16)}function H1(t,e,n){if(No(t)&&!n){let r=Sn(t.index,e);return new mi(r,r)}else if(t.type&175){let r=e[fn];return new mi(r,e)}return null}function _D(t){Re(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=U1(r),o=[mD({}),{provide:ha,useExisting:P1},...n||[]],s=new cl({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return F1({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Re(9)}}function Ci(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function or(t){let e=ue(null);try{return t()}finally{ue(e)}}function Ra(t,e){let n=OI(t);return e?.equal&&(n[jt].equal=e.equal),n}var YE=class{[jt];constructor(e){this[jt]=e}destroy(){this[jt].destroy()}};var ED=null;function sr(){return ED}function bD(t){ED??=t}var Pl=class{};var tn=new G(""),DD=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>L(q1),providedIn:"platform"})}return t})();var q1=(()=>{class t extends DD{_location;_history;_doc=L(tn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return sr().getBaseHref(this._doc)}onPopState(n){let r=sr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=sr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function CD(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function wD(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Ti(t){return t&&t[0]!=="?"?`?${t}`:t}var Vo=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>L(TD),providedIn:"root"})}return t})(),z1=new G(""),TD=(()=>{class t extends Vo{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??L(tn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return CD(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Ti(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Ti(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Ti(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(ae(DD),ae(z1,8))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ma=(()=>{class t{_subject=new Ue;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=K1(wD(ID(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ti(r))}normalize(n){return t.stripTrailingSlash(W1(this._basePath,ID(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ti(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ti(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Ti;static joinWithSlash=CD;static stripTrailingSlash=wD;static \u0275fac=function(r){return new(r||t)(ae(Vo))};static \u0275prov=K({token:t,factory:()=>G1(),providedIn:"root"})}return t})();function G1(){return new Ma(ae(Vo))}function W1(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function ID(t){return t.replace(/\/index.html$/,"")}function K1(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function SD(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var $t=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ei({type:t});static \u0275inj=vi({})}return t})(),AD="browser",Q1="server";function zg(t){return t===Q1}var kl=class{};var Wg=class extends Pl{supportsDOMEvents=!0},Kg=class t extends Wg{static makeCurrent(){bD(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Z1();return n==null?null:J1(n)}resetBaseElement(){Na=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return SD(document.cookie,e)}},Na=null;function Z1(){return Na=Na||document.querySelector("base"),Na?Na.getAttribute("href"):null}function J1(t){return new URL(t,document.baseURI).pathname}var X1=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),Qg=new G(""),kD=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(ae(Qg),ae(at))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),Fl=class{_doc;constructor(e){this._doc=e}manager},Ol="ng-app-id";function RD(t){for(let e of t)e.remove()}function MD(t,e){let n=e.createElement("style");return n.textContent=t,n}function eF(t,e,n,r){let i=t.head?.querySelectorAll(`style[${Ol}="${e}"],link[${Ol}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Ol),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Yg(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var OD=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.isServer=zg(o),eF(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,MD);r?.forEach(i=>this.addUsage(i,this.external,Yg))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(RD(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])RD(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,MD(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Yg(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Ol,this.appId),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(ae(tn),ae(wg),ae(Eg,8),ae(Ta))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),Gg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Jg=/%COMP%/g;var FD="%COMP%",tF=`_nghost-${FD}`,nF=`_ngcontent-${FD}`,rF=!0,iF=new G("",{providedIn:"root",factory:()=>rF});function oF(t){return nF.replace(Jg,t)}function sF(t){return tF.replace(Jg,t)}function VD(t,e){return e.map(n=>n.replace(Jg,t))}var ND=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u,l=null,h=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=zg(a),this.defaultRenderer=new xa(n,s,u,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===An.ShadowDom&&(r=oe(V({},r),{encapsulation:An.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof Vl?i.applyToHost(n):i instanceof Pa&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,y=this.tracingService;switch(r.encapsulation){case An.Emulated:o=new Vl(u,l,r,this.appId,h,s,a,p,y);break;case An.ShadowDom:return new Zg(u,l,n,r,s,a,this.nonce,p,y);default:o=new Pa(u,l,r,h,s,a,p,y);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(ae(kD),ae(OD),ae(wg),ae(iF),ae(tn),ae(Ta),ae(at),ae(Eg),ae(Dl,8))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),xa=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Gg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(xD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(xD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Gg[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Gg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(er.DashCase|er.Important)?e.style.setProperty(n,r,i&er.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&er.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=sr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);let o=this.decoratePreventDefault(r);return this.tracingService!==null&&this.tracingService.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function xD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Zg=class extends xa{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=VD(i.id,h);for(let y of h){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=y,this.shadowRoot.appendChild(m)}let p=i.getExternalStyles?.();if(p)for(let y of p){let m=Yg(y,o);a&&m.setAttribute("nonce",a),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Pa=class extends xa{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?VD(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Vl=class extends Pa{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=oF(h),this.hostAttr=sF(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},aF=(()=>{class t extends Fl{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(ae(tn))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),PD=["alt","control","meta","shift"],cF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},uF={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},lF=(()=>{class t extends Fl{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sr().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),PD.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=cF[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),PD.forEach(s=>{if(s!==i){let a=uF[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(ae(tn))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})();function LD(t,e){return _D(V({rootComponent:t},dF(e)))}function dF(t){return{appProviders:[...mF,...t?.providers??[]],platformProviders:gF}}function hF(){Kg.makeCurrent()}function fF(){return new Pr}function pF(){return p0(document),document}var gF=[{provide:Ta,useValue:AD},{provide:Ig,useValue:hF,multi:!0},{provide:tn,useFactory:pF,deps:[]}];var mF=[{provide:vl,useValue:"root"},{provide:Pr,useFactory:fF,deps:[]},{provide:Qg,useClass:aF,multi:!0,deps:[tn]},{provide:Qg,useClass:lF,multi:!0,deps:[tn]},ND,OD,kD,{provide:So,useExisting:ND},{provide:kl,useClass:X1,deps:[]},[]];var jD=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(ae(tn))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ie="primary",Ka=Symbol("RouteTitle"),rm=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ho(t){return new rm(t)}function vF(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function _F(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!kn(t[n],e[n]))return!1;return!0}function kn(t,e){let n=t?im(t):void 0,r=e?im(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!WD(t[i],e[i]))return!1;return!0}function im(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function WD(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function KD(t){return t.length>0?t[t.length-1]:null}function Ur(t){return Lf(t)?t:Di(t)?Fe(Promise.resolve(t)):Z(t)}var wF={exact:YD,subset:ZD},QD={exact:IF,subset:EF,ignored:()=>!0};function UD(t,e,n){return wF[n.paths](t.root,e.root,n.matrixParams)&&QD[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function IF(t,e){return kn(t,e)}function YD(t,e,n){if(!Ai(t.segments,e.segments)||!Ul(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!YD(t.children[r],e.children[r],n))return!1;return!0}function EF(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>WD(t[n],e[n]))}function ZD(t,e,n){return JD(t,e,e.segments,n)}function JD(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ai(i,n)||e.hasChildren()||!Ul(i,n,r))}else if(t.segments.length===n.length){if(!Ai(t.segments,n)||!Ul(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!ZD(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Ai(t.segments,i)||!Ul(t.segments,i,r)||!t.children[ie]?!1:JD(t.children[ie],e,o,r)}}function Ul(t,e,n){return e.every((r,i)=>QD[n](t[i].parameters,r.parameters))}var cr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new De([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ho(this.queryParams),this._queryParamMap}toString(){return CF.serialize(this)}},De=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Bl(this)}},Si=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ho(this.parameters),this._parameterMap}toString(){return eC(this)}};function bF(t,e){return Ai(t,e)&&t.every((n,r)=>kn(n.parameters,e[r].parameters))}function Ai(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function DF(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ie&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ie&&(n=n.concat(e(i,r)))}),n}var Mm=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>new ja,providedIn:"root"})}return t})(),ja=class{parse(e){let n=new sm(e);return new cr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ka(e.root,!0)}`,r=AF(e.queryParams),i=typeof e.fragment=="string"?`#${TF(e.fragment)}`:"";return`${n}${r}${i}`}},CF=new ja;function Bl(t){return t.segments.map(e=>eC(e)).join("/")}function ka(t,e){if(!t.hasChildren())return Bl(t);if(e){let n=t.children[ie]?ka(t.children[ie],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==ie&&r.push(`${i}:${ka(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=DF(t,(r,i)=>i===ie?[ka(t.children[ie],!1)]:[`${i}:${ka(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ie]!=null?`${Bl(t)}/${n[0]}`:`${Bl(t)}/(${n.join("//")})`}}function XD(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ll(t){return XD(t).replace(/%3B/gi,";")}function TF(t){return encodeURI(t)}function om(t){return XD(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $l(t){return decodeURIComponent(t)}function BD(t){return $l(t.replace(/\+/g,"%20"))}function eC(t){return`${om(t.path)}${SF(t.parameters)}`}function SF(t){return Object.entries(t).map(([e,n])=>`;${om(e)}=${om(n)}`).join("")}function AF(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ll(n)}=${Ll(i)}`).join("&"):`${Ll(n)}=${Ll(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var RF=/^[^\/()?;#]+/;function Xg(t){let e=t.match(RF);return e?e[0]:""}var MF=/^[^\/()?;=#]+/;function NF(t){let e=t.match(MF);return e?e[0]:""}var xF=/^[^=?&#]+/;function PF(t){let e=t.match(xF);return e?e[0]:""}var kF=/^[^&#]+/;function OF(t){let e=t.match(kF);return e?e[0]:""}var sm=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ie]=new De(e,n)),r}parseSegment(){let e=Xg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new Si($l(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=NF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Xg(this.remaining);i&&(r=i,this.capture(r))}e[$l(n)]=$l(r)}parseQueryParam(e){let n=PF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=OF(this.remaining);s&&(r=s,this.capture(r))}let i=BD(n),o=BD(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Xg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new H(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ie);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[ie]:new De([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}};function tC(t){return t.segments.length>0?new De([],{[ie]:t}):t}function nC(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=nC(i);if(r===ie&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new De(t.segments,e);return FF(n)}function FF(t){if(t.numberOfChildren===1&&t.children[ie]){let e=t.children[ie];return new De(t.segments.concat(e.segments),e.children)}return t}function Ri(t){return t instanceof cr}function VF(t,e,n=null,r=null){let i=rC(t);return iC(i,e,n,r)}function rC(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new De(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=tC(r);return e??i}function iC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return em(i,i,i,n,r);let o=LF(e);if(o.toRoot())return em(i,i,new De([],{}),n,r);let s=jF(o,i,t),a=s.processChildren?Fa(s.segmentGroup,s.index,o.commands):sC(s.segmentGroup,s.index,o.commands);return em(i,s.segmentGroup,a,n,r)}function Hl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ua(t){return typeof t=="object"&&t!=null&&t.outlets}function em(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=oC(t,e,n);let a=tC(nC(s));return new cr(a,o,i)}function oC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=oC(o,e,n)}),new De(t.segments,r)}var ql=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Hl(r[0]))throw new H(4003,!1);let i=r.find(Ua);if(i&&i!==KD(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function LF(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new ql(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new ql(n,e,r)}var Uo=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function jF(t,e,n){if(t.isAbsolute)return new Uo(e,!0,0);if(!n)return new Uo(e,!1,NaN);if(n.parent===null)return new Uo(n,!0,0);let r=Hl(t.commands[0])?0:1,i=n.segments.length-1+r;return UF(n,i,t.numberOfDoubleDots)}function UF(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new Uo(r,!1,i-o)}function BF(t){return Ua(t[0])?t[0].outlets:{[ie]:t}}function sC(t,e,n){if(t??=new De([],{}),t.segments.length===0&&t.hasChildren())return Fa(t,e,n);let r=$F(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new De(t.segments.slice(0,r.pathIndex),{});return o.children[ie]=new De(t.segments.slice(r.pathIndex),t.children),Fa(o,0,i)}else return r.match&&i.length===0?new De(t.segments,{}):r.match&&!t.hasChildren()?am(t,e,n):r.match?Fa(t,0,i):am(t,e,n)}function Fa(t,e,n){if(n.length===0)return new De(t.segments,{});{let r=BF(n),i={};if(Object.keys(r).some(o=>o!==ie)&&t.children[ie]&&t.numberOfChildren===1&&t.children[ie].segments.length===0){let o=Fa(t.children[ie],e,n);return new De(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=sC(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new De(t.segments,i)}}function $F(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Ua(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!HD(u,l,s))return o;r+=2}else{if(!HD(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function am(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Ua(o)){let u=HF(o.outlets);return new De(r,u)}if(i===0&&Hl(n[0])){let u=t.segments[e];r.push(new Si(u.path,$D(n[0]))),i++;continue}let s=Ua(o)?o.outlets[ie]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Hl(a)?(r.push(new Si(s,$D(a))),i+=2):(r.push(new Si(s,{})),i++)}return new De(r,{})}function HF(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=am(new De([],{}),0,r))}),e}function $D(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function HD(t,e,n){return t==n.path&&kn(e,n.parameters)}var Va="imperative",ut=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ut||{}),nn=class{id;url;constructor(e,n){this.id=e,this.url=n}},Ba=class extends nn{type=ut.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ur=class extends nn{urlAfterRedirects;type=ut.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},qt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(qt||{}),cm=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(cm||{}),ar=class extends nn{reason;code;type=ut.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Mi=class extends nn{reason;code;type=ut.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},$a=class extends nn{error;target;type=ut.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},zl=class extends nn{urlAfterRedirects;state;type=ut.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},um=class extends nn{urlAfterRedirects;state;type=ut.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lm=class extends nn{urlAfterRedirects;state;shouldActivate;type=ut.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},dm=class extends nn{urlAfterRedirects;state;type=ut.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hm=class extends nn{urlAfterRedirects;state;type=ut.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fm=class{route;type=ut.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},pm=class{route;type=ut.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},gm=class{snapshot;type=ut.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mm=class{snapshot;type=ut.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ym=class{snapshot;type=ut.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vm=class{snapshot;type=ut.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ha=class{},qo=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function qF(t,e){return t.providers&&!t._injector&&(t._injector=jg(t.providers,e,`Route: ${t.path}`)),t._injector??e}function vn(t){return t.outlet||ie}function zF(t,e){let n=t.filter(r=>vn(r)===e);return n.push(...t.filter(r=>vn(r)!==e)),n}function Qa(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var _m=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Qa(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Jl(this.rootInjector)}},Jl=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new _m(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(ae(Jt))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Gl=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=wm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=wm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Im(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Im(e,this._root).map(n=>n.value)}};function wm(t,e){if(t===e.value)return e;for(let n of e.children){let r=wm(t,n);if(r)return r}return null}function Im(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Im(t,n);if(r.length)return r.unshift(e),r}return[]}var Ht=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function jo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Wl=class extends Gl{snapshot;constructor(e,n){super(e),this.snapshot=n,Nm(this,e)}toString(){return this.snapshot.toString()}};function aC(t){let e=GF(t),n=new Be([new Si("",{})]),r=new Be({}),i=new Be({}),o=new Be({}),s=new Be(""),a=new lr(n,r,o,s,i,ie,t,e.root);return a.snapshot=e.root,new Wl(new Ht(a,[]),e)}function GF(t){let e={},n={},r={},i="",o=new Bo([],e,r,i,n,ie,t,null,{});return new Ql("",new Ht(o,[]))}var lr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(he(l=>l[Ka]))??Z(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(he(e=>Ho(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(he(e=>Ho(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Kl(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),t.params),data:V(V({},e.data),t.data),resolve:V(V(V(V({},t.data),e.data),i?.data),t._resolvedData)}:r={params:V({},t.params),data:V({},t.data),resolve:V(V({},t.data),t._resolvedData??{})},i&&uC(i)&&(r.resolve[Ka]=i.title),r}var Bo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ka]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ho(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ho(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ql=class extends Gl{url;constructor(e,n){super(n),this.url=e,Nm(this,n)}toString(){return cC(this._root)}};function Nm(t,e){e.value._routerState=t,e.children.forEach(n=>Nm(t,n))}function cC(t){let e=t.children.length>0?` { ${t.children.map(cC).join(", ")} } `:"";return`${t.value}${e}`}function tm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,kn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),kn(e.params,n.params)||t.paramsSubject.next(n.params),_F(e.url,n.url)||t.urlSubject.next(n.url),kn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Em(t,e){let n=kn(t.params,e.params)&&bF(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Em(t.parent,e.parent))}function uC(t){return typeof t.title=="string"||t.title===null}var WF=new G(""),xm=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ie;activateEvents=new Ye;deactivateEvents=new Ye;attachEvents=new Ye;detachEvents=new Ye;routerOutletData=s0(void 0);parentContexts=L(Jl);location=L(Oo);changeDetector=L(jr);inputBinder=L(Pm,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new bm(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Pt({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[_i]})}return t})(),bm=class t{route;childContexts;parent;outletData;__ngOutletInjector(e){return new t(this.route,this.childContexts,e,this.outletData)}constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===lr?this.route:e===Jl?this.childContexts:e===WF?this.outletData:this.parent.get(e,n)}},Pm=new G("");function KF(t,e,n){let r=qa(t,e._root,n?n._root:void 0);return new Wl(r,e)}function qa(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=QF(t,e,n);return new Ht(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>qa(t,a)),s}}let r=YF(e.value),i=e.children.map(o=>qa(t,o));return new Ht(r,i)}}function QF(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return qa(t,r,i);return qa(t,r)})}function YF(t){return new lr(new Be(t.url),new Be(t.params),new Be(t.queryParams),new Be(t.fragment),new Be(t.data),t.outlet,t.component,t)}var za=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},lC="ngNavigationCancelingError";function Yl(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Ri(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=dC(!1,qt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function dC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[lC]=!0,n.cancellationCode=e,n}function ZF(t){return hC(t)&&Ri(t.url)}function hC(t){return!!t&&t[lC]}var JF=(t,e,n,r)=>he(i=>(new Dm(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Dm=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),tm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=jo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=jo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=jo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=jo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new vm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new mm(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(tm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),tm(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Zl=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},$o=class{component;route;constructor(e,n){this.component=e,this.route=n}};function XF(t,e,n){let r=t._root,i=e?e._root:null;return Oa(r,i,n,[r.value])}function eV(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Wo(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!tb(t)?t:e.get(t):r}function Oa(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=jo(e);return t.children.forEach(s=>{tV(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>La(a,n.getContext(s),i)),i}function tV(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=nV(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Zl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Oa(t,e,a?a.children:null,r,i):Oa(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new $o(a.outlet.component,s))}else s&&La(e,a,i),i.canActivateChecks.push(new Zl(r)),o.component?Oa(t,null,a?a.children:null,r,i):Oa(t,null,n,r,i);return i}function nV(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ai(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ai(t.url,e.url)||!kn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Em(t,e)||!kn(t.queryParams,e.queryParams);case"paramsChange":default:return!Em(t,e)}}function La(t,e,n){let r=jo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?La(s,e.children.getContext(o),n):La(s,null,n):La(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new $o(e.outlet.component,i)):n.canDeactivateChecks.push(new $o(null,i)):n.canDeactivateChecks.push(new $o(null,i))}function Ya(t){return typeof t=="function"}function rV(t){return typeof t=="boolean"}function iV(t){return t&&Ya(t.canLoad)}function oV(t){return t&&Ya(t.canActivate)}function sV(t){return t&&Ya(t.canActivateChild)}function aV(t){return t&&Ya(t.canDeactivate)}function cV(t){return t&&Ya(t.canMatch)}function fC(t){return t instanceof Qn||t?.name==="EmptyError"}var jl=Symbol("INITIAL_VALUE");function zo(){return ln(t=>Pu(t.map(e=>e.pipe(Yn(1),$f(jl)))).pipe(he(e=>{for(let n of e)if(n!==!0){if(n===jl)return jl;if(n===!1||uV(n))return n}return!0}),un(e=>e!==jl),Yn(1)))}function uV(t){return Ri(t)||t instanceof za}function lV(t,e){return Qe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?Z(oe(V({},n),{guardsResult:!0})):dV(s,r,i,t).pipe(Qe(a=>a&&rV(a)?hV(r,o,t,e):Z(a)),he(a=>oe(V({},n),{guardsResult:a})))})}function dV(t,e,n,r){return Fe(t).pipe(Qe(i=>yV(i.component,i.route,n,e,r)),Zn(i=>i!==!0,!0))}function hV(t,e,n,r){return Fe(e).pipe(po(i=>fo(pV(i.route.parent,r),fV(i.route,r),mV(t,i.path,n),gV(t,i.route,n))),Zn(i=>i!==!0,!0))}function fV(t,e){return t!==null&&e&&e(new ym(t)),Z(!0)}function pV(t,e){return t!==null&&e&&e(new gm(t)),Z(!0)}function gV(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>ku(()=>{let s=Qa(e)??n,a=Wo(o,s),u=oV(a)?a.canActivate(e,t):gn(s,()=>a(e,t));return Ur(u).pipe(Zn())}));return Z(i).pipe(zo())}function mV(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>eV(s)).filter(s=>s!==null).map(s=>ku(()=>{let a=s.guards.map(u=>{let l=Qa(s.node)??n,h=Wo(u,l),p=sV(h)?h.canActivateChild(r,t):gn(l,()=>h(r,t));return Ur(p).pipe(Zn())});return Z(a).pipe(zo())}));return Z(o).pipe(zo())}function yV(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let u=Qa(e)??i,l=Wo(a,u),h=aV(l)?l.canDeactivate(t,e,n,r):gn(u,()=>l(t,e,n,r));return Ur(h).pipe(Zn())});return Z(s).pipe(zo())}function vV(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=Wo(s,t),u=iV(a)?a.canLoad(e,n):gn(t,()=>a(e,n));return Ur(u)});return Z(o).pipe(zo(),pC(r))}function pC(t){return Pf(st(e=>{if(typeof e!="boolean")throw Yl(t,e)}),he(e=>e===!0))}function _V(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=Wo(s,t),u=cV(a)?a.canMatch(e,n):gn(t,()=>a(e,n));return Ur(u)});return Z(o).pipe(zo(),pC(r))}var Ga=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Wa=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Lo(t){return lo(new Ga(t))}function wV(t){return lo(new H(4e3,!1))}function IV(t){return lo(dC(!1,qt.GuardRejected))}var Cm=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[ie])return wV(`${e.redirectTo}`);i=i.children[ie]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:y,params:m,data:T,title:N}=i,P=gn(o,()=>a({params:m,data:T,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:y,title:N}));if(P instanceof cr)throw new Wa(P);n=P}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Wa(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new cr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new De(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Tm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function EV(t,e,n,r,i){let o=gC(t,e,n);return o.matched?(r=qF(e,r),_V(r,e,n,i).pipe(he(s=>s===!0?o:V({},Tm)))):Z(o)}function gC(t,e,n){if(e.path==="**")return bV(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?V({},Tm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||vF)(n,t,e);if(!i)return V({},Tm);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function bV(t){return{matched:!0,parameters:t.length>0?KD(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function qD(t,e,n,r){return n.length>0&&TV(t,n,r)?{segmentGroup:new De(e,CV(r,new De(n,t.children))),slicedSegments:[]}:n.length===0&&SV(t,n,r)?{segmentGroup:new De(t.segments,DV(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new De(t.segments,t.children),slicedSegments:n}}function DV(t,e,n,r){let i={};for(let o of n)if(Xl(t,e,o)&&!r[vn(o)]){let s=new De([],{});i[vn(o)]=s}return V(V({},r),i)}function CV(t,e){let n={};n[ie]=e;for(let r of t)if(r.path===""&&vn(r)!==ie){let i=new De([],{});n[vn(r)]=i}return n}function TV(t,e,n){return n.some(r=>Xl(t,e,r)&&vn(r)!==ie)}function SV(t,e,n){return n.some(r=>Xl(t,e,r))}function Xl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function AV(t,e,n){return e.length===0&&!t.children[n]}var Sm=class{};function RV(t,e,n,r,i,o,s="emptyOnly"){return new Am(t,e,n,r,i,s,o).recognize()}var MV=31,Am=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Cm(this.urlSerializer,this.urlTree)}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}recognize(){let e=qD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(he(({children:n,rootSnapshot:r})=>{let i=new Ht(r,n),o=new Ql("",i),s=VF(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Bo([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ie,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ie,n).pipe(he(r=>({children:r,rootSnapshot:n})),Ar(r=>{if(r instanceof Wa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ga?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(he(s=>s instanceof Ht?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Fe(o).pipe(po(s=>{let a=r.children[s],u=zF(n,s);return this.processSegmentGroup(e,u,a,s,i)}),Bf((s,a)=>(s.push(...a),s)),Rr(null),Uf(),Qe(s=>{if(s===null)return Lo(r);let a=mC(s);return NV(a),Z(a)}))}processSegment(e,n,r,i,o,s,a){return Fe(n).pipe(po(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Ar(l=>{if(l instanceof Ga)return Z(null);throw l}))),Zn(u=>!!u),Ar(u=>{if(fC(u))return AV(r,i,o)?Z(new Sm):Lo(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return vn(r)!==s&&(s===ie||!Xl(i,o,r))?Lo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Lo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:y}=gC(n,i,o);if(!u)return Lo(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>MV&&(this.allowRedirects=!1));let m=new Bo(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,zD(i),vn(i),i.component??i._loadedComponent??null,i,GD(i)),T=Kl(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(T.params),m.data=Object.freeze(T.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,m,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(Qe(P=>this.processSegment(e,r,n,P.concat(y),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=EV(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(ln(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ln(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:y,remainingSegments:m}=u,T=new Bo(y,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,zD(r),vn(r),r.component??r._loadedComponent??null,r,GD(r)),N=Kl(T,s,this.paramsInheritanceStrategy);T.params=Object.freeze(N.params),T.data=Object.freeze(N.data);let{segmentGroup:P,slicedSegments:j}=qD(n,y,m,l);if(j.length===0&&P.hasChildren())return this.processChildren(h,l,P,T).pipe(he(ne=>new Ht(T,ne)));if(l.length===0&&j.length===0)return Z(new Ht(T,[]));let z=vn(r)===o;return this.processSegment(h,l,P,j,z?ie:o,!0,T).pipe(he(ne=>new Ht(T,ne instanceof Ht?[ne]:[])))}))):Lo(n)))}getChildConfig(e,n,r){return n.children?Z({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Z({routes:n._loadedRoutes,injector:n._loadedInjector}):vV(e,n,r,this.urlSerializer).pipe(Qe(i=>i?this.configLoader.loadChildren(e,n).pipe(st(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):IV(n))):Z({routes:[],injector:e})}};function NV(t){t.sort((e,n)=>e.value.outlet===ie?-1:n.value.outlet===ie?1:e.value.outlet.localeCompare(n.value.outlet))}function xV(t){let e=t.value.routeConfig;return e&&e.path===""}function mC(t){let e=[],n=new Set;for(let r of t){if(!xV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=mC(r.children);e.push(new Ht(r.value,i))}return e.filter(r=>!n.has(r))}function zD(t){return t.data||{}}function GD(t){return t.resolve||{}}function PV(t,e,n,r,i,o){return Qe(s=>RV(t,e,n,r,s.extractedUrl,i,o).pipe(he(({state:a,tree:u})=>oe(V({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function kV(t,e){return Qe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Z(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of yC(u))s.add(l);let a=0;return Fe(s).pipe(po(u=>o.has(u)?OV(u,r,t,e):(u.data=Kl(u,u.parent,t).resolve,Z(void 0))),st(()=>a++),go(1),Qe(u=>a===s.size?Z(n):Rt))})}function yC(t){let e=t.children.map(n=>yC(n)).flat();return[t,...e]}function OV(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!uC(i)&&(o[Ka]=i.title),FV(o,t,e,r).pipe(he(s=>(t._resolvedData=s,t.data=Kl(t,t.parent,n).resolve,null)))}function FV(t,e,n,r){let i=im(t);if(i.length===0)return Z({});let o={};return Fe(i).pipe(Qe(s=>VV(t[s],e,n,r).pipe(Zn(),st(a=>{if(a instanceof za)throw Yl(new ja,a);o[s]=a}))),go(1),he(()=>o),Ar(s=>fC(s)?Rt:lo(s)))}function VV(t,e,n,r){let i=Qa(e)??r,o=Wo(t,i),s=o.resolve?o.resolve(e,n):gn(i,()=>o(e,n));return Ur(s)}function nm(t){return ln(e=>{let n=t(e);return n?Fe(n).pipe(he(()=>e)):Z(e)})}var vC=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ie);return r}getResolvedTitleForRoute(n){return n.data[Ka]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>L(LV),providedIn:"root"})}return t})(),LV=(()=>{class t extends vC{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(ae(jD))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),km=new G("",{providedIn:"root",factory:()=>({})}),jV=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=He({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&we(0,"router-outlet")},dependencies:[xm],encapsulation:2})}return t})();function Om(t){let e=t.children&&t.children.map(Om),n=e?oe(V({},t),{children:e}):V({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ie&&(n.component=jV),n}var Fm=new G(""),UV=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=L($g);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Z(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Ur(n.loadComponent()).pipe(he(_C),st(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),ea(()=>{this.componentLoaders.delete(n)})),i=new uo(r,()=>new Ue).pipe(co());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=BV(r,this.compiler,n,this.onLoadEndListener).pipe(ea(()=>{this.childrenLoaders.delete(r)})),s=new uo(o,()=>new Ue).pipe(co());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function BV(t,e,n,r){return Ur(t.loadChildren()).pipe(he(_C),Qe(i=>i instanceof va||Array.isArray(i)?Z(i):Fe(e.compileModuleAsync(i))),he(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Fm,[],{optional:!0,self:!0}).flat()),{routes:s.map(Om),injector:o}}))}function $V(t){return t&&typeof t=="object"&&"default"in t}function _C(t){return $V(t)?t.default:t}var Vm=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>L(HV),providedIn:"root"})}return t})(),HV=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),qV=new G("");var zV=new G(""),GV=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ue;transitionAbortSubject=new Ue;configLoader=L(UV);environmentInjector=L(Jt);destroyRef=L(El);urlSerializer=L(Mm);rootContexts=L(Jl);location=L(Ma);inputBindingEnabled=L(Pm,{optional:!0})!==null;titleStrategy=L(vC);options=L(km,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=L(Vm);createViewTransition=L(qV,{optional:!0});navigationErrorHandler=L(zV,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Z(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new fm(i)),r=i=>this.events.next(new pm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(oe(V(V({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new Be({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Va,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(un(o=>o.id!==0),he(o=>oe(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ln(o=>{let s=!1,a=!1;return Z(o).pipe(ln(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",qt.SupersededByNewNavigation),Rt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?oe(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Mi(u.id,this.urlSerializer.serialize(u.rawUrl),p,cm.IgnoredSameUrlNavigation)),u.resolve(!1),Rt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Z(u).pipe(ln(p=>{let y=this.transitions?.getValue();return this.events.next(new Ba(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),y!==this.transitions?.getValue()?Rt:Promise.resolve(p)}),PV(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),st(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=oe(V({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let y=new zl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(y)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:y,source:m,restoredState:T,extras:N}=u,P=new Ba(p,this.urlSerializer.serialize(y),m,T);this.events.next(P);let j=aC(this.rootComponentType).snapshot;return this.currentTransition=o=oe(V({},u),{targetSnapshot:j,urlAfterRedirects:y,extras:oe(V({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,Z(o)}else{let p="";return this.events.next(new Mi(u.id,this.urlSerializer.serialize(u.extractedUrl),p,cm.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Rt}}),st(u=>{let l=new um(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),he(u=>(this.currentTransition=o=oe(V({},u),{guards:XF(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),lV(this.environmentInjector,u=>this.events.next(u)),st(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Yl(this.urlSerializer,u.guardsResult);let l=new lm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),un(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",qt.GuardRejected),!1)),nm(u=>{if(u.guards.canActivateChecks.length)return Z(u).pipe(st(l=>{let h=new dm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),ln(l=>{let h=!1;return Z(l).pipe(kV(this.paramsInheritanceStrategy,this.environmentInjector),st({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",qt.NoDataFromResolver)}}))}),st(l=>{let h=new hm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),nm(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(st(y=>{h.component=y}),he(()=>{})));for(let y of h.children)p.push(...l(y));return p};return Pu(l(u.targetSnapshot.root)).pipe(Rr(null),Yn(1))}),nm(()=>this.afterPreactivation()),ln(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Fe(h).pipe(he(()=>o)):Z(o)}),he(u=>{let l=KF(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=oe(V({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),st(()=>{this.events.next(new Ha)}),JF(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Yn(1),st({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ur(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),Hf(this.transitionAbortSubject.pipe(st(u=>{throw u}))),ea(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",qt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ar(u=>{if(this.destroyed)return o.resolve(!1),Rt;if(a=!0,hC(u))this.events.next(new ar(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),ZF(u)?this.events.next(new qo(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new $a(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=gn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof za){let{message:p,cancellationCode:y}=Yl(this.urlSerializer,h);this.events.next(new ar(o.id,this.urlSerializer.serialize(o.extractedUrl),p,y)),this.events.next(new qo(h.redirectTo,h.navigationBehaviorOptions))}else throw this.events.next(l),u}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Rt}))}))}cancelNavigationTransition(n,r,i){let o=new ar(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function WV(t){return t!==Va}var KV=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>L(QV),providedIn:"root"})}return t})(),Rm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},QV=(()=>{class t extends Rm{static \u0275fac=(()=>{let n;return function(i){return(n||(n=ba(t)))(i||t)}})();static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),wC=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>L(YV),providedIn:"root"})}return t})(),YV=(()=>{class t extends wC{location=L(Ma);urlSerializer=L(Mm);options=L(km,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=L(Vm);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new cr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=aC(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Ba)this.stateMemento=this.createStateMemento();else if(n instanceof Mi)this.rawUrlTree=r.initialUrl;else if(n instanceof zl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof Ha?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof ar&&(n.code===qt.GuardRejected||n.code===qt.NoDataFromResolver)?this.restoreHistory(r):n instanceof $a?this.restoreHistory(r,!0):n instanceof ur&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof cr?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=V(V({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&o===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=ba(t)))(i||t)}})();static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ZV(t,e){t.events.pipe(un(n=>n instanceof ur||n instanceof ar||n instanceof $a||n instanceof Mi),he(n=>n instanceof ur||n instanceof Mi?0:(n instanceof ar?n.code===qt.Redirect||n.code===qt.SupersededByNewNavigation:!1)?2:1),un(n=>n!==2),Yn(1)).subscribe(()=>{e()})}var JV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},XV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},et=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=L(Ug);stateManager=L(wC);options=L(km,{optional:!0})||{};pendingTasks=L(Po);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=L(GV);urlSerializer=L(Mm);location=L(Ma);urlHandlingStrategy=L(Vm);_events=new Ue;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=L(KV);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=L(Fm,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!L(Pm,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new je;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ar&&r.code!==qt.Redirect&&r.code!==qt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ur)this.navigated=!0;else if(r instanceof qo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||WV(i.source)},s);this.scheduleNavigation(a,Va,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}tL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Va,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=V({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Om),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=rC(y)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return iC(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Ri(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Va,null,r)}navigate(n,r={skipLocationChange:!1}){return eL(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=V({},JV):r===!1?i=V({},XV):i=r,Ri(n))return UD(this.currentUrlTree,n,i);let o=this.parseUrl(n);return UD(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,y)=>{a=p,u=y});let h=this.pendingTasks.add();return ZV(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function eL(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new H(4008,!1)}function tL(t){return!(t instanceof Ha)&&!(t instanceof qo)}var Go=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ue;constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof ur&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ri(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.href=n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;let r=this.href===null?null:I0(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Ri(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(Q(et),Q(lr),yg("tabindex"),Q(Fr),Q(en),Q(Vo))};static \u0275dir=Pt({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&be("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Nl("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ci],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ci],replaceUrl:[2,"replaceUrl","replaceUrl",Ci],routerLink:"routerLink"},features:[_i]})}return t})(),IC=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Ye;constructor(n,r,i,o,s){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof ur&&this.update()})}ngAfterContentInit(){Z(this.links.changes,Z(null)).pipe(ho()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Fe(n).pipe(ho()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=nL(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?n.isActive(o,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(Q(et),Q(en),Q(Fr),Q(jr),Q(Go,8))};static \u0275dir=Pt({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&hD(o,Go,5),r&2){let s;fD(s=pD())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[_i]})}return t})();function nL(t){return!!t.paths}var rL=new G("");function EC(t,...e){return yl([{provide:Fm,multi:!0,useValue:t},[],{provide:lr,useFactory:iL,deps:[et]},{provide:Bg,multi:!0,useFactory:oL},e.map(n=>n.\u0275providers)])}function iL(t){return t.routerState.root}function oL(){let t=L(pn);return e=>{let n=t.get(Or);if(e!==n.components[0])return;let r=t.get(et),i=t.get(sL);t.get(aL)===1&&r.initialNavigation(),t.get(cL,null,se.Optional)?.setUpPreloading(),t.get(rL,null,se.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var sL=new G("",{factory:()=>new Ue}),aL=new G("",{providedIn:"root",factory:()=>1});var cL=new G("");var ed=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=He({type:t,selectors:[["app-not-found"]],decls:7,vars:0,consts:[[1,"flex","flex-col","items-center","justify-center","h-screen"],[1,"text-9xl","font-bold","text-error"],[1,"mt-4","text-xl","text-base-content"],["routerLink","",1,"mt-6","btn","btn-primary"]],template:function(n,r){n&1&&(R(0,"div",0)(1,"h1",1),O(2,"404"),M(),R(3,"p",2),O(4,"Sorry, this page does not exist."),M(),R(5,"a",3),O(6,"Return Home"),M()())},dependencies:[Go],encapsulation:2})};var td=class t{constructor(e){this.router=e}title="AI in Art: Ethics Survey";description="Exploring the boundaries between artificial intelligence and human creativity";startSurvey(){this.router.navigate(["/email-check"])}goToAdminLogin(){this.router.navigate(["/admin-login"])}static \u0275fac=function(n){return new(n||t)(Q(et))};static \u0275cmp=He({type:t,selectors:[["app-home"]],decls:30,vars:2,consts:[[1,"hero","min-h-screen","bg-base-200","px-4"],[1,"hero-content","text-center"],[1,"max-w-2xl"],[1,"text-4xl","md:text-5xl","font-bold","mb-8"],[1,"text-lg","md:text-xl","mb-8"],[1,"card","bg-base-100","shadow-xl","mb-8"],[1,"card-body","p-4","md:p-8"],[1,"card-title","text-2xl","mb-4"],[1,"text-left","space-y-4","mb-6"],[1,"flex","items-start"],[1,"badge","badge-primary","mr-2"],[1,"text-sm","opacity-75","mb-6"],[1,"btn","btn-primary","btn-lg","gap-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"]],template:function(n,r){n&1&&(R(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),O(4),M(),R(5,"p",4),O(6),M(),R(7,"div",5)(8,"div",6)(9,"h2",7),O(10," Key Questions We're Exploring: "),M(),R(11,"ul",8)(12,"li",9)(13,"span",10),O(14,"1"),M(),O(15," How does AI-generated inspiration compare to traditional artistic references? "),M(),R(16,"li",9)(17,"span",10),O(18,"2"),M(),O(19," When AI contributes to artistic success, does it enhance creativity or diminish authentic expression? "),M(),R(20,"li",9)(21,"span",10),O(22,"3"),M(),O(23," Where should we draw the line between AI as a creative tool and AI as a co-creator? "),M()(),R(24,"p",11),O(25," Your participation in this survey will help shape our understanding of AI's role in creative processes and inform ethical guidelines for its use in artistic endeavors. "),M()()(),R(26,"button",12),be("click",function(){return r.startSurvey()}),O(27," Take the Survey "),ct(),R(28,"svg",13),we(29,"path",14),M()()()()()),n&2&&(U(4),Le(r.title),U(2),Le(r.description))},encapsulation:2})};var MC=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(Q(Fr),Q(en))};static \u0275dir=Pt({type:t})}return t})(),uL=(()=>{class t extends MC{static \u0275fac=(()=>{let n;return function(i){return(n||(n=ba(t)))(i||t)}})();static \u0275dir=Pt({type:t,features:[Vr]})}return t})(),NC=new G("");var lL={provide:NC,useExisting:Ro(()=>$r),multi:!0};function dL(){let t=sr()?sr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var hL=new G(""),$r=(()=>{class t extends MC{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!dL())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(Q(Fr),Q(en),Q(hL,8))};static \u0275dir=Pt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&be("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[xl([lL]),Vr]})}return t})();var xC=new G(""),PC=new G("");function kC(t){return t!=null}function OC(t){return Di(t)?Fe(t):t}function FC(t){let e={};return t.forEach(n=>{e=n!=null?V(V({},e),n):e}),Object.keys(e).length===0?null:e}function VC(t,e){return e.map(n=>n(t))}function fL(t){return!t.validate}function LC(t){return t.map(e=>fL(e)?e:n=>e.validate(n))}function pL(t){if(!t)return null;let e=t.filter(kC);return e.length==0?null:function(n){return FC(VC(n,e))}}function jm(t){return t!=null?pL(LC(t)):null}function gL(t){if(!t)return null;let e=t.filter(kC);return e.length==0?null:function(n){let r=VC(n,e).map(OC);return jf(r).pipe(he(FC))}}function Um(t){return t!=null?gL(LC(t)):null}function bC(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function mL(t){return t._rawValidators}function yL(t){return t._rawAsyncValidators}function Lm(t){return t?Array.isArray(t)?t:[t]:[]}function rd(t,e){return Array.isArray(t)?t.includes(e):t===e}function DC(t,e){let n=Lm(e);return Lm(t).forEach(i=>{rd(n,i)||n.push(i)}),n}function CC(t,e){return Lm(e).filter(n=>!rd(t,n))}var id=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=jm(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Um(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Yo=class extends id{name;get formDirective(){return null}get path(){return null}},nc=class extends id{_parent=null;name=null;valueAccessor=null},od=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},vL={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},O8=oe(V({},vL),{"[class.ng-submitted]":"isSubmitted"}),Jo=(()=>{class t extends od{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(Q(nc,2))};static \u0275dir=Pt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Lr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Vr]})}return t})(),ud=(()=>{class t extends od{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(Q(Yo,10))};static \u0275dir=Pt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Lr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Vr]})}return t})();var Za="VALID",nd="INVALID",Ko="PENDING",Ja="DISABLED",Zo=class{},sd=class extends Zo{value;source;constructor(e,n){super(),this.value=e,this.source=n}},ec=class extends Zo{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},tc=class extends Zo{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},Qo=class extends Zo{status;source;constructor(e,n){super(),this.status=e,this.source=n}};function jC(t){return(ld(t)?t.validators:t)||null}function _L(t){return Array.isArray(t)?jm(t):t||null}function UC(t,e){return(ld(e)?e.asyncValidators:t)||null}function wL(t){return Array.isArray(t)?Um(t):t||null}function ld(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function IL(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new H(1e3,"");if(!r[n])throw new H(1001,"")}function EL(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new H(1002,"")})}var ad=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return or(this.statusReactive)}set status(e){or(()=>this.statusReactive.set(e))}_status=Ra(()=>this.statusReactive());statusReactive=Da(void 0);get valid(){return this.status===Za}get invalid(){return this.status===nd}get pending(){return this.status==Ko}get disabled(){return this.status===Ja}get enabled(){return this.status!==Ja}errors;get pristine(){return or(this.pristineReactive)}set pristine(e){or(()=>this.pristineReactive.set(e))}_pristine=Ra(()=>this.pristineReactive());pristineReactive=Da(!0);get dirty(){return!this.pristine}get touched(){return or(this.touchedReactive)}set touched(e){or(()=>this.touchedReactive.set(e))}_touched=Ra(()=>this.touchedReactive());touchedReactive=Da(!1);get untouched(){return!this.touched}_events=new Ue;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(DC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(DC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(CC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(CC(e,this._rawAsyncValidators))}hasValidator(e){return rd(this._rawValidators,e)}hasAsyncValidator(e){return rd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(oe(V({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new tc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new tc(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(oe(V({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new ec(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new ec(!0,r))}markAsPending(e={}){this.status=Ko;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Qo(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(oe(V({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ja,this.errors=null,this._forEachChild(i=>{i.disable(oe(V({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sd(this.value,r)),this._events.next(new Qo(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(oe(V({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Za,this._forEachChild(r=>{r.enable(oe(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(oe(V({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Za||this.status===Ko)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sd(this.value,n)),this._events.next(new Qo(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(oe(V({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ja:Za}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Ko,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=OC(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Qo(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Ye,this.statusChanges=new Ye}_calculateStatus(){return this._allControlsDisabled()?Ja:this.errors?nd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ko)?Ko:this._anyControlsHaveStatus(nd)?nd:Za}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new ec(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new tc(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ld(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=_L(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=wL(this._rawAsyncValidators)}},cd=class extends ad{constructor(e,n,r){super(jC(n),UC(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){EL(this,!0,e),Object.keys(e).forEach(r=>{IL(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Bm=new G("",{providedIn:"root",factory:()=>$m}),$m="always";function bL(t,e){return[...e.path,t]}function BC(t,e,n=$m){$C(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),CL(t,e),SL(t,e),TL(t,e),DL(t,e)}function TC(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function DL(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function $C(t,e){let n=mL(t);e.validator!==null?t.setValidators(bC(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=yL(t);e.asyncValidator!==null?t.setAsyncValidators(bC(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();TC(e._rawValidators,i),TC(e._rawAsyncValidators,i)}function CL(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&HC(t,e)})}function TL(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&HC(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function HC(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function SL(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function AL(t,e){t==null,$C(t,e)}function RL(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function ML(t){return Object.getPrototypeOf(t.constructor)===uL}function NL(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function xL(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===$r?n=o:ML(o)?r=o:i=o}),i||r||n||null}var PL={provide:Yo,useExisting:Ro(()=>rc)},Xa=Promise.resolve(),rc=(()=>{class t extends Yo{callSetDisabledState;get submitted(){return or(this.submittedReactive)}_submitted=Ra(()=>this.submittedReactive());submittedReactive=Da(!1);_directives=new Set;form;ngSubmit=new Ye;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new cd({},jm(n),Um(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Xa.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),BC(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Xa.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Xa.then(()=>{let r=this._findContainer(n.path),i=new cd({});AL(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Xa.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Xa.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),NL(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(Q(xC,10),Q(PC,10),Q(Bm,8))};static \u0275dir=Pt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&be("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[xl([PL]),Vr]})}return t})();function SC(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function AC(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var kL=class extends ad{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(jC(n),UC(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ld(n)&&(n.nonNullable||n.initialValueIsDefault)&&(AC(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){SC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){SC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){AC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var OL={provide:nc,useExisting:Ro(()=>xi)},RC=Promise.resolve(),xi=(()=>{class t extends nc{_changeDetectorRef;callSetDisabledState;control=new kL;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ye;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=xL(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),RL(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){BC(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){RC.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Ci(r);RC.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?bL(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(Q(Yo,9),Q(xC,10),Q(PC,10),Q(NC,10),Q(jr,8),Q(Bm,8))};static \u0275dir=Pt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[xl([OL]),Vr,_i]})}return t})();var dd=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=Pt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();var FL=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ei({type:t});static \u0275inj=vi({})}return t})();var Hr=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Bm,useValue:n.callSetDisabledState??$m}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ei({type:t});static \u0275inj=vi({imports:[FL]})}return t})();var qC=()=>{};var GC=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},VL=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},WC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,y=(a&15)<<2|l>>6,m=l&63;u||(m=64,s||(y=64)),r.push(n[h],n[p],n[y],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(GC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new zm;let y=o<<2|a>>4;if(r.push(y),l!==64){let m=a<<4&240|l>>2;if(r.push(m),p!==64){let T=l<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},zm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},LL=function(t){let e=GC(t);return WC.encodeByteArray(e,!0)},ic=function(t){return LL(t).replace(/\./g,"")},fd=function(t){try{return WC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var UL=()=>jL().__FIREBASE_DEFAULTS__,BL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$L=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&fd(t[1]);return e&&JSON.parse(e)},pd=()=>{try{return qC()||UL()||BL()||$L()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Wm=t=>{var e,n;return(n=(e=pd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},KC=t=>{let e=Wm(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Km=()=>{var t;return(t=pd())===null||t===void 0?void 0:t.config},Qm=t=>{var e;return(e=pd())===null||e===void 0?void 0:e[`_${t}`]};var hd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function QC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ic(JSON.stringify(n)),ic(JSON.stringify(s)),""].join(".")}function tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tt())}function HL(){var t;let e=(t=pd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gd(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function JC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XC(){let t=tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function eT(){return!HL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oc(){try{return typeof indexedDB=="object"}catch{return!1}}function md(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function tT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var qL="FirebaseError",lt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=qL,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zt.prototype.create)}},zt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?zL(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new lt(i,a,r)}};function zL(t,e){return t.replace(GL,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var GL=/\{\$([^}]+)}/g;function nT(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function rn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(zC(o)&&zC(s)){if(!rn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function zC(t){return t!==null&&typeof t=="object"}function sc(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xo(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function es(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function rT(t,e){let n=new Gm(t,e);return n.subscribe.bind(n)}var Gm=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");WL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=qm),i.error===void 0&&(i.error=qm),i.complete===void 0&&(i.complete=qm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function WL(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function qm(){}var KL=1e3,QL=2,YL=4*60*60*1e3,ZL=.5;function Ym(t,e=KL,n=QL){let r=e*Math.pow(n,t),i=Math.round(ZL*r*(Math.random()-.5)*2);return Math.min(YL,r+i)}function qe(t){return t&&t._delegate?t._delegate:t}var nt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Pi="[DEFAULT]";var Zm=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new hd;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XL(e))try{this.getOrInitializeService({instanceIdentifier:Pi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Pi){return this.instances.has(e)}getOptions(e=Pi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:JL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pi){return this.component?this.component.multipleInstances?e:Pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function JL(t){return t===Pi?void 0:t}function XL(t){return t.instantiationMode==="EAGER"}var yd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Zm(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var e2=[],le=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(le||{}),t2={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},n2=le.INFO,r2={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},i2=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=r2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},On=class{constructor(e){this.name=e,this._logLevel=n2,this._logHandler=i2,this._userLogHandler=null,e2.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?t2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var o2=(t,e)=>e.some(n=>t instanceof n),iT,oT;function s2(){return iT||(iT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function a2(){return oT||(oT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var sT=new WeakMap,Xm=new WeakMap,aT=new WeakMap,Jm=new WeakMap,ty=new WeakMap;function c2(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Fn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&sT.set(n,t)}).catch(()=>{}),ty.set(e,t),e}function u2(t){if(Xm.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Xm.set(t,e)}var ey={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||aT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cT(t){ey=t(ey)}function l2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(vd(this),e,...n);return aT.set(r,e.sort?e.sort():[e]),Fn(r)}:a2().includes(t)?function(...e){return t.apply(vd(this),e),Fn(sT.get(this))}:function(...e){return Fn(t.apply(vd(this),e))}}function d2(t){return typeof t=="function"?l2(t):(t instanceof IDBTransaction&&u2(t),o2(t,s2())?new Proxy(t,ey):t)}function Fn(t){if(t instanceof IDBRequest)return c2(t);if(Jm.has(t))return Jm.get(t);let e=d2(t);return e!==t&&(Jm.set(t,e),ty.set(e,t)),e}var vd=t=>ty.get(t);function _d(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Fn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Fn(s.result),u.oldVersion,u.newVersion,Fn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var h2=["get","getKey","getAll","getAllKeys","count"],f2=["put","add","delete","clear"],ny=new Map;function uT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ny.get(e))return ny.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=f2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||h2.includes(n)))return;let o=function(s,...a){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return ny.set(e,o),o}cT(t=>oe(V({},t),{get:(e,n,r)=>uT(e,n)||t.get(e,n,r),has:(e,n)=>!!uT(e,n)||t.has(e,n)}));var iy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(p2(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function p2(t){let e=t.getComponent();return e?.type==="VERSION"}var oy="@firebase/app",lT="0.11.2";var dr=new On("@firebase/app"),g2="@firebase/app-compat",m2="@firebase/analytics-compat",y2="@firebase/analytics",v2="@firebase/app-check-compat",_2="@firebase/app-check",w2="@firebase/auth",I2="@firebase/auth-compat",E2="@firebase/database",b2="@firebase/data-connect",D2="@firebase/database-compat",C2="@firebase/functions",T2="@firebase/functions-compat",S2="@firebase/installations",A2="@firebase/installations-compat",R2="@firebase/messaging",M2="@firebase/messaging-compat",N2="@firebase/performance",x2="@firebase/performance-compat",P2="@firebase/remote-config",k2="@firebase/remote-config-compat",O2="@firebase/storage",F2="@firebase/storage-compat",V2="@firebase/firestore",L2="@firebase/vertexai",j2="@firebase/firestore-compat",U2="firebase",B2="11.4.0";var sy="[DEFAULT]",$2={[oy]:"fire-core",[g2]:"fire-core-compat",[y2]:"fire-analytics",[m2]:"fire-analytics-compat",[_2]:"fire-app-check",[v2]:"fire-app-check-compat",[w2]:"fire-auth",[I2]:"fire-auth-compat",[E2]:"fire-rtdb",[b2]:"fire-data-connect",[D2]:"fire-rtdb-compat",[C2]:"fire-fn",[T2]:"fire-fn-compat",[S2]:"fire-iid",[A2]:"fire-iid-compat",[R2]:"fire-fcm",[M2]:"fire-fcm-compat",[N2]:"fire-perf",[x2]:"fire-perf-compat",[P2]:"fire-rc",[k2]:"fire-rc-compat",[O2]:"fire-gcs",[F2]:"fire-gcs-compat",[V2]:"fire-fst",[j2]:"fire-fst-compat",[L2]:"fire-vertex","fire-js":"fire-js",[U2]:"fire-js-all"};var wd=new Map,H2=new Map,ay=new Map;function dT(t,e){try{t.container.addComponent(e)}catch(n){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ot(t){let e=t.name;if(ay.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;ay.set(e,t);for(let n of wd.values())dT(n,t);for(let n of H2.values())dT(n,t);return!0}function _n(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Gt(t){return t==null?!1:t.settings!==void 0}var q2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qr=new zt("app","Firebase",q2);var cy=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new nt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qr.create("app-deleted",{appName:this._name})}};var zr=B2;function dy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:sy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw qr.create("bad-app-name",{appName:String(i)});if(n||(n=Km()),!n)throw qr.create("no-options");let o=wd.get(i);if(o){if(rn(n,o.options)&&rn(r,o.config))return o;throw qr.create("duplicate-app",{appName:i})}let s=new yd(i);for(let u of ay.values())s.addComponent(u);let a=new cy(n,r,s);return wd.set(i,a),a}function ki(t=sy){let e=wd.get(t);if(!e&&t===sy&&Km())return dy();if(!e)throw qr.create("no-app",{appName:t});return e}function dt(t,e,n){var r;let i=(r=$2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(a.join(" "));return}Ot(new nt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var z2="firebase-heartbeat-database",G2=1,ac="firebase-heartbeat-store",ry=null;function gT(){return ry||(ry=_d(z2,G2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ac)}catch(n){console.warn(n)}}}}).catch(t=>{throw qr.create("idb-open",{originalErrorMessage:t.message})})),ry}function W2(t){return v(this,null,function*(){try{let n=(yield gT()).transaction(ac),r=yield n.objectStore(ac).get(mT(t));return yield n.done,r}catch(e){if(e instanceof lt)dr.warn(e.message);else{let n=qr.create("idb-get",{originalErrorMessage:e?.message});dr.warn(n.message)}}})}function hT(t,e){return v(this,null,function*(){try{let r=(yield gT()).transaction(ac,"readwrite");yield r.objectStore(ac).put(e,mT(t)),yield r.done}catch(n){if(n instanceof lt)dr.warn(n.message);else{let r=qr.create("idb-set",{originalErrorMessage:n?.message});dr.warn(r.message)}}})}function mT(t){return`${t.name}!${t.options.appId}`}var K2=1024,Q2=30,uy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new ly(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=fT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>Q2){let s=Z2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){dr.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=fT(),{heartbeatsToSend:r,unsentEntries:i}=Y2(this._heartbeatsCache.heartbeats),o=ic(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return dr.warn(n),""}})}};function fT(){return new Date().toISOString().substring(0,10)}function Y2(t,e=K2){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),pT(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),pT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var ly=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return oc()?md().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield W2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return hT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return hT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function pT(t){return ic(JSON.stringify({version:2,heartbeats:t})).length}function Z2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function J2(t){Ot(new nt("platform-logger",e=>new iy(e),"PRIVATE")),Ot(new nt("heartbeat",e=>new uy(e),"PRIVATE")),dt(oy,lT,t),dt(oy,lT,"esm2017"),dt("fire-js","")}J2("");var yT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vT={};var hr,hy;(function(){var t;function e(b,_){function I(){}I.prototype=_.prototype,b.D=_.prototype,b.prototype=new I,b.prototype.constructor=b,b.C=function(E,D,S){for(var w=Array(arguments.length-2),Gn=2;Gn<arguments.length;Gn++)w[Gn-2]=arguments[Gn];return _.prototype[D].apply(E,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,_,I){I||(I=0);var E=Array(16);if(typeof _=="string")for(var D=0;16>D;++D)E[D]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(D=0;16>D;++D)E[D]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=b.g[0],I=b.g[1],D=b.g[2];var S=b.g[3],w=_+(S^I&(D^S))+E[0]+3614090360&4294967295;_=I+(w<<7&4294967295|w>>>25),w=S+(D^_&(I^D))+E[1]+3905402710&4294967295,S=_+(w<<12&4294967295|w>>>20),w=D+(I^S&(_^I))+E[2]+606105819&4294967295,D=S+(w<<17&4294967295|w>>>15),w=I+(_^D&(S^_))+E[3]+3250441966&4294967295,I=D+(w<<22&4294967295|w>>>10),w=_+(S^I&(D^S))+E[4]+4118548399&4294967295,_=I+(w<<7&4294967295|w>>>25),w=S+(D^_&(I^D))+E[5]+1200080426&4294967295,S=_+(w<<12&4294967295|w>>>20),w=D+(I^S&(_^I))+E[6]+2821735955&4294967295,D=S+(w<<17&4294967295|w>>>15),w=I+(_^D&(S^_))+E[7]+4249261313&4294967295,I=D+(w<<22&4294967295|w>>>10),w=_+(S^I&(D^S))+E[8]+1770035416&4294967295,_=I+(w<<7&4294967295|w>>>25),w=S+(D^_&(I^D))+E[9]+2336552879&4294967295,S=_+(w<<12&4294967295|w>>>20),w=D+(I^S&(_^I))+E[10]+4294925233&4294967295,D=S+(w<<17&4294967295|w>>>15),w=I+(_^D&(S^_))+E[11]+2304563134&4294967295,I=D+(w<<22&4294967295|w>>>10),w=_+(S^I&(D^S))+E[12]+1804603682&4294967295,_=I+(w<<7&4294967295|w>>>25),w=S+(D^_&(I^D))+E[13]+4254626195&4294967295,S=_+(w<<12&4294967295|w>>>20),w=D+(I^S&(_^I))+E[14]+2792965006&4294967295,D=S+(w<<17&4294967295|w>>>15),w=I+(_^D&(S^_))+E[15]+1236535329&4294967295,I=D+(w<<22&4294967295|w>>>10),w=_+(D^S&(I^D))+E[1]+4129170786&4294967295,_=I+(w<<5&4294967295|w>>>27),w=S+(I^D&(_^I))+E[6]+3225465664&4294967295,S=_+(w<<9&4294967295|w>>>23),w=D+(_^I&(S^_))+E[11]+643717713&4294967295,D=S+(w<<14&4294967295|w>>>18),w=I+(S^_&(D^S))+E[0]+3921069994&4294967295,I=D+(w<<20&4294967295|w>>>12),w=_+(D^S&(I^D))+E[5]+3593408605&4294967295,_=I+(w<<5&4294967295|w>>>27),w=S+(I^D&(_^I))+E[10]+38016083&4294967295,S=_+(w<<9&4294967295|w>>>23),w=D+(_^I&(S^_))+E[15]+3634488961&4294967295,D=S+(w<<14&4294967295|w>>>18),w=I+(S^_&(D^S))+E[4]+3889429448&4294967295,I=D+(w<<20&4294967295|w>>>12),w=_+(D^S&(I^D))+E[9]+568446438&4294967295,_=I+(w<<5&4294967295|w>>>27),w=S+(I^D&(_^I))+E[14]+3275163606&4294967295,S=_+(w<<9&4294967295|w>>>23),w=D+(_^I&(S^_))+E[3]+4107603335&4294967295,D=S+(w<<14&4294967295|w>>>18),w=I+(S^_&(D^S))+E[8]+1163531501&4294967295,I=D+(w<<20&4294967295|w>>>12),w=_+(D^S&(I^D))+E[13]+2850285829&4294967295,_=I+(w<<5&4294967295|w>>>27),w=S+(I^D&(_^I))+E[2]+4243563512&4294967295,S=_+(w<<9&4294967295|w>>>23),w=D+(_^I&(S^_))+E[7]+1735328473&4294967295,D=S+(w<<14&4294967295|w>>>18),w=I+(S^_&(D^S))+E[12]+2368359562&4294967295,I=D+(w<<20&4294967295|w>>>12),w=_+(I^D^S)+E[5]+4294588738&4294967295,_=I+(w<<4&4294967295|w>>>28),w=S+(_^I^D)+E[8]+2272392833&4294967295,S=_+(w<<11&4294967295|w>>>21),w=D+(S^_^I)+E[11]+1839030562&4294967295,D=S+(w<<16&4294967295|w>>>16),w=I+(D^S^_)+E[14]+4259657740&4294967295,I=D+(w<<23&4294967295|w>>>9),w=_+(I^D^S)+E[1]+2763975236&4294967295,_=I+(w<<4&4294967295|w>>>28),w=S+(_^I^D)+E[4]+1272893353&4294967295,S=_+(w<<11&4294967295|w>>>21),w=D+(S^_^I)+E[7]+4139469664&4294967295,D=S+(w<<16&4294967295|w>>>16),w=I+(D^S^_)+E[10]+3200236656&4294967295,I=D+(w<<23&4294967295|w>>>9),w=_+(I^D^S)+E[13]+681279174&4294967295,_=I+(w<<4&4294967295|w>>>28),w=S+(_^I^D)+E[0]+3936430074&4294967295,S=_+(w<<11&4294967295|w>>>21),w=D+(S^_^I)+E[3]+3572445317&4294967295,D=S+(w<<16&4294967295|w>>>16),w=I+(D^S^_)+E[6]+76029189&4294967295,I=D+(w<<23&4294967295|w>>>9),w=_+(I^D^S)+E[9]+3654602809&4294967295,_=I+(w<<4&4294967295|w>>>28),w=S+(_^I^D)+E[12]+3873151461&4294967295,S=_+(w<<11&4294967295|w>>>21),w=D+(S^_^I)+E[15]+530742520&4294967295,D=S+(w<<16&4294967295|w>>>16),w=I+(D^S^_)+E[2]+3299628645&4294967295,I=D+(w<<23&4294967295|w>>>9),w=_+(D^(I|~S))+E[0]+4096336452&4294967295,_=I+(w<<6&4294967295|w>>>26),w=S+(I^(_|~D))+E[7]+1126891415&4294967295,S=_+(w<<10&4294967295|w>>>22),w=D+(_^(S|~I))+E[14]+2878612391&4294967295,D=S+(w<<15&4294967295|w>>>17),w=I+(S^(D|~_))+E[5]+4237533241&4294967295,I=D+(w<<21&4294967295|w>>>11),w=_+(D^(I|~S))+E[12]+1700485571&4294967295,_=I+(w<<6&4294967295|w>>>26),w=S+(I^(_|~D))+E[3]+2399980690&4294967295,S=_+(w<<10&4294967295|w>>>22),w=D+(_^(S|~I))+E[10]+4293915773&4294967295,D=S+(w<<15&4294967295|w>>>17),w=I+(S^(D|~_))+E[1]+2240044497&4294967295,I=D+(w<<21&4294967295|w>>>11),w=_+(D^(I|~S))+E[8]+1873313359&4294967295,_=I+(w<<6&4294967295|w>>>26),w=S+(I^(_|~D))+E[15]+4264355552&4294967295,S=_+(w<<10&4294967295|w>>>22),w=D+(_^(S|~I))+E[6]+2734768916&4294967295,D=S+(w<<15&4294967295|w>>>17),w=I+(S^(D|~_))+E[13]+1309151649&4294967295,I=D+(w<<21&4294967295|w>>>11),w=_+(D^(I|~S))+E[4]+4149444226&4294967295,_=I+(w<<6&4294967295|w>>>26),w=S+(I^(_|~D))+E[11]+3174756917&4294967295,S=_+(w<<10&4294967295|w>>>22),w=D+(_^(S|~I))+E[2]+718787259&4294967295,D=S+(w<<15&4294967295|w>>>17),w=I+(S^(D|~_))+E[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(D+(w<<21&4294967295|w>>>11))&4294967295,b.g[2]=b.g[2]+D&4294967295,b.g[3]=b.g[3]+S&4294967295}r.prototype.u=function(b,_){_===void 0&&(_=b.length);for(var I=_-this.blockSize,E=this.B,D=this.h,S=0;S<_;){if(D==0)for(;S<=I;)i(this,b,S),S+=this.blockSize;if(typeof b=="string"){for(;S<_;)if(E[D++]=b.charCodeAt(S++),D==this.blockSize){i(this,E),D=0;break}}else for(;S<_;)if(E[D++]=b[S++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=_},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;var I=8*this.o;for(_=b.length-8;_<b.length;++_)b[_]=I&255,I/=256;for(this.u(b),b=Array(16),_=I=0;4>_;++_)for(var E=0;32>E;E+=8)b[I++]=this.g[_]>>>E&255;return b};function o(b,_){var I=a;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=_(b)}function s(b,_){this.h=_;for(var I=[],E=!0,D=b.length-1;0<=D;D--){var S=b[D]|0;E&&S==_||(I[D]=S,E=!1)}this.g=I}var a={};function u(b){return-128<=b&&128>b?o(b,function(_){return new s([_|0],0>_?-1:0)}):new s([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return P(l(-b));for(var _=[],I=1,E=0;b>=I;E++)_[E]=b/I|0,I*=4294967296;return new s(_,0)}function h(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return P(h(b.substring(1),_));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(_,8)),E=p,D=0;D<b.length;D+=8){var S=Math.min(8,b.length-D),w=parseInt(b.substring(D,D+S),_);8>S?(S=l(Math.pow(_,S)),E=E.j(S).add(l(w))):(E=E.j(I),E=E.add(l(w)))}return E}var p=u(0),y=u(1),m=u(16777216);t=s.prototype,t.m=function(){if(N(this))return-P(this).m();for(var b=0,_=1,I=0;I<this.g.length;I++){var E=this.i(I);b+=(0<=E?E:4294967296+E)*_,_*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(T(this))return"0";if(N(this))return"-"+P(this).toString(b);for(var _=l(Math.pow(b,6)),I=this,E="";;){var D=Me(I,_).g;I=j(I,D.j(_));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(b);if(I=D,T(I))return S+E;for(;6>S.length;)S="0"+S;E=S+E}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function T(b){if(b.h!=0)return!1;for(var _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function N(b){return b.h==-1}t.l=function(b){return b=j(this,b),N(b)?-1:T(b)?0:1};function P(b){for(var _=b.g.length,I=[],E=0;E<_;E++)I[E]=~b.g[E];return new s(I,~b.h).add(y)}t.abs=function(){return N(this)?P(this):this},t.add=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],E=0,D=0;D<=_;D++){var S=E+(this.i(D)&65535)+(b.i(D)&65535),w=(S>>>16)+(this.i(D)>>>16)+(b.i(D)>>>16);E=w>>>16,S&=65535,w&=65535,I[D]=w<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function j(b,_){return b.add(P(_))}t.j=function(b){if(T(this)||T(b))return p;if(N(this))return N(b)?P(this).j(P(b)):P(P(this).j(b));if(N(b))return P(this.j(P(b)));if(0>this.l(m)&&0>b.l(m))return l(this.m()*b.m());for(var _=this.g.length+b.g.length,I=[],E=0;E<2*_;E++)I[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<b.g.length;D++){var S=this.i(E)>>>16,w=this.i(E)&65535,Gn=b.i(D)>>>16,Ns=b.i(D)&65535;I[2*E+2*D]+=w*Ns,z(I,2*E+2*D),I[2*E+2*D+1]+=S*Ns,z(I,2*E+2*D+1),I[2*E+2*D+1]+=w*Gn,z(I,2*E+2*D+1),I[2*E+2*D+2]+=S*Gn,z(I,2*E+2*D+2)}for(E=0;E<_;E++)I[E]=I[2*E+1]<<16|I[2*E];for(E=_;E<2*_;E++)I[E]=0;return new s(I,0)};function z(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function ne(b,_){this.g=b,this.h=_}function Me(b,_){if(T(_))throw Error("division by zero");if(T(b))return new ne(p,p);if(N(b))return _=Me(P(b),_),new ne(P(_.g),P(_.h));if(N(_))return _=Me(b,P(_)),new ne(P(_.g),_.h);if(30<b.g.length){if(N(b)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var I=y,E=_;0>=E.l(b);)I=Et(I),E=Et(E);var D=Te(I,1),S=Te(E,1);for(E=Te(E,2),I=Te(I,2);!T(E);){var w=S.add(E);0>=w.l(b)&&(D=D.add(I),S=w),E=Te(E,1),I=Te(I,1)}return _=j(b,D.j(_)),new ne(D,_)}for(D=p;0<=b.l(_);){for(I=Math.max(1,Math.floor(b.m()/_.m())),E=Math.ceil(Math.log(I)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),S=l(I),w=S.j(_);N(w)||0<w.l(b);)I-=E,S=l(I),w=S.j(_);T(S)&&(S=y),D=D.add(S),b=j(b,w)}return new ne(D,b)}t.A=function(b){return Me(this,b).h},t.and=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],E=0;E<_;E++)I[E]=this.i(E)&b.i(E);return new s(I,this.h&b.h)},t.or=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],E=0;E<_;E++)I[E]=this.i(E)|b.i(E);return new s(I,this.h|b.h)},t.xor=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],E=0;E<_;E++)I[E]=this.i(E)^b.i(E);return new s(I,this.h^b.h)};function Et(b){for(var _=b.g.length+1,I=[],E=0;E<_;E++)I[E]=b.i(E)<<1|b.i(E-1)>>>31;return new s(I,b.h)}function Te(b,_){var I=_>>5;_%=32;for(var E=b.g.length-I,D=[],S=0;S<E;S++)D[S]=0<_?b.i(S+I)>>>_|b.i(S+I+1)<<32-_:b.i(S+I);return new s(D,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,hy=vT.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,hr=vT.Integer=s}).apply(typeof yT<"u"?yT:typeof self<"u"?self:typeof window<"u"?window:{});var Id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fr={};var fy,X2,ts,py,cc,Ed,gy,my,yy;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Id=="object"&&Id];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function y(c,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function m(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function T(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,A){for(var F=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)F[Se-2]=arguments[Se];return d.prototype[C].apply(g,F)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function P(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,A=g.length||0;c.length=C+A;for(let F=0;F<A;F++)c[C+F]=g[F]}else c.push(g)}}class j{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function z(c){return/^[\s\xa0]*$/.test(c)}function ne(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Me(c){return Me[" "](c),c}Me[" "]=function(){};var Et=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function Te(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function b(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function _(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function w(){var c=Qh;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Gn{constructor(){this.h=this.g=null}add(d,f){let g=Ns.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ns=new j(()=>new yM,c=>c.reset());class yM{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let xs,Ps=!1,Qh=new Gn,bw=()=>{let c=a.Promise.resolve(void 0);xs=()=>{c.then(vM)}};var vM=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(f){S(f)}var d=Ns;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ps=!1};function Er(){this.s=this.s,this.C=this.C}Er.prototype.s=!1,Er.prototype.ma=function(){this.s||(this.s=!0,this.N())},Er.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ft(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ft.prototype.h=function(){this.defaultPrevented=!0};var _M=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function ks(c,d){if(ft.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Et){e:{try{Me(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:wM[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ks.aa.h.call(this)}}T(ks,ft);var wM={2:"touch",3:"pen",4:"mouse"};ks.prototype.h=function(){ks.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Os="closure_listenable_"+(1e6*Math.random()|0),IM=0;function EM(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++IM,this.da=this.fa=!1}function $c(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Hc(c){this.src=c,this.g={},this.h=0}Hc.prototype.add=function(c,d,f,g,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var F=Zh(c,d,g,C);return-1<F?(d=c[F],f||(d.fa=!1)):(d=new EM(d,this.src,A,!!g,C),d.fa=f,c.push(d)),d};function Yh(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&($c(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Zh(c,d,f,g){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Jh="closure_lm_"+(1e6*Math.random()|0),Xh={};function Dw(c,d,f,g,C){if(g&&g.once)return Tw(c,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)Dw(c,d[A],f,g,C);return null}return f=rf(f),c&&c[Os]?c.K(d,f,l(g)?!!g.capture:!!g,C):Cw(c,d,f,!1,g,C)}function Cw(c,d,f,g,C,A){if(!d)throw Error("Invalid event type");var F=l(C)?!!C.capture:!!C,Se=tf(c);if(Se||(c[Jh]=Se=new Hc(c)),f=Se.add(d,f,g,F,A),f.proxy)return f;if(g=bM(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)_M||(C=F),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(Aw(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function bM(){function c(f){return d.call(c.src,c.listener,f)}let d=DM;return c}function Tw(c,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)Tw(c,d[A],f,g,C);return null}return f=rf(f),c&&c[Os]?c.L(d,f,l(g)?!!g.capture:!!g,C):Cw(c,d,f,!0,g,C)}function Sw(c,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)Sw(c,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=rf(f),c&&c[Os]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Zh(A,f,g,C),-1<f&&($c(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=tf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Zh(d,f,g,C)),(f=-1<c?d[c]:null)&&ef(f))}function ef(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Os])Yh(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(Aw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=tf(d))?(Yh(f,c),f.h==0&&(f.src=null,d[Jh]=null)):$c(c)}}}function Aw(c){return c in Xh?Xh[c]:Xh[c]="on"+c}function DM(c,d){if(c.da)c=!0;else{d=new ks(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&ef(c),c=f.call(g,d)}return c}function tf(c){return c=c[Jh],c instanceof Hc?c:null}var nf="__closure_events_fn_"+(1e9*Math.random()>>>0);function rf(c){return typeof c=="function"?c:(c[nf]||(c[nf]=function(d){return c.handleEvent(d)}),c[nf])}function pt(){Er.call(this),this.i=new Hc(this),this.M=this,this.F=null}T(pt,Er),pt.prototype[Os]=!0,pt.prototype.removeEventListener=function(c,d,f,g){Sw(this,c,d,f,g)};function bt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new ft(d,c);else if(d instanceof ft)d.target=d.target||c;else{var C=d;d=new ft(g,c),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var F=d.g=f[A];C=qc(F,g,!0,d)&&C}if(F=d.g=c,C=qc(F,g,!0,d)&&C,C=qc(F,g,!1,d)&&C,f)for(A=0;A<f.length;A++)F=d.g=f[A],C=qc(F,g,!1,d)&&C}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)$c(f[g]);delete c.g[d],c.h--}}this.F=null},pt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},pt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function qc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var F=d[A];if(F&&!F.da&&F.capture==f){var Se=F.listener,ot=F.ha||F.src;F.fa&&Yh(c.i,F),C=Se.call(ot,g)!==!1&&C}}return C&&!g.defaultPrevented}function Rw(c,d,f){if(typeof c=="function")f&&(c=y(c,f));else if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Mw(c){c.g=Rw(()=>{c.g=null,c.i&&(c.i=!1,Mw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class CM extends Er{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Mw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fs(c){Er.call(this),this.h=c,this.g={}}T(Fs,Er);var Nw=[];function xw(c){Te(c.g,function(d,f){this.g.hasOwnProperty(f)&&ef(d)},c),c.g={}}Fs.prototype.N=function(){Fs.aa.N.call(this),xw(this)},Fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var of=a.JSON.stringify,TM=a.JSON.parse,SM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function sf(){}sf.prototype.h=null;function Pw(c){return c.h||(c.h=c.i())}function kw(){}var Vs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function af(){ft.call(this,"d")}T(af,ft);function cf(){ft.call(this,"c")}T(cf,ft);var ti={},Ow=null;function zc(){return Ow=Ow||new pt}ti.La="serverreachability";function Fw(c){ft.call(this,ti.La,c)}T(Fw,ft);function Ls(c){let d=zc();bt(d,new Fw(d))}ti.STAT_EVENT="statevent";function Vw(c,d){ft.call(this,ti.STAT_EVENT,c),this.stat=d}T(Vw,ft);function Dt(c){let d=zc();bt(d,new Vw(d,c))}ti.Ma="timingevent";function Lw(c,d){ft.call(this,ti.Ma,c),this.size=d}T(Lw,ft);function js(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Us(){this.g=!0}Us.prototype.xa=function(){this.g=!1};function AM(c,d,f,g,C,A){c.info(function(){if(c.g)if(A)for(var F="",Se=A.split("&"),ot=0;ot<Se.length;ot++){var ve=Se[ot].split("=");if(1<ve.length){var gt=ve[0];ve=ve[1];var mt=gt.split("_");F=2<=mt.length&&mt[1]=="type"?F+(gt+"="+ve+"&"):F+(gt+"=redacted&")}}else F=null;else F=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+F})}function RM(c,d,f,g,C,A,F){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+F})}function Xi(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+NM(c,f)+(g?" "+g:"")})}function MM(c,d){c.info(function(){return"TIMEOUT: "+d})}Us.prototype.info=function(){};function NM(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var F=1;F<C.length;F++)C[F]=""}}}}return of(f)}catch{return d}}var Gc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},uf;function Wc(){}T(Wc,sf),Wc.prototype.g=function(){return new XMLHttpRequest},Wc.prototype.i=function(){return{}},uf=new Wc;function br(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Fs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Uw}function Uw(){this.i=null,this.g="",this.h=!1}var Bw={},lf={};function df(c,d,f){c.L=1,c.v=Zc(Wn(d)),c.m=f,c.P=!0,$w(c,null)}function $w(c,d){c.F=Date.now(),Kc(c),c.A=Wn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),nI(f.i,"t",g),c.C=0,f=c.j.J,c.h=new Uw,c.g=wI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new CM(y(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(Nw[0]=C.toString()),C=Nw);for(var A=0;A<C.length;A++){var F=Dw(f,C[A],g||d.handleEvent,!1,d.h||d);if(!F)break;d.g[F.key]=F}d=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ls(),AM(c.i,c.u,c.A,c.l,c.R,c.m)}br.prototype.ca=function(c){c=c.target;let d=this.M;d&&Kn(c)==3?d.j():this.Y(c)},br.prototype.Y=function(c){try{if(c==this.g)e:{let mt=Kn(this.g);var d=this.g.Ba();let no=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||uI(this.g)))){this.J||mt!=4||d==7||(d==8||0>=no?Ls(3):Ls(2)),hf(this);var f=this.g.Z();this.X=f;t:if(Hw(this)){var g=uI(this.g);c="";var C=g.length,A=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ni(this),Bs(this);var F="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=f==200,RM(this.i,this.u,this.A,this.l,this.R,mt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,ot=this.g;if((Se=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Se)){var ve=Se;break t}}ve=null}if(f=ve)Xi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ff(this,f);else{this.o=!1,this.s=3,Dt(12),ni(this),Bs(this);break e}}if(this.P){f=!0;let an;for(;!this.J&&this.C<F.length;)if(an=xM(this,F),an==lf){mt==4&&(this.s=4,Dt(14),f=!1),Xi(this.i,this.l,null,"[Incomplete Response]");break}else if(an==Bw){this.s=4,Dt(15),Xi(this.i,this.l,F,"[Invalid Chunk]"),f=!1;break}else Xi(this.i,this.l,an,null),ff(this,an);if(Hw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||F.length!=0||this.h.h||(this.s=1,Dt(16),f=!1),this.o=this.o&&f,!f)Xi(this.i,this.l,F,"[Invalid Chunked Response]"),ni(this),Bs(this);else if(0<F.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),_f(gt),gt.M=!0,Dt(11))}}else Xi(this.i,this.l,F,null),ff(this,F);mt==4&&ni(this),this.o&&!this.J&&(mt==4?mI(this.j,this):(this.o=!1,Kc(this)))}else QM(this.g),f==400&&0<F.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),ni(this),Bs(this)}}}catch{}finally{}};function Hw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function xM(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?lf:(f=Number(d.substring(f,g)),isNaN(f)?Bw:(g+=1,g+f>d.length?lf:(d=d.slice(g,g+f),c.C=g+f,d)))}br.prototype.cancel=function(){this.J=!0,ni(this)};function Kc(c){c.S=Date.now()+c.I,qw(c,c.I)}function qw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=js(y(c.ba,c),d)}function hf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}br.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(MM(this.i,this.A),this.L!=2&&(Ls(),Dt(17)),ni(this),this.s=2,Bs(this)):qw(this,this.S-c)};function Bs(c){c.j.G==0||c.J||mI(c.j,c)}function ni(c){hf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,xw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function ff(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||pf(f.h,c))){if(!c.K&&pf(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)nu(f),eu(f);else break e;vf(f),Dt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=js(y(f.Za,f),6e3));if(1>=Ww(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ii(f,11)}else if((c.K||f.g==c)&&nu(f),!z(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let ve=C[d];if(f.T=ve[0],ve=ve[1],f.G==2)if(ve[0]=="c"){f.K=ve[1],f.ia=ve[2];let gt=ve[3];gt!=null&&(f.la=gt,f.j.info("VER="+f.la));let mt=ve[4];mt!=null&&(f.Aa=mt,f.j.info("SVER="+f.Aa));let no=ve[5];no!=null&&typeof no=="number"&&0<no&&(g=1.5*no,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let an=c.g;if(an){let iu=an.g?an.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(iu){var A=g.h;A.g||iu.indexOf("spdy")==-1&&iu.indexOf("quic")==-1&&iu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(gf(A,A.h),A.h=null))}if(g.D){let wf=an.g?an.g.getResponseHeader("X-HTTP-Session-Id"):null;wf&&(g.ya=wf,Ne(g.I,g.D,wf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var F=c;if(g.qa=_I(g,g.J?g.ia:null,g.W),F.K){Kw(g.h,F);var Se=F,ot=g.L;ot&&(Se.I=ot),Se.B&&(hf(Se),Kc(Se)),g.g=F}else pI(g);0<f.i.length&&tu(f)}else ve[0]!="stop"&&ve[0]!="close"||ii(f,7);else f.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?ii(f,7):yf(f):ve[0]!="noop"&&f.l&&f.l.ta(ve),f.v=0)}}Ls(4)}catch{}}var PM=class{constructor(c,d){this.g=c,this.map=d}};function zw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ww(c){return c.h?1:c.g?c.g.size:0}function pf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function gf(c,d){c.g?c.g.add(d):c.h=d}function Kw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}zw.prototype.cancel=function(){if(this.i=Qw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Qw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function kM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function OM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function Yw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=OM(c),g=kM(c),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],c)}var Zw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function FM(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var A=c[f].substring(0,g);C=c[f].substring(g+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function ri(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ri){this.h=c.h,Qc(this,c.j),this.o=c.o,this.g=c.g,Yc(this,c.s),this.l=c.l;var d=c.i,f=new qs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Jw(this,f),this.m=c.m}else c&&(d=String(c).match(Zw))?(this.h=!1,Qc(this,d[1]||"",!0),this.o=$s(d[2]||""),this.g=$s(d[3]||"",!0),Yc(this,d[4]),this.l=$s(d[5]||"",!0),Jw(this,d[6]||"",!0),this.m=$s(d[7]||"")):(this.h=!1,this.i=new qs(null,this.h))}ri.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Hs(d,Xw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Hs(d,Xw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Hs(f,f.charAt(0)=="/"?jM:LM,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Hs(f,BM)),c.join("")};function Wn(c){return new ri(c)}function Qc(c,d,f){c.j=f?$s(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Yc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Jw(c,d,f){d instanceof qs?(c.i=d,$M(c.i,c.h)):(f||(d=Hs(d,UM)),c.i=new qs(d,c.h))}function Ne(c,d,f){c.i.set(d,f)}function Zc(c){return Ne(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function $s(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Hs(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,VM),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function VM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Xw=/[#\/\?@]/g,LM=/[#\?:]/g,jM=/[#\?]/g,UM=/[#\?@]/g,BM=/#/g;function qs(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Dr(c){c.g||(c.g=new Map,c.h=0,c.i&&FM(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=qs.prototype,t.add=function(c,d){Dr(this),this.i=null,c=eo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function eI(c,d){Dr(c),d=eo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function tI(c,d){return Dr(c),d=eo(c,d),c.g.has(d)}t.forEach=function(c,d){Dr(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},t.na=function(){Dr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},t.V=function(c){Dr(this);let d=[];if(typeof c=="string")tI(this,c)&&(d=d.concat(this.g.get(eo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Dr(this),this.i=null,c=eo(this,c),tI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function nI(c,d,f){eI(c,d),0<f.length&&(c.i=null,c.g.set(eo(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),F=this.V(g);for(g=0;g<F.length;g++){var C=A;F[g]!==""&&(C+="="+encodeURIComponent(String(F[g]))),c.push(C)}}return this.i=c.join("&")};function eo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function $M(c,d){d&&!c.j&&(Dr(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(eI(this,g),nI(this,C,f))},c)),c.j=d}function HM(c,d){let f=new Us;if(a.Image){let g=new Image;g.onload=m(Cr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=m(Cr,f,"TestLoadImage: error",!1,d,g),g.onabort=m(Cr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=m(Cr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function qM(c,d){let f=new Us,g=new AbortController,C=setTimeout(()=>{g.abort(),Cr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?Cr(f,"TestPingServer: ok",!0,d):Cr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Cr(f,"TestPingServer: error",!1,d)})}function Cr(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function zM(){this.g=new SM}function GM(c,d,f){let g=f||"";try{Yw(c,function(C,A){let F=C;l(C)&&(F=of(C)),d.push(g+A+"="+encodeURIComponent(F))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function zs(c){this.l=c.Ub||null,this.j=c.eb||!1}T(zs,sf),zs.prototype.g=function(){return new Jc(this.l,this.j)},zs.prototype.i=function(c){return function(){return c}}({});function Jc(c,d){pt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Jc,pt),t=Jc.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ws(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gs(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ws(this)),this.g&&(this.readyState=3,Ws(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function rI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Gs(this):Ws(this),this.readyState==3&&rI(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Gs(this))},t.Qa=function(c){this.g&&(this.response=c,Gs(this))},t.ga=function(){this.g&&Gs(this)};function Gs(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ws(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Ws(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Jc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function iI(c){let d="";return Te(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function mf(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=iI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ne(c,d,f))}function Oe(c){pt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Oe,pt);var WM=/^https?$/i,KM=["POST","PUT"];t=Oe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():uf.g(),this.v=this.o?Pw(this.o):Pw(uf),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){oI(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(KM,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,F]of f)this.g.setRequestHeader(A,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cI(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){oI(this,A)}};function oI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,sI(c),Xc(c)}function sI(c){c.A||(c.A=!0,bt(c,"complete"),bt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,bt(this,"complete"),bt(this,"abort"),Xc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xc(this,!0)),Oe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?aI(this):this.bb())},t.bb=function(){aI(this)};function aI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Kn(c)!=4||c.Z()!=2)){if(c.u&&Kn(c)==4)Rw(c.Ea,0,c);else if(bt(c,"readystatechange"),Kn(c)==4){c.h=!1;try{let F=c.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=F===0){var C=String(c.D).match(Zw)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!WM.test(C?C.toLowerCase():"")}f=g}if(f)bt(c,"complete"),bt(c,"success");else{c.m=6;try{var A=2<Kn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",sI(c)}}finally{Xc(c)}}}}function Xc(c,d){if(c.g){cI(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||bt(c,"ready");try{f.onreadystatechange=g}catch{}}}function cI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Kn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),TM(d)}};function uI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function QM(c){let d={};c=(c.g&&2<=Kn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(z(c[g]))continue;var f=D(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}b(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ks(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function lI(c){this.Aa=0,this.i=[],this.j=new Us,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ks("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ks("baseRetryDelayMs",5e3,c),this.cb=Ks("retryDelaySeedMs",1e4,c),this.Wa=Ks("forwardChannelMaxRetries",2,c),this.wa=Ks("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new zw(c&&c.concurrentRequestLimit),this.Da=new zM,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=lI.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){Dt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=_I(this,null,this.W),tu(this)};function yf(c){if(dI(c),c.G==3){var d=c.U++,f=Wn(c.I);if(Ne(f,"SID",c.K),Ne(f,"RID",d),Ne(f,"TYPE","terminate"),Qs(c,f),d=new br(c,c.j,d),d.L=2,d.v=Zc(Wn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=wI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Kc(d)}vI(c)}function eu(c){c.g&&(_f(c),c.g.cancel(),c.g=null)}function dI(c){eu(c),c.u&&(a.clearTimeout(c.u),c.u=null),nu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function tu(c){if(!Gw(c.h)&&!c.s){c.s=!0;var d=c.Ga;xs||bw(),Ps||(xs(),Ps=!0),Qh.add(d,c),c.B=0}}function YM(c,d){return Ww(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=js(y(c.Ga,c,d),yI(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new br(this,this.j,c),A=this.o;if(this.S&&(A?(A=_(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=fI(this,C,d),f=Wn(this.I),Ne(f,"RID",c),Ne(f,"CVER",22),this.D&&Ne(f,"X-HTTP-Session-Id",this.D),Qs(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(iI(A)))+"&"+d:this.m&&mf(f,this.m,A)),gf(this.h,C),this.Ua&&Ne(f,"TYPE","init"),this.P?(Ne(f,"$req",d),Ne(f,"SID","null"),C.T=!0,df(C,f,null)):df(C,f,d),this.G=2}}else this.G==3&&(c?hI(this,c):this.i.length==0||Gw(this.h)||hI(this))};function hI(c,d){var f;d?f=d.l:f=c.U++;let g=Wn(c.I);Ne(g,"SID",c.K),Ne(g,"RID",f),Ne(g,"AID",c.T),Qs(c,g),c.m&&c.o&&mf(g,c.m,c.o),f=new br(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=fI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),gf(c.h,f),df(f,g,d)}function Qs(c,d){c.H&&Te(c.H,function(f,g){Ne(d,g,f)}),c.l&&Yw({},function(f,g){Ne(d,g,f)})}function fI(c,d,f){f=Math.min(c.i.length,f);var g=c.l?y(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let F=["count="+f];A==-1?0<f?(A=C[0].g,F.push("ofs="+A)):A=0:F.push("ofs="+A);let Se=!0;for(let ot=0;ot<f;ot++){let ve=C[ot].g,gt=C[ot].map;if(ve-=A,0>ve)A=Math.max(0,C[ot].g-100),Se=!1;else try{GM(gt,F,"req"+ve+"_")}catch{g&&g(gt)}}if(Se){g=F.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function pI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;xs||bw(),Ps||(xs(),Ps=!0),Qh.add(d,c),c.v=0}}function vf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=js(y(c.Fa,c),yI(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,gI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=js(y(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dt(10),eu(this),gI(this))};function _f(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function gI(c){c.g=new br(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Wn(c.qa);Ne(d,"RID","rpc"),Ne(d,"SID",c.K),Ne(d,"AID",c.T),Ne(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ne(d,"TO",c.ja),Ne(d,"TYPE","xmlhttp"),Qs(c,d),c.m&&c.o&&mf(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Zc(Wn(d)),f.m=null,f.P=!0,$w(f,c)}t.Za=function(){this.C!=null&&(this.C=null,eu(this),vf(this),Dt(19))};function nu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function mI(c,d){var f=null;if(c.g==d){nu(c),_f(c),c.g=null;var g=2}else if(pf(c.h,d))f=d.D,Kw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=zc(),bt(g,new Lw(g,f)),tu(c)}else pI(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&YM(c,d)||g==2&&vf(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:ii(c,5);break;case 4:ii(c,10);break;case 3:ii(c,6);break;default:ii(c,2)}}}function yI(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ii(c,d){if(c.j.info("Error code "+d),d==2){var f=y(c.fb,c),g=c.Xa;let C=!g;g=new ri(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Qc(g,"https"),Zc(g),C?HM(g.toString(),f):qM(g.toString(),f)}else Dt(2);c.G=0,c.l&&c.l.sa(d),vI(c),dI(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function vI(c){if(c.G=0,c.ka=[],c.l){let d=Qw(c.h);(d.length!=0||c.i.length!=0)&&(P(c.ka,d),P(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function _I(c,d,f){var g=f instanceof ri?Wn(f):new ri(f);if(g.g!="")d&&(g.g=d+"."+g.g),Yc(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new ri(null);g&&Qc(A,g),d&&(A.g=d),C&&Yc(A,C),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Ne(g,f,d),Ne(g,"VER",c.la),Qs(c,g),g}function wI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Oe(new zs({eb:f})):new Oe(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function II(){}t=II.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ru(){}ru.prototype.g=function(c,d){return new Lt(c,d)};function Lt(c,d){pt.call(this),this.g=new lI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!z(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!z(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new to(this)}T(Lt,pt),Lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){yf(this.g)},Lt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=of(c),c=f);d.i.push(new PM(d.Ya++,c)),d.G==3&&tu(d)},Lt.prototype.N=function(){this.g.l=null,delete this.j,yf(this.g),delete this.g,Lt.aa.N.call(this)};function EI(c){af.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}T(EI,af);function bI(){cf.call(this),this.status=1}T(bI,cf);function to(c){this.g=c}T(to,II),to.prototype.ua=function(){bt(this.g,"a")},to.prototype.ta=function(c){bt(this.g,new EI(c))},to.prototype.sa=function(c){bt(this.g,new bI)},to.prototype.ra=function(){bt(this.g,"b")},ru.prototype.createWebChannel=ru.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,yy=fr.createWebChannelTransport=function(){return new ru},my=fr.getStatEventTarget=function(){return zc()},gy=fr.Event=ti,Ed=fr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gc.NO_ERROR=0,Gc.TIMEOUT=8,Gc.HTTP_ERROR=6,cc=fr.ErrorCode=Gc,jw.COMPLETE="complete",py=fr.EventType=jw,kw.EventType=Vs,Vs.OPEN="a",Vs.CLOSE="b",Vs.ERROR="c",Vs.MESSAGE="d",pt.prototype.listen=pt.prototype.K,ts=fr.WebChannel=kw,X2=fr.FetchXmlHttpFactory=zs,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,fy=fr.XhrIo=Oe}).apply(typeof Id<"u"?Id:typeof self<"u"?self:typeof window<"u"?window:{});var _T="@firebase/firestore",wT="4.7.9";var rt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};rt.UNAUTHENTICATED=new rt(null),rt.GOOGLE_CREDENTIALS=new rt("google-credentials-uid"),rt.FIRST_PARTY=new rt("first-party-uid"),rt.MOCK_USER=new rt("mock-user");var Cs="11.4.0";var Vi=new On("@firebase/firestore");function ns(){return Vi.logLevel}function B(t,...e){if(Vi.logLevel<=le.DEBUG){let n=e.map(c_);Vi.debug(`Firestore (${Cs}): ${t}`,...n)}}function pr(t,...e){if(Vi.logLevel<=le.ERROR){let n=e.map(c_);Vi.error(`Firestore (${Cs}): ${t}`,...n)}}function ls(t,...e){if(Vi.logLevel<=le.WARN){let n=e.map(c_);Vi.warn(`Firestore (${Cs}): ${t}`,...n)}}function c_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function W(t="Unexpected state"){let e=`FIRESTORE (${Cs}) INTERNAL ASSERTION FAILED: `+t;throw pr(e),new Error(e)}function Ce(t,e){t||W()}function X(t,e){return t}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends lt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ln=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Rd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ey=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(rt.UNAUTHENTICATED))}shutdown(){}},by=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Dy=class{constructor(e){this.t=e,this.currentUser=rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Ln;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ln,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ln)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string"),new Rd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string"),new rt(e)}},Cy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=rt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},Ty=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Cy(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Md=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Sy=class{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Gt(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){Ce(this.o===void 0);let r=o=>{o.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,B("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Md(this.V));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string"),this.R=n.token,new Md(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function ej(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Nd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=ej(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function ge(t,e){return t<e?-1:t>e?1:0}function ds(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var IT=-62135596800,ET=1e6,ht=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ET);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<IT)throw new $(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ET}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-IT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var te=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new ht(0,0))}static max(){return new t(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var bT="__name__",xd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&W(),r===void 0?r=e.length-n:r>e.length-n&&W(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Math.sign(e.length-n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):e<n?-1:e>n?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hr.fromString(e.substring(4,e.length-2))}},ke=class t extends xd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},tj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Wt=class t extends xd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return tj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bT}static keyField(){return new t([bT])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new $(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new $(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var q=class t{constructor(e){this.path=e}static fromPath(e){return new t(ke.fromString(e))}static fromName(e){return new t(ke.fromString(e).popFirst(5))}static empty(){return new t(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ke(e.slice()))}};var pc=-1,Ay=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Ay.UNKNOWN_ID=-1;function nj(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new ht(n+1,0):new ht(n,r));return new Li(i,q.empty(),e)}function rj(t){return new Li(t.readTime,t.key,pc)}var Li=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(te.min(),q.empty(),pc)}static max(){return new t(te.max(),q.empty(),pc)}};function ij(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}var oj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ry=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ts(t){return v(this,null,function*(){if(t.code!==x.FAILED_PRECONDITION||t.message!==oj)throw t;B("LocalStore","Unexpectedly lost primary lease")})}var k=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&W(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function sj(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ss(t){return t.name==="IndexedDbTransactionError"}var u_=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this._e&&this._e(n),n}}t.ae=-1;return t})(),l_=-1;function ah(t){return t==null}function gc(t){return t===0&&1/t==-1/0}function aj(t){return typeof t=="number"&&Number.isInteger(t)&&!gc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var uS="";function cj(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=DT(e)),e=uj(t.get(n),e);return DT(e)}function uj(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case uS:n+="";break;default:n+=o}}return n}function DT(t){return t+uS+""}var lj="remoteDocuments",lS="owner";var dS="mutationQueues";var hS="mutations";var fS="documentMutations",dj="remoteDocumentsV14";var pS="remoteDocumentGlobal";var gS="targets";var mS="targetDocuments";var yS="targetGlobal",vS="collectionParents";var _S="clientMetadata";var wS="bundles";var IS="namedQueries";var hj="indexConfiguration";var fj="indexState";var pj="indexEntries";var ES="documentOverlays";var gj="globals";var mj=[dS,hS,fS,lj,gS,lS,yS,mS,_S,pS,vS,wS,IS],v5=[...mj,ES],yj=[dS,hS,fS,dj,gS,lS,yS,mS,_S,pS,vS,wS,IS,ES],vj=yj,_j=[...vj,hj,fj,pj];var _5=[..._j,gj];function CT(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ve=class t{constructor(e,n){this.comparator=e,this.root=n||jn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ss(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ss(this.root,e,this.comparator,!1)}getReverseIterator(){return new ss(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ss(this.root,e,this.comparator,!0)}},ss=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},jn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw W();let e=this.left.check();if(e!==this.right.check())throw W();return e+(this.isRed()?0:1)}};jn.EMPTY=null,jn.RED=!0,jn.BLACK=!1;jn.EMPTY=new class{constructor(){this.size=0}get key(){throw W()}get value(){throw W()}get color(){throw W()}get left(){throw W()}get right(){throw W()}copy(e,n,r,i,o){return this}insert(e,n,r){return new jn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var it=class t{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Pd(this.data.getIterator())}getIteratorFrom(e){return new Pd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Pd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Vn=class t{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new t([])}unionWith(e){let n=new it(Wt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ds(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var kd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var It=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new kd("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};It.EMPTY_BYTE_STRING=new It("");var wj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(t){if(Ce(!!t),typeof t=="string"){let e=0,n=wj.exec(t);if(Ce(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pe(t.seconds),nanos:Pe(t.nanos)}}function Pe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mr(t){return typeof t=="string"?It.fromBase64String(t):It.fromUint8Array(t)}var DS="server_timestamp",CS="__type__",TS="__previous_value__",SS="__local_write_time__";function d_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[CS])===null||n===void 0?void 0:n.stringValue)===DS}function ch(t){let e=t.mapValue.fields[TS];return d_(e)?ch(e):e}function mc(t){let e=gr(t.mapValue.fields[SS].timestampValue);return new ht(e.seconds,e.nanos)}var My=class{constructor(e,n,r,i,o,s,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Od="(default)",Fd=class t{constructor(e,n){this.projectId=e,this.database=n||Od}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Od}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var h_="__type__",AS="__max__",bd={mapValue:{fields:{__type__:{stringValue:AS}}}},f_="__vector__",hs="value";function Kr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?d_(t)?4:MS(t)?9007199254740991:RS(t)?10:11:W()}function $n(t,e){if(t===e)return!0;let n=Kr(t);if(n!==Kr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mc(t).isEqual(mc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=gr(i.timestampValue),a=gr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return mr(i.bytesValue).isEqual(mr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Pe(i.geoPointValue.latitude)===Pe(o.geoPointValue.latitude)&&Pe(i.geoPointValue.longitude)===Pe(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Pe(i.integerValue)===Pe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Pe(i.doubleValue),a=Pe(o.doubleValue);return s===a?gc(s)===gc(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return ds(t.arrayValue.values||[],e.arrayValue.values||[],$n);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(CT(s)!==CT(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!$n(s[u],a[u])))return!1;return!0}(t,e);default:return W()}}function yc(t,e){return(t.values||[]).find(n=>$n(n,e))!==void 0}function fs(t,e){if(t===e)return 0;let n=Kr(t),r=Kr(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Pe(o.integerValue||o.doubleValue),u=Pe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return TT(t.timestampValue,e.timestampValue);case 4:return TT(mc(t),mc(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(o,s){let a=mr(o),u=mr(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ge(a[l],u[l]);if(h!==0)return h}return ge(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ge(Pe(o.latitude),Pe(s.latitude));return a!==0?a:ge(Pe(o.longitude),Pe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ST(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},y=s.fields||{},m=(a=p[hs])===null||a===void 0?void 0:a.arrayValue,T=(u=y[hs])===null||u===void 0?void 0:u.arrayValue,N=ge(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((h=T?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:ST(m,T)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===bd.mapValue&&s===bd.mapValue)return 0;if(o===bd.mapValue)return 1;if(s===bd.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let y=ge(u[p],h[p]);if(y!==0)return y;let m=fs(a[u[p]],l[h[p]]);if(m!==0)return m}return ge(u.length,h.length)}(t.mapValue,e.mapValue);default:throw W()}}function TT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);let n=gr(t),r=gr(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function ST(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=fs(n[i],r[i]);if(o)return o}return ge(n.length,r.length)}function ps(t){return Ny(t)}function Ny(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=gr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return mr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Ny(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Ny(n.fields[s])}`;return i+"}"}(t.mapValue):W()}function Td(t){switch(Kr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=ch(t);return e?16+Td(e):16;case 5:return 2*t.stringValue.length;case 6:return mr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Td(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return qi(r.fields,(o,s)=>{i+=o.length+Td(s)}),i}(t.mapValue);default:throw W()}}function AT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xy(t){return!!t&&"integerValue"in t}function p_(t){return!!t&&"arrayValue"in t}function RT(t){return!!t&&"nullValue"in t}function MT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Sd(t){return!!t&&"mapValue"in t}function RS(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[h_])===null||n===void 0?void 0:n.stringValue)===f_}function lc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return qi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=lc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=lc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function MS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===AS}var I5={mapValue:{fields:{[h_]:{stringValue:f_},[hs]:{arrayValue:{}}}}};var wn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Sd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=lc(n)}setAll(e){let n=Wt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=lc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Sd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $n(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Sd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){qi(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(lc(this.value))}};function NS(t){let e=[];return qi(t.fields,(n,r)=>{let i=new Wt([n]);if(Sd(r)){let o=NS(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Vn(e)}var In=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,te.min(),te.min(),te.min(),wn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,te.min(),te.min(),wn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,te.min(),te.min(),wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var gs=class{constructor(e,n){this.position=e,this.inclusive=n}};function NT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=q.comparator(q.fromName(s.referenceValue),n.key):r=fs(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function xT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!$n(t.position[n],e.position[n]))return!1;return!0}var ms=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Ij(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Vd=class{},We=class t extends Vd{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ky(e,n,r):n==="array-contains"?new Vy(e,r):n==="in"?new Ly(e,r):n==="not-in"?new jy(e,r):n==="array-contains-any"?new Uy(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Oy(e,r):new Fy(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(fs(n,this.value)):n!==null&&Kr(this.value)===Kr(n)&&this.matchesComparison(fs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},En=class t extends Vd{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new t(e,n)}matches(e){return xS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}};function xS(t){return t.op==="and"}function PS(t){return Ej(t)&&xS(t)}function Ej(t){for(let e of t.filters)if(e instanceof En)return!1;return!0}function Py(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+ps(t.value);if(PS(t))return t.filters.map(e=>Py(e)).join(",");{let e=t.filters.map(n=>Py(n)).join(",");return`${t.op}(${e})`}}function kS(t,e){return t instanceof We?function(r,i){return i instanceof We&&r.op===i.op&&r.field.isEqual(i.field)&&$n(r.value,i.value)}(t,e):t instanceof En?function(r,i){return i instanceof En&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&kS(s,i.filters[a]),!0):!1}(t,e):void W()}function OS(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${ps(n.value)}`}(t):t instanceof En?function(n){return n.op.toString()+" {"+n.getFilters().map(OS).join(" ,")+"}"}(t):"Filter"}var ky=class extends We{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){let n=q.comparator(e.key,this.key);return this.matchesComparison(n)}},Oy=class extends We{constructor(e,n){super(e,"in",n),this.keys=FS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Fy=class extends We{constructor(e,n){super(e,"not-in",n),this.keys=FS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function FS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}var Vy=class extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return p_(n)&&yc(n.arrayValue,this.value)}},Ly=class extends We{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&yc(this.value.arrayValue,n)}},jy=class extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!yc(this.value.arrayValue,n)}},Uy=class extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!p_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>yc(this.value.arrayValue,r))}};var By=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.le=null}};function PT(t,e=null,n=[],r=[],i=null,o=null,s=null){return new By(t,e,n,r,i,o,s)}function g_(t){let e=X(t);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Py(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),ah(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ps(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ps(r)).join(",")),e.le=n}return e.le}function m_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ij(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!kS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xT(t.startAt,e.startAt)&&xT(t.endAt,e.endAt)}function $y(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ji=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}};function bj(t,e,n,r,i,o,s,a){return new ji(t,e,n,r,i,o,s,a)}function VS(t){return new ji(t)}function kT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function LS(t){return t.collectionGroup!==null}function dc(t){let e=X(t);if(e.he===null){e.he=[];let n=new Set;for(let o of e.explicitOrderBy)e.he.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new it(Wt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.he.push(new ms(o,r))}),n.has(Wt.keyField().canonicalString())||e.he.push(new ms(Wt.keyField(),r))}return e.he}function Un(t){let e=X(t);return e.Pe||(e.Pe=Dj(e,dc(t))),e.Pe}function Dj(t,e){if(t.limitType==="F")return PT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ms(i.field,o)});let n=t.endAt?new gs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new gs(t.startAt.position,t.startAt.inclusive):null;return PT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Hy(t,e){let n=t.filters.concat([e]);return new ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function qy(t,e,n){return new ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function uh(t,e){return m_(Un(t),Un(e))&&t.limitType===e.limitType}function jS(t){return`${g_(Un(t))}|lt:${t.limitType}`}function rs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>OS(i)).join(", ")}]`),ah(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ps(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ps(i)).join(",")),`Target(${r})`}(Un(t))}; limitType=${t.limitType})`}function lh(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of dc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=NT(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,dc(r),i)||r.endAt&&!function(s,a,u){let l=NT(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,dc(r),i))}(t,e)}function Cj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function US(t){return(e,n)=>{let r=!1;for(let i of dc(t)){let o=Tj(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Tj(t,e,n){let r=t.field.isKeyField()?q.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?fs(u,l):W()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return W()}}var yr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qi(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return bS(this.inner)}size(){return this.innerSize}};var Sj=new Ve(q.comparator);function vr(){return Sj}var BS=new Ve(q.comparator);function uc(...t){let e=BS;for(let n of t)e=e.insert(n.key,n);return e}function $S(t){let e=BS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Oi(){return hc()}function HS(){return hc()}function hc(){return new yr(t=>t.toString(),(t,e)=>t.isEqual(e))}var Aj=new Ve(q.comparator),Rj=new it(q.comparator);function fe(...t){let e=Rj;for(let n of t)e=e.add(n);return e}var Mj=new it(ge);function Nj(){return Mj}function y_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gc(e)?"-0":e}}function qS(t){return{integerValue:""+t}}function xj(t,e){return aj(e)?qS(e):y_(t,e)}var ys=class{constructor(){this._=void 0}};function Pj(t,e,n){return t instanceof vs?function(i,o){let s={fields:{[CS]:{stringValue:DS},[SS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&d_(o)&&(o=ch(o)),o&&(s.fields[TS]=o),{mapValue:s}}(n,e):t instanceof Ui?GS(t,e):t instanceof Bi?WS(t,e):function(i,o){let s=zS(i,o),a=OT(s)+OT(i.Ie);return xy(s)&&xy(i.Ie)?qS(a):y_(i.serializer,a)}(t,e)}function kj(t,e,n){return t instanceof Ui?GS(t,e):t instanceof Bi?WS(t,e):n}function zS(t,e){return t instanceof _s?function(r){return xy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var vs=class extends ys{},Ui=class extends ys{constructor(e){super(),this.elements=e}};function GS(t,e){let n=KS(e);for(let r of t.elements)n.some(i=>$n(i,r))||n.push(r);return{arrayValue:{values:n}}}var Bi=class extends ys{constructor(e){super(),this.elements=e}};function WS(t,e){let n=KS(e);for(let r of t.elements)n=n.filter(i=>!$n(i,r));return{arrayValue:{values:n}}}var _s=class extends ys{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function OT(t){return Pe(t.integerValue||t.doubleValue)}function KS(t){return p_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Oj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ui&&i instanceof Ui||r instanceof Bi&&i instanceof Bi?ds(r.elements,i.elements,$n):r instanceof _s&&i instanceof _s?$n(r.Ie,i.Ie):r instanceof vs&&i instanceof vs}(t.transform,e.transform)}var zy=class{constructor(e,n){this.version=e,this.transformResults=n}},Gr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ad(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ws=class{};function QS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new vc(t.key,Gr.none()):new $i(t.key,t.data,Gr.none());{let n=t.data,r=wn.empty(),i=new it(Wt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new _r(t.key,r,new Vn(i.toArray()),Gr.none())}}function Fj(t,e,n){t instanceof $i?function(i,o,s){let a=i.value.clone(),u=VT(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof _r?function(i,o,s){if(!Ad(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=VT(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(YS(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function fc(t,e,n,r){return t instanceof $i?function(o,s,a,u){if(!Ad(o.precondition,s))return a;let l=o.value.clone(),h=LT(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof _r?function(o,s,a,u){if(!Ad(o.precondition,s))return a;let l=LT(o.fieldTransforms,u,s),h=s.data;return h.setAll(YS(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return Ad(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function Vj(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=zS(r.transform,i||null);o!=null&&(n===null&&(n=wn.empty()),n.set(r.field,o))}return n||null}function FT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ds(r,i,(o,s)=>Oj(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var $i=class extends ws{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},_r=class extends ws{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function YS(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function VT(t,e,n){let r=new Map;Ce(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,kj(s,a,n[i]))}return r}function LT(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,Pj(o,s,e))}return r}var vc=class extends ws{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Gy=class extends ws{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Wy=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Fj(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=fc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=fc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=HS();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=QS(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&ds(this.mutations,e.mutations,(n,r)=>FT(n,r))&&ds(this.baseMutations,e.baseMutations,(n,r)=>FT(n,r))}},Ky=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ce(e.mutations.length===r.length);let i=function(){return Aj}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Qy=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Yy=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ze,ye;function Lj(t){switch(t){case x.OK:return W();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0;default:return W()}}function ZS(t){if(t===void 0)return pr("GRPC error has no .code"),x.UNKNOWN;switch(t){case ze.OK:return x.OK;case ze.CANCELLED:return x.CANCELLED;case ze.UNKNOWN:return x.UNKNOWN;case ze.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case ze.INTERNAL:return x.INTERNAL;case ze.UNAVAILABLE:return x.UNAVAILABLE;case ze.UNAUTHENTICATED:return x.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case ze.NOT_FOUND:return x.NOT_FOUND;case ze.ALREADY_EXISTS:return x.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return x.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case ze.ABORTED:return x.ABORTED;case ze.OUT_OF_RANGE:return x.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return x.UNIMPLEMENTED;case ze.DATA_LOSS:return x.DATA_LOSS;default:return W()}}(ye=ze||(ze={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var jT=null;function jj(){return new TextEncoder}var Uj=new hr([4294967295,4294967295],0);function UT(t){let e=jj().encode(t),n=new hy;return n.update(e),new Uint8Array(n.digest())}function BT(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new hr([n,r],0),new hr([i,o],0)]}var Zy=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Fi(`Invalid padding: ${n}`);if(r<0)throw new Fi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Fi(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=hr.fromNumber(this.Ee)}Ae(e,n,r){let i=e.add(n.multiply(hr.fromNumber(r)));return i.compare(Uj)===1&&(i=new hr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;let n=UT(e),[r,i]=BT(n);for(let o=0;o<this.hashCount;o++){let s=this.Ae(r,i,o);if(!this.Re(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ee===0)return;let n=UT(e),[r,i]=BT(n);for(let o=0;o<this.hashCount;o++){let s=this.Ae(r,i,o);this.Ve(s)}}Ve(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Fi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ld=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,_c.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(te.min(),i,new Ve(ge),vr(),fe())}},_c=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,fe(),fe(),fe())}};var cs=class{constructor(e,n,r,i){this.me=e,this.removedTargetIds=n,this.key=r,this.fe=i}},jd=class{constructor(e,n){this.targetId=e,this.ge=n}},Ud=class{constructor(e,n,r=It.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Bd=class{constructor(){this.pe=0,this.ye=$T(),this.we=It.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=fe(),n=fe(),r=fe();return this.ye.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:W()}}),new _c(this.we,this.be,e,n,r)}Me(){this.Se=!1,this.ye=$T()}xe(e,n){this.Se=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ce(this.pe>=0)}Le(){this.Se=!0,this.be=!0}},Jy=class{constructor(e){this.ke=e,this.qe=new Map,this.Qe=vr(),this.$e=Dd(),this.Ke=Dd(),this.Ue=new Ve(ge)}We(e){for(let n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(let n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{let r=this.He(n);switch(e.state){case 0:this.Je(n)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(n);break;case 3:this.Je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Ce(e.resumeToken));break;default:W()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((r,i)=>{this.Je(i)&&n(i)})}Ze(e){let n=e.targetId,r=e.ge.count,i=this.Xe(n);if(i){let o=i.target;if($y(o))if(r===0){let s=new q(o.path);this.ze(n,s,In.newNoDocument(s,te.min()))}else Ce(r===1);else{let s=this.et(n);if(s!==r){let a=this.tt(e),u=a?this.nt(a,e,s):1;if(u!==0){this.Ye(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(n,l)}jT?.rt(function(h,p,y,m,T){var N,P,j,z,ne,Me;let Et={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},Te=p.unchangedNames;return Te&&(Et.bloomFilter={applied:T===0,hashCount:(N=Te?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(z=(j=(P=Te?.bits)===null||P===void 0?void 0:P.bitmap)===null||j===void 0?void 0:j.length)!==null&&z!==void 0?z:0,padding:(Me=(ne=Te?.bits)===null||ne===void 0?void 0:ne.padding)!==null&&Me!==void 0?Me:0,mightContain:b=>{var _;return(_=m?.mightContain(b))!==null&&_!==void 0&&_}}),Et}(s,e.ge,this.ke.it(),a,u))}}}}tt(e){let n=e.ge.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=mr(r).toUint8Array()}catch(u){if(u instanceof kd)return ls("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Zy(s,i,o)}catch(u){return ls(u instanceof Fi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ee===0?null:a}nt(e,n,r){return n.ge.count===r-this.st(e,n.targetId)?0:2}st(e,n){let r=this.ke.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.ke.it(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.ze(n,o,null),i++)}),i}ot(e){let n=new Map;this.qe.forEach((o,s)=>{let a=this.Xe(s);if(a){if(o.current&&$y(a.target)){let u=new q(a.target.path);this._t(u).has(s)||this.ut(s,u)||this.ze(s,u,In.newNoDocument(u,e))}o.ve&&(n.set(s,o.Fe()),o.Me())}});let r=fe();this.Ke.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Xe(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.Qe.forEach((o,s)=>s.setReadTime(e));let i=new Ld(e,n,this.Ue,this.Qe,r);return this.Qe=vr(),this.$e=Dd(),this.Ke=Dd(),this.Ue=new Ve(ge),i}Ge(e,n){if(!this.Je(e))return;let r=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,r),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ke=this.Ke.insert(n.key,this.ct(n.key).add(e))}ze(e,n,r){if(!this.Je(e))return;let i=this.He(e);this.ut(e,n)?i.xe(n,1):i.Oe(n),this.Ke=this.Ke.insert(n,this.ct(n).delete(e)),this.Ke=this.Ke.insert(n,this.ct(n).add(e)),r&&(this.Qe=this.Qe.insert(n,r))}removeTarget(e){this.qe.delete(e)}et(e){let n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new Bd,this.qe.set(e,n)),n}ct(e){let n=this.Ke.get(e);return n||(n=new it(ge),this.Ke=this.Ke.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new it(ge),this.$e=this.$e.insert(e,n)),n}Je(e){let n=this.Xe(e)!==null;return n||B("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){let n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Bd),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}};function Dd(){return new Ve(q.comparator)}function $T(){return new Ve(q.comparator)}var Bj={asc:"ASCENDING",desc:"DESCENDING"},$j={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hj={and:"AND",or:"OR"},Xy=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function ev(t,e){return t.useProto3Json||ah(e)?e:{value:e}}function $d(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qj(t,e){return $d(t,e.toTimestamp())}function Bn(t){return Ce(!!t),te.fromTimestamp(function(n){let r=gr(n);return new ht(r.seconds,r.nanos)}(t))}function v_(t,e){return tv(t,e).canonicalString()}function tv(t,e){let n=function(i){return new ke(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function XS(t){let e=ke.fromString(t);return Ce(iA(e)),e}function nv(t,e){return v_(t.databaseId,e.path)}function vy(t,e){let n=XS(e);if(n.get(1)!==t.databaseId.projectId)throw new $(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(tA(n))}function eA(t,e){return v_(t.databaseId,e)}function zj(t){let e=XS(t);return e.length===4?ke.emptyPath():tA(e)}function rv(t){return new ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function tA(t){return Ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function HT(t,e,n){return{name:nv(t,e),fields:n.value.mapValue.fields}}function Gj(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:W()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Ce(h===void 0||typeof h=="string"),It.fromBase64String(h||"")):(Ce(h===void 0||h instanceof Buffer||h instanceof Uint8Array),It.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:ZS(l.code);return new $(h,l.message||"")}(s);n=new Ud(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=vy(t,r.document.name),o=Bn(r.document.updateTime),s=r.document.createTime?Bn(r.document.createTime):te.min(),a=new wn({mapValue:{fields:r.document.fields}}),u=In.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new cs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=vy(t,r.document),o=r.readTime?Bn(r.readTime):te.min(),s=In.newNoDocument(i,o),a=r.removedTargetIds||[];n=new cs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=vy(t,r.document),o=r.removedTargetIds||[];n=new cs([],o,i,null)}else{if(!("filter"in e))return W();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Yy(i,o),a=r.targetId;n=new jd(a,s)}}return n}function Wj(t,e){let n;if(e instanceof $i)n={update:HT(t,e.key,e.value)};else if(e instanceof vc)n={delete:nv(t,e.key)};else if(e instanceof _r)n={update:HT(t,e.key,e.data),updateMask:nU(e.fieldMask)};else{if(!(e instanceof Gy))return W();n={verify:nv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof vs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ui)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Bi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof _s)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw W()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:qj(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:W()}(t,e.precondition)),n}function Kj(t,e){return t&&t.length>0?(Ce(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Bn(i.updateTime):Bn(o);return s.isEqual(te.min())&&(s=Bn(o)),new zy(s,i.transformResults||[])}(n,e))):[]}function Qj(t,e){return{documents:[eA(t,e.path)]}}function Yj(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=eA(t,i);let o=function(l){if(l.length!==0)return rA(En.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(y){return{field:is(y.field),direction:Xj(y.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=ev(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ht:n,parent:i}}function Zj(t){let e=zj(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ce(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let y=nA(p);return y instanceof En&&PS(y)?y.getFilters():[y]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(y=>function(T){return new ms(os(T.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(y))}(n.orderBy));let a=null;n.limit&&(a=function(p){let y;return y=typeof p=="object"?p.value:p,ah(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(p){let y=!!p.before,m=p.values||[];return new gs(m,y)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let y=!p.before,m=p.values||[];return new gs(m,y)}(n.endAt)),bj(e,i,s,o,a,"F",u,l)}function Jj(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=os(n.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=os(n.unaryFilter.field);return We.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=os(n.unaryFilter.field);return We.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=os(n.unaryFilter.field);return We.create(s,"!=",{nullValue:"NULL_VALUE"});default:return W()}}(t):t.fieldFilter!==void 0?function(n){return We.create(os(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return W()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return En.create(n.compositeFilter.filters.map(r=>nA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W()}}(n.compositeFilter.op))}(t):W()}function Xj(t){return Bj[t]}function eU(t){return $j[t]}function tU(t){return Hj[t]}function is(t){return{fieldPath:t.canonicalString()}}function os(t){return Wt.fromServerFormat(t.fieldPath)}function rA(t){return t instanceof We?function(n){if(n.op==="=="){if(MT(n.value))return{unaryFilter:{field:is(n.field),op:"IS_NAN"}};if(RT(n.value))return{unaryFilter:{field:is(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(MT(n.value))return{unaryFilter:{field:is(n.field),op:"IS_NOT_NAN"}};if(RT(n.value))return{unaryFilter:{field:is(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:is(n.field),op:eU(n.op),value:n.value}}}(t):t instanceof En?function(n){let r=n.getFilters().map(i=>rA(i));return r.length===1?r[0]:{compositeFilter:{op:tU(n.op),filters:r}}}(t):W()}function nU(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function iA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var wc=class t{constructor(e,n,r,i,o=te.min(),s=te.min(),a=It.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var iv=class{constructor(e){this.Tt=e}};function rU(t){let e=Zj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?qy(e,e.limit,"L"):e}var Hd=class{constructor(){}At(e,n){this.Rt(e,n),n.Vt()}Rt(e,n){if("nullValue"in e)this.ft(n,5);else if("booleanValue"in e)this.ft(n,10),n.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(n,15),n.gt(Pe(e.integerValue));else if("doubleValue"in e){let r=Pe(e.doubleValue);isNaN(r)?this.ft(n,13):(this.ft(n,15),gc(r)?n.gt(0):n.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(n,20),typeof r=="string"&&(r=gr(r)),n.yt(`${r.seconds||""}`),n.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,n),this.bt(n);else if("bytesValue"in e)this.ft(n,30),n.St(mr(e.bytesValue)),this.bt(n);else if("referenceValue"in e)this.Dt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.ft(n,45),n.gt(r.latitude||0),n.gt(r.longitude||0)}else"mapValue"in e?MS(e)?this.ft(n,Number.MAX_SAFE_INTEGER):RS(e)?this.vt(e.mapValue,n):(this.Ct(e.mapValue,n),this.bt(n)):"arrayValue"in e?(this.Ft(e.arrayValue,n),this.bt(n)):W()}wt(e,n){this.ft(n,25),this.Mt(e,n)}Mt(e,n){n.yt(e)}Ct(e,n){let r=e.fields||{};this.ft(n,55);for(let i of Object.keys(r))this.wt(i,n),this.Rt(r[i],n)}vt(e,n){var r,i;let o=e.fields||{};this.ft(n,53);let s=hs,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.ft(n,15),n.gt(Pe(a)),this.wt(s,n),this.Rt(o[s],n)}Ft(e,n){let r=e.values||[];this.ft(n,50);for(let i of r)this.Rt(i,n)}Dt(e,n){this.ft(n,37),q.fromName(e).path.forEach(r=>{this.ft(n,60),this.Mt(r,n)})}ft(e,n){e.gt(n)}bt(e){e.gt(2)}};Hd.xt=new Hd;var ov=class{constructor(){this.Tn=new sv}addToCollectionParentIndex(e,n){return this.Tn.add(n),k.resolve()}getCollectionParents(e,n){return k.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return k.resolve()}deleteFieldIndex(e,n){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,n){return k.resolve()}getDocumentsMatchingTarget(e,n){return k.resolve(null)}getIndexType(e,n){return k.resolve(0)}getFieldIndexes(e,n){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,n){return k.resolve(Li.min())}getMinOffsetFromCollectionGroup(e,n){return k.resolve(Li.min())}updateCollectionGroup(e,n,r){return k.resolve()}updateIndexEntries(e,n){return k.resolve()}},sv=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new it(ke.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new it(ke.comparator)).toArray()}};var E5=new Uint8Array(0);var qT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oA=41943040,on=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(oA,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);var Ic=class t{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new t(0)}static Un(){return new t(-1)}};var zT="LruGarbageCollector",iU=1048576;function GT([t,e],[n,r]){let i=ge(t,n);return i===0?ge(e,r):i}var av=class{constructor(e){this.Hn=e,this.buffer=new it(GT),this.Jn=0}Yn(){return++this.Jn}Zn(e){let n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();GT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},cv=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){B(zT,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Xn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ss(n)?B(zT,"Ignoring IndexedDB error during garbage collection: ",n):yield Ts(n)}yield this.er(3e5)}))}},uv=class{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return k.resolve(u_.ae);let r=new av(n);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.tr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(qT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qT):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ns()<=le.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function oU(t,e){return new uv(t,e)}var lv=class{constructor(){this.changes=new yr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?k.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var dv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var hv=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&fc(r.mutation,i,Vn.empty(),ht.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){let i=Oi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=uc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Oi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=vr(),s=hc(),a=function(){return hc()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof _r)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),fc(h.mutation,l,h.mutation.getFieldMask(),ht.now())):s.set(l.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new dv(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=hc(),i=new Ve((s,a)=>s-a),o=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Vn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||fe()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=HS();h.forEach(y=>{if(!o.has(y)){let m=QS(n.get(y),r.get(y));m!==null&&p.set(y,m),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return k.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):LS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):k.resolve(Oi()),a=pc,u=o;return s.next(l=>k.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?k.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{u=u.insert(h,y)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,fe())).next(h=>({batchId:a,changes:$S(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=uc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=uc();return this.indexManager.getCollectionParents(e,o).next(a=>k.forEach(a,u=>{let l=function(p,y){return new ji(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,y)=>{s=s.insert(p,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,In.newInvalidDocument(h)))});let a=uc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&fc(h.mutation,l,Vn.empty(),ht.now()),lh(n,l)&&(a=a.insert(u,l))}),a})}};var fv=class{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return k.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Bn(i.createTime)}}(n)),k.resolve()}getNamedQuery(e,n){return k.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(i){return{name:i.name,query:rU(i.bundledQuery),readTime:Bn(i.readTime)}}(n)),k.resolve()}};var pv=class{constructor(){this.overlays=new Ve(q.comparator),this.Rr=new Map}getOverlay(e,n){return k.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Oi();return k.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.Et(e,n,o)}),k.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Rr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),k.resolve()}getOverlaysForCollection(e,n,r){let i=Oi(),o=n.length+1,s=new q(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return k.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Ve((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Oi(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Oi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return k.resolve(a)}Et(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Qy(n,r));let o=this.Rr.get(n);o===void 0&&(o=fe(),this.Rr.set(n,o)),this.Rr.set(n,o.add(r.key))}};var gv=class{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,k.resolve()}};var Ec=class{constructor(){this.Vr=new it(Ge.mr),this.gr=new it(Ge.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){let r=new Ge(e,n);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.wr(new Ge(e,n))}br(e,n){e.forEach(r=>this.removeReference(r,n))}Sr(e){let n=new q(new ke([])),r=new Ge(n,e),i=new Ge(n,e+1),o=[];return this.gr.forEachInRange([r,i],s=>{this.wr(s),o.push(s.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){let n=new q(new ke([])),r=new Ge(n,e),i=new Ge(n,e+1),o=fe();return this.gr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ge(e,0),r=this.Vr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ge=class{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return q.comparator(e.key,n.key)||ge(e.Cr,n.Cr)}static pr(e,n){return ge(e.Cr,n.Cr)||q.comparator(e.key,n.key)}};var mv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new it(Ge.mr)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Wy(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Mr=this.Mr.add(new Ge(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(s)}lookupMutationBatch(e,n){return k.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Nr(r),o=i<0?0:i;return k.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?l_:this.Fr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ge(n,0),i=new Ge(n,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,i],s=>{let a=this.Or(s.Cr);o.push(a)}),k.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new it(ge);return n.forEach(i=>{let o=new Ge(i,0),s=new Ge(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,s],a=>{r=r.add(a.Cr)})}),k.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;q.isDocumentKey(o)||(o=o.child(""));let s=new Ge(new q(o),0),a=new it(ge);return this.Mr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Cr)),!0)},s),k.resolve(this.Br(a))}Br(e){let n=[];return e.forEach(r=>{let i=this.Or(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ce(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return k.forEach(n.mutations,i=>{let o=new Ge(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,n){let r=new Ge(n,0),i=this.Mr.firstAfterOrEqual(r);return k.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){let n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var yv=class{constructor(e){this.kr=e,this.docs=function(){return new Ve(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.kr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return k.resolve(r?r.document.mutableCopy():In.newInvalidDocument(n))}getEntries(e,n){let r=vr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():In.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=vr(),s=n.path,a=new q(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||ij(rj(h),r)<=0||(i.has(h.key)||lh(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return k.resolve(o)}getAllFromCollectionGroup(e,n,r,i){W()}qr(e,n){return k.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new vv(this)}getSize(e){return k.resolve(this.size)}},vv=class extends lv{constructor(e){super(),this.Ir=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),k.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}};var _v=class{constructor(e){this.persistence=e,this.Qr=new yr(n=>g_(n),m_),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Ec,this.targetCount=0,this.Ur=Ic.Kn()}forEachTarget(e,n){return this.Qr.forEach((r,i)=>n(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.$r&&(this.$r=n),k.resolve()}zn(e){this.Qr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Ur=new Ic(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,k.resolve()}updateTargetData(e,n){return this.zn(n),k.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Kr.Sr(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Qr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Qr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(o).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,n){let r=this.Qr.get(n)||null;return k.resolve(r)}addMatchingKeys(e,n,r){return this.Kr.yr(n,r),k.resolve()}removeMatchingKeys(e,n,r){this.Kr.br(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),k.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Kr.Sr(n),k.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Kr.vr(n);return k.resolve(r)}containsKey(e,n){return k.resolve(this.Kr.containsKey(n))}};var qd=class{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new u_(0),this.zr=!1,this.zr=!0,this.jr=new gv,this.referenceDelegate=e(this),this.Hr=new _v(this),this.indexManager=new ov,this.remoteDocumentCache=function(i){return new yv(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new iv(n),this.Yr=new fv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Wr[e.toKey()];return r||(r=new mv(n,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,r){B("MemoryPersistence","Starting transaction:",e);let i=new wv(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(o=>this.referenceDelegate.Xr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}ei(e,n){return k.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,n)))}},wv=class extends Ry{constructor(e){super(),this.currentSequenceNumber=e}},Iv=class t{constructor(e){this.persistence=e,this.ti=new Ec,this.ni=null}static ri(e){return new t(e)}get ii(){if(this.ni)return this.ni;throw W()}addReference(e,n,r){return this.ti.addReference(r,n),this.ii.delete(r.toString()),k.resolve()}removeReference(e,n,r){return this.ti.removeReference(r,n),this.ii.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),k.resolve()}removeTarget(e,n){this.ti.Sr(n.targetId).forEach(i=>this.ii.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.ii,r=>{let i=q.fromPath(r);return this.si(e,i).next(o=>{o||n.removeEntry(i,te.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(r=>{r?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return k.or([()=>k.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}},zd=class t{constructor(e,n){this.persistence=e,this.oi=new yr(r=>cj(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=oU(this,n)}static ri(e,n){return new t(e,n)}Zr(){}Xr(e){return k.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){let n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}sr(e){let n=0;return this.rr(e,r=>{n++}).next(()=>n)}rr(e,n){return k.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(o=>o?k.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.qr(e,s=>this.ar(e,s,n).next(a=>{a||(r++,o.removeEntry(s,te.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),k.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),k.resolve()}removeReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),k.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),k.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Td(e.data.value)),n}ar(e,n,r){return k.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.oi.get(n);return k.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Ev=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Hi=r,this.Ji=i}static Yi(e,n){let r=fe(),i=fe();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var bv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Dv=class{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return eT()?8:sj(tt())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.rs(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ss(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new bv;return this._s(e,n,s).next(a=>{if(o.result=a,this.Xi)return this.us(e,n,s,a.size)})}).next(()=>o.result)}us(e,n,r,i){return r.documentReadCount<this.es?(ns()<=le.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",rs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),k.resolve()):(ns()<=le.DEBUG&&B("QueryEngine","Query:",rs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(ns()<=le.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",rs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Un(n))):k.resolve())}rs(e,n){if(kT(n))return k.resolve(null);let r=Un(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=qy(n,null,"F"),r=Un(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=fe(...o);return this.ns.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.cs(n,a);return this.ls(n,l,s,u.readTime)?this.rs(e,qy(n,null,"F")):this.hs(e,l,n,u)}))})))}ss(e,n,r,i){return kT(n)||i.isEqual(te.min())?k.resolve(null):this.ns.getDocuments(e,r).next(o=>{let s=this.cs(n,o);return this.ls(n,s,r,i)?k.resolve(null):(ns()<=le.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),rs(n)),this.hs(e,s,n,nj(i,pc)).next(a=>a))})}cs(e,n){let r=new it(US(e));return n.forEach((i,o)=>{lh(e,o)&&(r=r.add(o))}),r}ls(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}_s(e,n,r){return ns()<=le.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",rs(n)),this.ns.getDocumentsMatchingQuery(e,n,Li.min(),r)}hs(e,n,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var __="LocalStore",sU=3e8,Cv=class{constructor(e,n,r,i){this.persistence=e,this.Ps=n,this.serializer=i,this.Ts=new Ve(ge),this.Is=new yr(o=>g_(o),m_),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hv(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}};function aU(t,e,n,r){return new Cv(t,e,n,r)}function sA(t,e){return v(this,null,function*(){let n=X(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.As(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=fe();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Rs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function cU(t,e){let n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.ds.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,y=p.keys(),m=k.resolve();return y.forEach(T=>{m=m.next(()=>h.getEntry(u,T)).next(N=>{let P=l.docVersions.get(T);Ce(P!==null),N.version.compareTo(P)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=fe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function aA(t){let e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function uU(t,e){let n=X(t),r=e.snapshotVersion,i=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.ds.newChangeBuffer({trackRemovals:!0});i=n.Ts;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(n.Hr.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Hr.addMatchingKeys(o,h.addedDocuments,p)));let m=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(It.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(p,m),function(N,P,j){return N.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=sU?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(y,m,h)&&a.push(n.Hr.updateTargetData(o,m))});let u=vr(),l=fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(lU(o,s,e.documentUpdates).next(h=>{u=h.Vs,l=h.fs})),!r.isEqual(te.min())){let h=n.Hr.getLastRemoteSnapshotVersion(o).next(p=>n.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return k.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Ts=i,o))}function lU(t,e,n){let r=fe(),i=fe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=vr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):B(__,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Vs:s,fs:i}})}function dU(t,e){let n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=l_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hU(t,e){let n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Hr.getTargetData(r,e).next(o=>o?(i=o,k.resolve(i)):n.Hr.allocateTargetId(r).next(s=>(i=new wc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(r.targetId,r),n.Is.set(e,r.targetId)),r})}function Tv(t,e,n){return v(this,null,function*(){let r=X(t),i=r.Ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ss(s))throw s;B(__,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)})}function WT(t,e,n){let r=X(t),i=te.min(),o=fe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=X(u),y=p.Is.get(h);return y!==void 0?k.resolve(p.Ts.get(y)):p.Hr.getTargetData(l,h)}(r,s,Un(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Ps.getDocumentsMatchingQuery(s,e,n?i:te.min(),n?o:fe())).next(a=>(fU(r,Cj(e),a),{documents:a,gs:o})))}function fU(t,e,n){let r=t.Es.get(e)||te.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Es.set(e,r)}var Gd=class{constructor(){this.activeTargetIds=Nj()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Sv=class{constructor(){this.ho=new Gd,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,r){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Gd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Av=class{To(e){}shutdown(){}};var KT="ConnectivityMonitor",Wd=class{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){B(KT,"Network connectivity changed: AVAILABLE");for(let e of this.Vo)e(0)}Ro(){B(KT,"Network connectivity changed: UNAVAILABLE");for(let e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Cd=null;function Rv(){return Cd===null?Cd=function(){return 268435456+Math.round(2147483648*Math.random())}():Cd++,"0x"+Cd.toString(16)}var _y="RestConnection",pU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Mv=class{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===Od?`project_id=${r}`:`project_id=${r}&database_id=${i}`}bo(e,n,r,i,o){let s=Rv(),a=this.So(e,n.toUriEncodedString());B(_y,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,i,o),this.vo(e,a,u,r).then(l=>(B(_y,`Received RPC '${e}' ${s}: `,l),l),l=>{throw ls(_y,`RPC '${e}' ${s} failed with error: `,l,"url: ",a,"request:",r),l})}Co(e,n,r,i,o,s){return this.bo(e,n,r,i,o)}Do(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Cs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}So(e,n){let r=pU[e];return`${this.po}/v1/${n}:${r}`}terminate(){}};var Nv=class{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}};var wt="WebChannelConnection",xv=class extends Mv{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,i){let o=Rv();return new Promise((s,a)=>{let u=new fy;u.setWithCredentials(!0),u.listenOnce(py.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case cc.NO_ERROR:let h=u.getResponseJson();B(wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case cc.TIMEOUT:B(wt,`RPC '${e}' ${o} timed out`),a(new $(x.DEADLINE_EXCEEDED,"Request time out"));break;case cc.HTTP_ERROR:let p=u.getStatus();if(B(wt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let m=y?.error;if(m&&m.status&&m.message){let T=function(P){let j=P.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(j)>=0?j:x.UNKNOWN}(m.status);a(new $(T,m.message))}else a(new $(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new $(x.UNAVAILABLE,"Connection failed."));break;default:W()}}finally{B(wt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);B(wt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",l,r,15)})}Wo(e,n,r){let i=Rv(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=yy(),a=my(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");B(wt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),y=!1,m=!1,T=new Nv({Fo:P=>{m?B(wt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(y||(B(wt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),B(wt,`RPC '${e}' stream ${i} sending:`,P),p.send(P))},Mo:()=>p.close()}),N=(P,j,z)=>{P.listen(j,ne=>{try{z(ne)}catch(Me){setTimeout(()=>{throw Me},0)}})};return N(p,ts.EventType.OPEN,()=>{m||(B(wt,`RPC '${e}' stream ${i} transport opened.`),T.Qo())}),N(p,ts.EventType.CLOSE,()=>{m||(m=!0,B(wt,`RPC '${e}' stream ${i} transport closed`),T.Ko())}),N(p,ts.EventType.ERROR,P=>{m||(m=!0,ls(wt,`RPC '${e}' stream ${i} transport errored:`,P),T.Ko(new $(x.UNAVAILABLE,"The operation could not be completed")))}),N(p,ts.EventType.MESSAGE,P=>{var j;if(!m){let z=P.data[0];Ce(!!z);let ne=z,Me=ne?.error||((j=ne[0])===null||j===void 0?void 0:j.error);if(Me){B(wt,`RPC '${e}' stream ${i} received error:`,Me);let Et=Me.status,Te=function(I){let E=ze[I];if(E!==void 0)return ZS(E)}(Et),b=Me.message;Te===void 0&&(Te=x.INTERNAL,b="Unknown error status: "+Et+" with message "+Me.message),m=!0,T.Ko(new $(Te,b)),p.close()}else B(wt,`RPC '${e}' stream ${i} received:`,z),T.Uo(z)}}),N(a,gy.STAT_EVENT,P=>{P.stat===Ed.PROXY?B(wt,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===Ed.NOPROXY&&B(wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.$o()},0),T}};function wy(){return typeof document<"u"?document:null}function dh(t){return new Xy(t,!0)}var Kd=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Ti=e,this.timerId=n,this.Go=r,this.zo=i,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();let n=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,n-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}};var QT="PersistentStream",Qd=class{constructor(e,n,r,i,o,s,a,u){this.Ti=e,this.n_=r,this.r_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Kd(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}stop(){return v(this,null,function*(){this.u_()&&(yield this.close(0))})}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}T_(){return v(this,null,function*(){if(this.c_())return this.close(0)})}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}close(e,n){return v(this,null,function*(){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(pr(n.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Lo(n)})}A_(){}auth(){this.state=1;let e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===n&&this.V_(r,i)},r=>{e(()=>{let i=new $(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,n){let r=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(()=>v(this,null,function*(){this.state=0,this.start()}))}m_(e){return B(QT,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(B(QT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Pv=class extends Qd{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();let n=Gj(this.serializer,e),r=function(o){if(!("targetChange"in o))return te.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?te.min():s.readTime?Bn(s.readTime):te.min()}(e);return this.listener.p_(n,r)}y_(e){let n={};n.database=rv(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=$y(u)?{documents:Qj(o,u)}:{query:Yj(o,u).ht},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=JS(o,s.resumeToken);let l=ev(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(te.min())>0){a.readTime=$d(o,s.snapshotVersion.toTimestamp());let l=ev(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=Jj(this.serializer,e);r&&(n.labels=r),this.I_(n)}w_(e){let n={};n.database=rv(this.serializer),n.removeTarget=e,this.I_(n)}},kv=class extends Qd{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();let n=Kj(e.writeResults,e.commitTime),r=Bn(e.commitTime);return this.listener.v_(r,n)}C_(){let e={};e.database=rv(this.serializer),this.I_(e)}S_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Wj(this.serializer,r))};this.I_(n)}};var Ov=class{},Fv=class extends Ov{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new $(x.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,n,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.bo(e,tv(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(x.UNKNOWN,o.toString())})}Co(e,n,r,i,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Co(e,tv(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(x.UNKNOWN,s.toString())})}terminate(){this.F_=!0,this.connection.terminate()}},Vv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(pr(n),this.N_=!1):B("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}};var Hi="RemoteStore",Lv=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(s=>{r.enqueueAndForget(()=>v(this,null,function*(){zi(this)&&(B(Hi,"Restarting streams for network reachability change."),yield function(u){return v(this,null,function*(){let l=X(u);l.W_.add(4),yield Rc(l),l.j_.set("Unknown"),l.W_.delete(4),yield hh(l)})}(this))}))}),this.j_=new Vv(r,i)}};function hh(t){return v(this,null,function*(){if(zi(t))for(let e of t.G_)yield e(!0)})}function Rc(t){return v(this,null,function*(){for(let e of t.G_)yield e(!1)})}function cA(t,e){let n=X(t);n.U_.has(e.targetId)||(n.U_.set(e.targetId,e),b_(n)?E_(n):As(n).c_()&&I_(n,e))}function w_(t,e){let n=X(t),r=As(n);n.U_.delete(e),r.c_()&&uA(n,e),n.U_.size===0&&(r.c_()?r.P_():zi(n)&&n.j_.set("Unknown"))}function I_(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}As(t).y_(e)}function uA(t,e){t.H_.Ne(e),As(t).w_(e)}function E_(t){t.H_=new Jy({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.U_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),As(t).start(),t.j_.B_()}function b_(t){return zi(t)&&!As(t).u_()&&t.U_.size>0}function zi(t){return X(t).W_.size===0}function lA(t){t.H_=void 0}function gU(t){return v(this,null,function*(){t.j_.set("Online")})}function mU(t){return v(this,null,function*(){t.U_.forEach((e,n)=>{I_(t,e)})})}function yU(t,e){return v(this,null,function*(){lA(t),b_(t)?(t.j_.q_(e),E_(t)):t.j_.set("Unknown")})}function vU(t,e,n){return v(this,null,function*(){if(t.j_.set("Online"),e instanceof Ud&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.U_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.U_.delete(a),i.H_.removeTarget(a))})}(t,e)}catch(r){B(Hi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Yd(t,r)}else if(e instanceof cs?t.H_.We(e):e instanceof jd?t.H_.Ze(e):t.H_.je(e),!n.isEqual(te.min()))try{let r=yield aA(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.H_.ot(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.U_.get(l);h&&o.U_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.U_.get(u);if(!h)return;o.U_.set(u,h.withResumeToken(It.EMPTY_BYTE_STRING,h.snapshotVersion)),uA(o,u);let p=new wc(h.target,u,l,h.sequenceNumber);I_(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){B(Hi,"Failed to raise snapshot:",r),yield Yd(t,r)}})}function Yd(t,e,n){return v(this,null,function*(){if(!Ss(e))throw e;t.W_.add(1),yield Rc(t),t.j_.set("Offline"),n||(n=()=>aA(t.localStore)),t.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){B(Hi,"Retrying IndexedDB access"),yield n(),t.W_.delete(1),yield hh(t)}))})}function dA(t,e){return e().catch(n=>Yd(t,n,e))}function fh(t){return v(this,null,function*(){let e=X(t),n=Qr(e),r=e.K_.length>0?e.K_[e.K_.length-1].batchId:l_;for(;_U(e);)try{let i=yield dU(e.localStore,r);if(i===null){e.K_.length===0&&n.P_();break}r=i.batchId,wU(e,i)}catch(i){yield Yd(e,i)}hA(e)&&fA(e)})}function _U(t){return zi(t)&&t.K_.length<10}function wU(t,e){t.K_.push(e);let n=Qr(t);n.c_()&&n.b_&&n.S_(e.mutations)}function hA(t){return zi(t)&&!Qr(t).u_()&&t.K_.length>0}function fA(t){Qr(t).start()}function IU(t){return v(this,null,function*(){Qr(t).C_()})}function EU(t){return v(this,null,function*(){let e=Qr(t);for(let n of t.K_)e.S_(n.mutations)})}function bU(t,e,n){return v(this,null,function*(){let r=t.K_.shift(),i=Ky.from(r,e,n);yield dA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield fh(t)})}function DU(t,e){return v(this,null,function*(){e&&Qr(t).b_&&(yield function(r,i){return v(this,null,function*(){if(function(s){return Lj(s)&&s!==x.ABORTED}(i.code)){let o=r.K_.shift();Qr(r).h_(),yield dA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield fh(r)}})}(t,e)),hA(t)&&fA(t)})}function YT(t,e){return v(this,null,function*(){let n=X(t);n.asyncQueue.verifyOperationInProgress(),B(Hi,"RemoteStore received new credentials");let r=zi(n);n.W_.add(3),yield Rc(n),r&&n.j_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),yield hh(n)})}function CU(t,e){return v(this,null,function*(){let n=X(t);e?(n.W_.delete(2),yield hh(n)):e||(n.W_.add(2),yield Rc(n),n.j_.set("Unknown"))})}function As(t){return t.J_||(t.J_=function(n,r,i){let o=X(n);return o.M_(),new Pv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{xo:gU.bind(null,t),No:mU.bind(null,t),Lo:yU.bind(null,t),p_:vU.bind(null,t)}),t.G_.push(e=>v(this,null,function*(){e?(t.J_.h_(),b_(t)?E_(t):t.j_.set("Unknown")):(yield t.J_.stop(),lA(t))}))),t.J_}function Qr(t){return t.Y_||(t.Y_=function(n,r,i){let o=X(n);return o.M_(),new kv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:IU.bind(null,t),Lo:DU.bind(null,t),D_:EU.bind(null,t),v_:bU.bind(null,t)}),t.G_.push(e=>v(this,null,function*(){e?(t.Y_.h_(),yield fh(t)):(yield t.Y_.stop(),t.K_.length>0&&(B(Hi,`Stopping write stream with ${t.K_.length} pending writes`),t.K_=[]))}))),t.Y_}var jv=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ln,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function D_(t,e){if(pr("AsyncQueue",`${e}: ${t}`),Ss(t))return new $(x.UNAVAILABLE,`${e}: ${t}`);throw t}var Zd=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=uc(),this.sortedSet=new Ve(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Jd=class{constructor(){this.Z_=new Ve(q.comparator)}track(e){let n=e.doc.key,r=this.Z_.get(n);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(n):e.type===1&&r.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):W():this.Z_=this.Z_.insert(n,e)}X_(){let e=[];return this.Z_.inorderTraversal((n,r)=>{e.push(r)}),e}},Is=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Zd.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Uv=class{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}},Bv=class{constructor(){this.queries=ZT(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,r){let i=X(n),o=i.queries;i.queries=ZT(),o.forEach((s,a)=>{for(let u of a.ta)u.onError(r)})})(this,new $(x.ABORTED,"Firestore shutting down"))}};function ZT(){return new yr(t=>jS(t),uh)}function TU(t,e){return v(this,null,function*(){let n=X(t),r=3,i=e.query,o=n.queries.get(i);o?!o.na()&&e.ra()&&(r=2):(o=new Uv,r=e.ra()?0:1);try{switch(r){case 0:o.ea=yield n.onListen(i,!0);break;case 1:o.ea=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=D_(s,`Initialization of query '${rs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.ta.push(e),e.sa(n.onlineState),o.ea&&e.oa(o.ea)&&C_(n)})}function SU(t,e){return v(this,null,function*(){let n=X(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.ta.indexOf(e);s>=0&&(o.ta.splice(s,1),o.ta.length===0?i=e.ra()?0:1:!o.na()&&e.ra()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function AU(t,e){let n=X(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.ta)a.oa(i)&&(r=!0);s.ea=i}}r&&C_(n)}function RU(t,e,n){let r=X(t),i=r.queries.get(e);if(i)for(let o of i.ta)o.onError(n);r.queries.delete(e)}function C_(t){t.ia.forEach(e=>{e.next()})}var $v,JT;(JT=$v||($v={}))._a="default",JT.Cache="cache";var Hv=class{constructor(e,n,r){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Is(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;let r=n!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;let n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=Is.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==$v.Cache}};var Xd=class{constructor(e){this.key=e}},eh=class{constructor(e){this.key=e}},qv=class{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=fe(),this.mutatedKeys=fe(),this.ya=US(e),this.wa=new Zd(this.ya)}get ba(){return this.fa}Sa(e,n){let r=n?n.Da:new Jd,i=n?n.wa:this.wa,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),m=lh(this.query,p)?p:null,T=!!y&&this.mutatedKeys.has(y.key),N=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),P=!1;y&&m?y.data.isEqual(m.data)?T!==N&&(r.track({type:3,doc:m}),P=!0):this.va(y,m)||(r.track({type:2,doc:m}),P=!0,(u&&this.ya(m,u)>0||l&&this.ya(m,l)<0)&&(a=!0)):!y&&m?(r.track({type:0,doc:m}),P=!0):y&&!m&&(r.track({type:1,doc:y}),P=!0,(u||l)&&(a=!0)),P&&(m?(s=s.add(m),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{wa:s,Da:r,ls:a,mutatedKeys:o}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;let s=e.Da.X_();s.sort((h,p)=>function(m,T){let N=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W()}};return N(m)-N(T)}(h.type,p.type)||this.ya(h.doc,p.doc)),this.Ca(r),i=i!=null&&i;let a=n&&!i?this.Fa():[],u=this.pa.size===0&&this.current&&!i?1:0,l=u!==this.ga;return this.ga=u,s.length!==0||l?{snapshot:new Is(this.query,e.wa,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Jd,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];let e=this.pa;this.pa=fe(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});let n=[];return e.forEach(r=>{this.pa.has(r)||n.push(new eh(r))}),this.pa.forEach(r=>{e.has(r)||n.push(new Xd(r))}),n}Oa(e){this.fa=e.gs,this.pa=fe();let n=this.Sa(e.documents);return this.applyChanges(n,!0)}Na(){return Is.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}},T_="SyncEngine",zv=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Gv=class{constructor(e){this.key=e,this.Ba=!1}},Wv=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new yr(a=>jS(a),uh),this.qa=new Map,this.Qa=new Set,this.$a=new Ve(q.comparator),this.Ka=new Map,this.Ua=new Ec,this.Wa={},this.Ga=new Map,this.za=Ic.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}};function MU(t,e,n=!0){return v(this,null,function*(){let r=_A(t),i,o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Na()):i=yield pA(r,e,n,!0),i})}function NU(t,e){return v(this,null,function*(){let n=_A(t);yield pA(n,e,!0,!1)})}function pA(t,e,n,r){return v(this,null,function*(){let i=yield hU(t.localStore,Un(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield xU(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&cA(t.remoteStore,i),a})}function xU(t,e,n,r,i){return v(this,null,function*(){t.Ha=(p,y,m)=>function(N,P,j,z){return v(this,null,function*(){let ne=P.view.Sa(j);ne.ls&&(ne=yield WT(N.localStore,P.query,!1).then(({documents:b})=>P.view.Sa(b,ne)));let Me=z&&z.targetChanges.get(P.targetId),Et=z&&z.targetMismatches.get(P.targetId)!=null,Te=P.view.applyChanges(ne,N.isPrimaryClient,Me,Et);return eS(N,P.targetId,Te.Ma),Te.snapshot})}(t,p,y,m);let o=yield WT(t.localStore,e,!0),s=new qv(e,o.gs),a=s.Sa(o.documents),u=_c.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);eS(t,n,l.Ma);let h=new zv(e,n,s);return t.ka.set(e,h),t.qa.has(n)?t.qa.get(n).push(e):t.qa.set(n,[e]),l.snapshot})}function PU(t,e,n){return v(this,null,function*(){let r=X(t),i=r.ka.get(e),o=r.qa.get(i.targetId);if(o.length>1)return r.qa.set(i.targetId,o.filter(s=>!uh(s,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Tv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&w_(r.remoteStore,i.targetId),Kv(r,i.targetId)}).catch(Ts))):(Kv(r,i.targetId),yield Tv(r.localStore,i.targetId,!0))})}function kU(t,e){return v(this,null,function*(){let n=X(t),r=n.ka.get(e),i=n.qa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),w_(n.remoteStore,r.targetId))})}function OU(t,e,n){return v(this,null,function*(){let r=$U(t);try{let i=yield function(s,a){let u=X(s),l=ht.now(),h=a.reduce((m,T)=>m.add(T.key),fe()),p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let T=vr(),N=fe();return u.ds.getEntries(m,h).next(P=>{T=P,T.forEach((j,z)=>{z.isValidDocument()||(N=N.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,T)).next(P=>{p=P;let j=[];for(let z of a){let ne=Vj(z,p.get(z.key).overlayedDocument);ne!=null&&j.push(new _r(z.key,ne,NS(ne.value.mapValue),Gr.exists(!0)))}return u.mutationQueue.addMutationBatch(m,l,j,a)}).next(P=>{y=P;let j=P.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(m,P.batchId,j)})}).then(()=>({batchId:y.batchId,changes:$S(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Wa[s.currentUser.toKey()];l||(l=new Ve(ge)),l=l.insert(a,u),s.Wa[s.currentUser.toKey()]=l}(r,i.batchId,n),yield Mc(r,i.changes),yield fh(r.remoteStore)}catch(i){let o=D_(i,"Failed to persist write");n.reject(o)}})}function gA(t,e){return v(this,null,function*(){let n=X(t);try{let r=yield uU(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Ka.get(o);s&&(Ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ba=!0:i.modifiedDocuments.size>0?Ce(s.Ba):i.removedDocuments.size>0&&(Ce(s.Ba),s.Ba=!1))}),yield Mc(n,r,e)}catch(r){yield Ts(r)}})}function XT(t,e,n){let r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ka.forEach((o,s)=>{let a=s.view.sa(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=X(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let y of p.ta)y.sa(a)&&(l=!0)}),l&&C_(u)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function FU(t,e,n){return v(this,null,function*(){let r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Ka.get(e),o=i&&i.key;if(o){let s=new Ve(q.comparator);s=s.insert(o,In.newNoDocument(o,te.min()));let a=fe().add(o),u=new Ld(te.min(),new Map,new Ve(ge),s,a);yield gA(r,u),r.$a=r.$a.remove(o),r.Ka.delete(e),S_(r)}else yield Tv(r.localStore,e,!1).then(()=>Kv(r,e,n)).catch(Ts)})}function VU(t,e){return v(this,null,function*(){let n=X(t),r=e.batch.batchId;try{let i=yield cU(n.localStore,e);yA(n,r,null),mA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Mc(n,i)}catch(i){yield Ts(i)}})}function LU(t,e,n){return v(this,null,function*(){let r=X(t);try{let i=yield function(s,a){let u=X(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ce(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);yA(r,e,n),mA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Mc(r,i)}catch(i){yield Ts(i)}})}function mA(t,e){(t.Ga.get(e)||[]).forEach(n=>{n.resolve()}),t.Ga.delete(e)}function yA(t,e,n){let r=X(t),i=r.Wa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function Kv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.qa.get(e))t.ka.delete(r),n&&t.La.Ja(r,n);t.qa.delete(e),t.isPrimaryClient&&t.Ua.Sr(e).forEach(r=>{t.Ua.containsKey(r)||vA(t,r)})}function vA(t,e){t.Qa.delete(e.path.canonicalString());let n=t.$a.get(e);n!==null&&(w_(t.remoteStore,n),t.$a=t.$a.remove(e),t.Ka.delete(n),S_(t))}function eS(t,e,n){for(let r of n)r instanceof Xd?(t.Ua.addReference(r.key,e),jU(t,r)):r instanceof eh?(B(T_,"Document no longer in limbo: "+r.key),t.Ua.removeReference(r.key,e),t.Ua.containsKey(r.key)||vA(t,r.key)):W()}function jU(t,e){let n=e.key,r=n.path.canonicalString();t.$a.get(n)||t.Qa.has(r)||(B(T_,"New document in limbo: "+n),t.Qa.add(r),S_(t))}function S_(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){let e=t.Qa.values().next().value;t.Qa.delete(e);let n=new q(ke.fromString(e)),r=t.za.next();t.Ka.set(r,new Gv(n)),t.$a=t.$a.insert(n,r),cA(t.remoteStore,new wc(Un(VS(n.path)),r,"TargetPurposeLimboResolution",u_.ae))}}function Mc(t,e,n){return v(this,null,function*(){let r=X(t),i=[],o=[],s=[];r.ka.isEmpty()||(r.ka.forEach((a,u)=>{s.push(r.Ha(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Ev.Yi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.La.p_(i),yield function(u,l){return v(this,null,function*(){let h=X(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>k.forEach(l,y=>k.forEach(y.Hi,m=>h.persistence.referenceDelegate.addReference(p,y.targetId,m)).next(()=>k.forEach(y.Ji,m=>h.persistence.referenceDelegate.removeReference(p,y.targetId,m)))))}catch(p){if(!Ss(p))throw p;B(__,"Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let m=h.Ts.get(y),T=m.snapshotVersion,N=m.withLastLimboFreeSnapshotVersion(T);h.Ts=h.Ts.insert(y,N)}}})}(r.localStore,o))})}function UU(t,e){return v(this,null,function*(){let n=X(t);if(!n.currentUser.isEqual(e)){B(T_,"User change. New user:",e.toKey());let r=yield sA(n.localStore,e);n.currentUser=e,function(o,s){o.Ga.forEach(a=>{a.forEach(u=>{u.reject(new $(x.CANCELLED,s))})}),o.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Mc(n,r.Rs)}})}function BU(t,e){let n=X(t),r=n.Ka.get(e);if(r&&r.Ba)return fe().add(r.key);{let i=fe(),o=n.qa.get(e);if(!o)return i;for(let s of o){let a=n.ka.get(s);i=i.unionWith(a.view.ba)}return i}}function _A(t){let e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FU.bind(null,e),e.La.p_=AU.bind(null,e.eventManager),e.La.Ja=RU.bind(null,e.eventManager),e}function $U(t){let e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LU.bind(null,e),e}var wA=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return v(this,null,function*(){this.serializer=dh(n.databaseInfo.databaseId),this.sharedClientState=this.Za(n),this.persistence=this.Xa(n),yield this.persistence.start(),this.localStore=this.eu(n),this.gcScheduler=this.tu(n,this.localStore),this.indexBackfillerScheduler=this.nu(n,this.localStore)})}tu(n,r){return null}nu(n,r){return null}eu(n){return aU(this.persistence,new Dv,n.initialUser,this.serializer)}Xa(n){return new qd(Iv.ri,this.serializer)}Za(n){return new Sv}terminate(){return v(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),Qv=class extends wA{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){Ce(this.persistence.referenceDelegate instanceof zd);let r=this.persistence.referenceDelegate.garbageCollector;return new cv(r,e.asyncQueue,n)}Xa(e){let n=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new qd(r=>zd.ri(r,n),this.serializer)}};var HU=(()=>{class t{initialize(n,r){return v(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>XT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=UU.bind(null,this.syncEngine),yield CU(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new Bv}()}createDatastore(n){let r=dh(n.databaseInfo.databaseId),i=function(s){return new xv(s)}(n.databaseInfo);return function(s,a,u,l){return new Fv(s,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,a,u){return new Lv(i,o,s,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>XT(this.syncEngine,r,0),function(){return Wd.D()?new Wd:new Av}())}createSyncEngine(n,r){return function(o,s,a,u,l,h,p){let y=new Wv(o,s,a,u,l,h);return p&&(y.ja=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var n,r;yield function(o){return v(this,null,function*(){let s=X(o);B(Hi,"RemoteStore shutting down."),s.W_.add(5),yield Rc(s),s.z_.shutdown(),s.j_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var Yv=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Yr="FirestoreClient",Zv=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=rt.UNAUTHENTICATED,this.clientId=Nd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){B(Yr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(B(Yr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ln;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=D_(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Iy(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),B(Yr,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>v(this,null,function*(){r.isEqual(i)||(yield sA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function tS(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield qU(t);B(Yr,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>YT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>YT(e.remoteStore,i)),t._onlineComponents=e})}function qU(t){return v(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B(Yr,"Using user provided OfflineComponentProvider");try{yield Iy(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ls("Error using user provided cache. Falling back to memory cache: "+n),yield Iy(t,new wA)}}else B(Yr,"Using default OfflineComponentProvider"),yield Iy(t,new Qv(void 0));return t._offlineComponents})}function IA(t){return v(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(B(Yr,"Using user provided OnlineComponentProvider"),yield tS(t,t._uninitializedComponentsProvider._online)):(B(Yr,"Using default OnlineComponentProvider"),yield tS(t,new HU))),t._onlineComponents})}function zU(t){return IA(t).then(e=>e.syncEngine)}function GU(t){return v(this,null,function*(){let e=yield IA(t),n=e.eventManager;return n.onListen=MU.bind(null,e.syncEngine),n.onUnlisten=PU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=kU.bind(null,e.syncEngine),n})}function WU(t,e,n={}){let r=new Ln;return t.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(o,s,a,u,l){let h=new Yv({next:y=>{h.su(),s.enqueueAndForget(()=>SU(o,p)),y.fromCache&&u.source==="server"?l.reject(new $(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new Hv(a,h,{includeMetadataChanges:!0,Ta:!0});return TU(o,p)}(yield GU(t),t.asyncQueue,e,n,r)})),r.promise}function EA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var nS=new Map;function bA(t,e,n){if(!n)throw new $(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function KU(t,e,n,r){if(e===!0&&r===!0)throw new $(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rS(t){if(!q.isDocumentKey(t))throw new $(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function iS(t){if(q.isDocumentKey(t))throw new $(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ph(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":W()}function bc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=ph(t);throw new $(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var DA="firestore.googleapis.com",oS=!0,th=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=DA,this.ssl=oS}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:oS;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iU)throw new $(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=EA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new $(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new $(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new $(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Es=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new th({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new th(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ey;switch(r.type){case"firstParty":return new Ty(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=nS.get(n);r&&(B("ComponentProvider","Removing Datastore"),nS.delete(n),r.terminate())}(this),Promise.resolve()}};function QU(t,e,n,r={}){var i;let o=(t=bc(t,Es))._getSettings(),s=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),a=`${e}:${n}`;o.host!==DA&&o.host!==a&&ls("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},o),{host:a,ssl:!1,emulatorOptions:r});if(!rn(u,s)&&(t._setSettings(u),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=rt.MOCK_USER;else{l=QC(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new $(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new rt(p)}t._authCredentials=new by(new Rd(l,h))}}var bs=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},sn=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Wr=class t extends bs{constructor(e,n,r){super(e,n,VS(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new q(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Ft(t,e,...n){if(t=qe(t),bA("collection","path",e),t instanceof Es){let r=ke.fromString(e,...n);return iS(r),new Wr(t,null,r)}{if(!(t instanceof sn||t instanceof Wr))throw new $(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ke.fromString(e,...n));return iS(r),new Wr(t.firestore,null,r)}}function A_(t,e,...n){if(t=qe(t),arguments.length===1&&(e=Nd.newId()),bA("doc","path",e),t instanceof Es){let r=ke.fromString(e,...n);return rS(r),new sn(t,null,new q(r))}{if(!(t instanceof sn||t instanceof Wr))throw new $(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ke.fromString(e,...n));return rS(r),new sn(t.firestore,t instanceof Wr?t.converter:null,new q(r))}}var sS="AsyncQueue",nh=class{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Kd(this,"async_queue_retry"),this.bu=()=>{let r=wy();r&&B(sS,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=e;let n=wy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;let n=wy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});let n=new Ln;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}Cu(){return v(this,null,function*(){if(this.Vu.length!==0){try{yield this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Ss(e))throw e;B(sS,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}})}vu(e){let n=this.Su.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw pr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.Su=n,n}enqueueAfterDelay(e,n,r){this.Du(),this.wu.indexOf(e)>-1&&(n=0);let i=jv.createAndSchedule(this,e,n,r,o=>this.Fu(o));return this.fu.push(i),i}Du(){this.gu&&W()}verifyOperationInProgress(){}Mu(){return v(this,null,function*(){let e;do e=this.Su,yield e;while(e!==this.Su)})}xu(e){for(let n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){let n=this.fu.indexOf(e);this.fu.splice(n,1)}};var Ds=class extends Es{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new nh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new nh(e),this._firestoreClient=void 0,yield e}})}};function CA(t,e){let n=typeof t=="object"?t:ki(),r=typeof t=="string"?t:e||Od,i=_n(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=KC("firestore");o&&QU(i,...o)}return i}function TA(t){if(t._terminated)throw new $(x.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||YU(t),t._firestoreClient}function YU(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,l,h){return new My(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,EA(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Zv(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var Dc=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(It.fromBase64String(e))}catch(n){throw new $(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Cc=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var rh=class{constructor(e){this._methodName=e}};var Tc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}};var Sc=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var ZU=/^__.*__$/,Jv=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new _r(e,this.data,this.fieldMask,n,this.fieldTransforms):new $i(e,this.data,n,this.fieldTransforms)}};function SA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W()}}var Xv=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Ku(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return ih(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(SA(this.Lu)&&ZU.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}},e_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||dh(e)}ju(e,n,r,i=!1){return new Xv({Lu:e,methodName:n,zu:r,path:Wt.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function AA(t){let e=t._freezeSettings(),n=dh(t._databaseId);return new e_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function JU(t,e,n,r,i,o={}){let s=t.ju(o.merge||o.mergeFields?2:0,e,n,i);NA("Data must be an object, but it was:",s,r);let a=RA(r,s),u,l;if(o.merge)u=new Vn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let y=eB(e,p,n);if(!s.contains(y))throw new $(x.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);nB(h,y)||h.push(y)}u=new Vn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Jv(new wn(a),u,l)}function XU(t,e,n,r=!1){return R_(n,t.ju(r?4:3,e))}function R_(t,e){if(MA(t=qe(t)))return NA("Unsupported field value:",e,t),RA(t,e);if(t instanceof rh)return function(r,i){if(!SA(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=R_(a,i.Uu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ht.fromDate(r);return{timestampValue:$d(i.serializer,o)}}if(r instanceof ht){let o=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$d(i.serializer,o)}}if(r instanceof Tc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dc)return{bytesValue:JS(i.serializer,r._byteString)};if(r instanceof sn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Wu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:v_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Sc)return function(s,a){return{mapValue:{fields:{[h_]:{stringValue:f_},[hs]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Wu("VectorValues must only contain numeric values.");return y_(a.serializer,l)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${ph(r)}`)}(t,e)}function RA(t,e){let n={};return bS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qi(t,(r,i)=>{let o=R_(i,e.qu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function MA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ht||t instanceof Tc||t instanceof Dc||t instanceof sn||t instanceof rh||t instanceof Sc)}function NA(t,e,n){if(!MA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=ph(n);throw r==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+r)}}function eB(t,e,n){if((e=qe(e))instanceof Cc)return e._internalPath;if(typeof e=="string")return xA(t,e);throw ih("Field path arguments must be of type string or ",t,!1,void 0,n)}var tB=new RegExp("[~\\*/\\[\\]]");function xA(t,e,n){if(e.search(tB)>=0)throw ih(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cc(...e.split("."))._internalPath}catch{throw ih(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ih(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new $(x.INVALID_ARGUMENT,a+t+u)}function nB(t,e){return t.some(n=>n.isEqual(e))}var oh=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new t_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(M_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},t_=class extends oh{data(){return super.data()}};function M_(t,e){return typeof e=="string"?xA(t,e):e instanceof Cc?e._internalPath:e._delegate._internalPath}function rB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ac=class{},n_=class extends Ac{};function gh(t,e,...n){let r=[];e instanceof Ac&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof r_).length,a=o.filter(u=>u instanceof sh).length;if(s>1||s>0&&a>0)throw new $(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var sh=class t extends n_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return PA(e._query,n),new bs(e.firestore,e.converter,Hy(e._query,n))}_parse(e){let n=AA(e.firestore);return function(o,s,a,u,l,h,p){let y;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){cS(p,h);let T=[];for(let N of p)T.push(aS(u,o,N));y={arrayValue:{values:T}}}else y=aS(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||cS(p,h),y=XU(a,s,p,h==="in"||h==="not-in");return We.create(l,h,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function mh(t,e,n){let r=e,i=M_("where",t);return sh._create(i,r,n)}var r_=class t extends Ac{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:En.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)PA(s,u),s=Hy(s,u)}(e._query,n),new bs(e.firestore,e.converter,Hy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function aS(t,e,n){if(typeof(n=qe(n))=="string"){if(n==="")throw new $(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!LS(e)&&n.indexOf("/")!==-1)throw new $(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(ke.fromString(n));if(!q.isDocumentKey(r))throw new $(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return AT(t,new q(r))}if(n instanceof sn)return AT(t,n._key);throw new $(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ph(n)}.`)}function cS(t,e){if(!Array.isArray(t)||t.length===0)throw new $(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PA(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var i_=class{convertValue(e,n="none"){switch(Kr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw W()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return qi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[hs].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Pe(s.doubleValue));return new Sc(o)}convertGeoPoint(e){return new Tc(Pe(e.latitude),Pe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=ch(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(mc(e));default:return null}}convertTimestamp(e){let n=gr(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ke.fromString(e);Ce(iA(r));let i=new Fd(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(n)||pr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function iB(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var as=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},o_=class extends oh{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new us(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(M_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},us=class extends o_{data(e={}){return super.data(e)}},s_=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new as(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new us(this._firestore,this._userDataWriter,r.key,r,new as(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new us(i._firestore,i._userDataWriter,a.doc.key,a.doc,new as(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new us(i._firestore,i._userDataWriter,a.doc.key,a.doc,new as(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:oB(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function oB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W()}}var a_=class extends i_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dc(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,n)}};function bn(t){t=bc(t,bs);let e=bc(t.firestore,Ds),n=TA(e),r=new a_(e);return rB(t._query),WU(n,t._query).then(i=>new s_(e,r,t,i))}function kA(t){return OA(bc(t.firestore,Ds),[new vc(t._key,Gr.none())])}function Nc(t,e){let n=bc(t.firestore,Ds),r=A_(t),i=iB(t.converter,e);return OA(n,[JU(AA(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Gr.exists(!1))]).then(()=>r)}function OA(t,e){return function(r,i){let o=new Ln;return r.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return OU(yield zU(r),i,o)})),o.promise}(TA(t),e)}(function(e,n=!0){(function(i){Cs=i})(zr),Ot(new nt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ds(new Dy(r.getProvider("auth-internal")),new Sy(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new $(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fd(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),dt(_T,wT,e),dt(_T,wT,"esm2017")})();var sB="firebase",aB="11.4.0";dt(sB,aB,"app");var LA="@firebase/installations",k_="0.6.13";var jA=1e4,UA=`w:${k_}`,BA="FIS_v2",cB="https://firebaseinstallations.googleapis.com/v1",uB=60*60*1e3,lB="installations",dB="Installations";var hB={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Wi=new zt(lB,dB,hB);function $A(t){return t instanceof lt&&t.code.includes("request-failed")}function HA({projectId:t}){return`${cB}/projects/${t}/installations`}function qA(t){return{token:t.token,requestStatus:2,expiresIn:pB(t.expiresIn),creationTime:Date.now()}}function zA(t,e){return v(this,null,function*(){let r=(yield e.json()).error;return Wi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function GA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function fB(t,{refreshToken:e}){let n=GA(t);return n.append("Authorization",gB(e)),n}function WA(t){return v(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function pB(t){return Number(t.replace("s","000"))}function gB(t){return`${BA} ${t}`}function mB(r,i){return v(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let o=HA(t),s=GA(t),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={fid:n,authVersion:BA,appId:t.appId,sdkVersion:UA},l={method:"POST",headers:s,body:JSON.stringify(u)},h=yield WA(()=>fetch(o,l));if(h.ok){let p=yield h.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:qA(p.authToken)}}else throw yield zA("Create Installation",h)})}function KA(t){return new Promise(e=>{setTimeout(e,t)})}function yB(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var vB=/^[cdef][\w-]{21}$/,P_="";function _B(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=wB(t);return vB.test(n)?n:P_}catch{return P_}}function wB(t){return yB(t).substr(0,22)}function vh(t){return`${t.appName}!${t.appId}`}var QA=new Map;function YA(t,e){let n=vh(t);ZA(n,e),IB(n,e)}function ZA(t,e){let n=QA.get(t);if(n)for(let r of n)r(e)}function IB(t,e){let n=EB();n&&n.postMessage({key:t,fid:e}),bB()}var Gi=null;function EB(){return!Gi&&"BroadcastChannel"in self&&(Gi=new BroadcastChannel("[Firebase] FID Change"),Gi.onmessage=t=>{ZA(t.data.key,t.data.fid)}),Gi}function bB(){QA.size===0&&Gi&&(Gi.close(),Gi=null)}var DB="firebase-installations-database",CB=1,Ki="firebase-installations-store",N_=null;function O_(){return N_||(N_=_d(DB,CB,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ki)}}})),N_}function yh(t,e){return v(this,null,function*(){let n=vh(t),i=(yield O_()).transaction(Ki,"readwrite"),o=i.objectStore(Ki),s=yield o.get(n);return yield o.put(e,n),yield i.done,(!s||s.fid!==e.fid)&&YA(t,e.fid),e})}function JA(t){return v(this,null,function*(){let e=vh(t),r=(yield O_()).transaction(Ki,"readwrite");yield r.objectStore(Ki).delete(e),yield r.done})}function _h(t,e){return v(this,null,function*(){let n=vh(t),i=(yield O_()).transaction(Ki,"readwrite"),o=i.objectStore(Ki),s=yield o.get(n),a=e(s);return a===void 0?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&YA(t,a.fid),a})}function F_(t){return v(this,null,function*(){let e,n=yield _h(t.appConfig,r=>{let i=TB(r),o=SB(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===P_?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function TB(t){let e=t||{fid:_B(),registrationStatus:0};return XA(e)}function SB(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Wi.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=AB(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:RB(t)}:{installationEntry:e}}function AB(t,e){return v(this,null,function*(){try{let n=yield mB(t,e);return yh(t.appConfig,n)}catch(n){throw $A(n)&&n.customData.serverCode===409?yield JA(t.appConfig):yield yh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function RB(t){return v(this,null,function*(){let e=yield FA(t.appConfig);for(;e.registrationStatus===1;)yield KA(100),e=yield FA(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield F_(t);return r||n}return e})}function FA(t){return _h(t,e=>{if(!e)throw Wi.create("installation-not-found");return XA(e)})}function XA(t){return MB(t)?{fid:t.fid,registrationStatus:0}:t}function MB(t){return t.registrationStatus===1&&t.registrationTime+jA<Date.now()}function NB(r,i){return v(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let o=xB(t,n),s=fB(t,n),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={installation:{sdkVersion:UA,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(u)},h=yield WA(()=>fetch(o,l));if(h.ok){let p=yield h.json();return qA(p)}else throw yield zA("Generate Auth Token",h)})}function xB(t,{fid:e}){return`${HA(t)}/${e}/authTokens:generate`}function V_(t,e=!1){return v(this,null,function*(){let n,r=yield _h(t.appConfig,o=>{if(!eR(o))throw Wi.create("not-registered");let s=o.authToken;if(!e&&OB(s))return o;if(s.requestStatus===1)return n=PB(t,e),o;{if(!navigator.onLine)throw Wi.create("app-offline");let a=VB(o);return n=kB(t,a),a}});return n?yield n:r.authToken})}function PB(t,e){return v(this,null,function*(){let n=yield VA(t.appConfig);for(;n.authToken.requestStatus===1;)yield KA(100),n=yield VA(t.appConfig);let r=n.authToken;return r.requestStatus===0?V_(t,e):r})}function VA(t){return _h(t,e=>{if(!eR(e))throw Wi.create("not-registered");let n=e.authToken;return LB(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function kB(t,e){return v(this,null,function*(){try{let n=yield NB(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield yh(t.appConfig,r),n}catch(n){if($A(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield JA(t.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield yh(t.appConfig,r)}throw n}})}function eR(t){return t!==void 0&&t.registrationStatus===2}function OB(t){return t.requestStatus===2&&!FB(t)}function FB(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+uB}function VB(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function LB(t){return t.requestStatus===1&&t.requestTime+jA<Date.now()}function jB(t){return v(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:r}=yield F_(e);return r?r.catch(console.error):V_(e).catch(console.error),n.fid})}function UB(t,e=!1){return v(this,null,function*(){let n=t;return yield BB(n),(yield V_(n,e)).token})}function BB(t){return v(this,null,function*(){let{registrationPromise:e}=yield F_(t);e&&(yield e)})}function $B(t){if(!t||!t.options)throw x_("App Configuration");if(!t.name)throw x_("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw x_(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function x_(t){return Wi.create("missing-app-config-values",{valueName:t})}var tR="installations",HB="installations-internal",qB=t=>{let e=t.getProvider("app").getImmediate(),n=$B(e),r=_n(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},zB=t=>{let e=t.getProvider("app").getImmediate(),n=_n(e,tR).getImmediate();return{getId:()=>jB(n),getToken:i=>UB(n,i)}};function GB(){Ot(new nt(tR,qB,"PUBLIC")),Ot(new nt(HB,zB,"PRIVATE"))}GB();dt(LA,k_);dt(LA,k_,"esm2017");var wh="analytics",WB="firebase_id",KB="origin",QB=60*1e3,YB="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",q_="https://www.googletagmanager.com/gtag/js";var Vt=new On("@firebase/analytics");var ZB={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Kt=new zt("analytics","Analytics",ZB);function JB(t){if(!t.startsWith(q_)){let e=Kt.create("invalid-gtag-resource",{gtagURL:t});return Vt.warn(e.message),""}return t}function cR(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function XB(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function e$(t,e){let n=XB("firebase-js-sdk-policy",{createScriptURL:JB}),r=document.createElement("script"),i=`${q_}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function t$(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function n$(t,e,n,r,i,o){return v(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let u=(yield cR(n)).find(l=>l.measurementId===i);u&&(yield e[u.appId])}}catch(a){Vt.error(a)}t("config",i,o)})}function r$(t,e,n,r,i){return v(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield cR(n);for(let u of s){let l=a.find(p=>p.measurementId===u),h=l&&e[l.appId];if(h)o.push(h);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),t("event",r,i||{})}catch(o){Vt.error(o)}})}function i$(t,e,n,r){function i(o,...s){return v(this,null,function*(){try{if(o==="event"){let[a,u]=s;yield r$(t,e,n,a,u)}else if(o==="config"){let[a,u]=s;yield n$(t,e,n,r,a,u)}else if(o==="consent"){let[a,u]=s;t("consent",a,u)}else if(o==="get"){let[a,u,l]=s;t("get",a,u,l)}else if(o==="set"){let[a]=s;t("set",a)}else t(o,...s)}catch(a){Vt.error(a)}})}return i}function o$(t,e,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=i$(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function s$(t){let e=window.document.getElementsByTagName("script");for(let n of Object.values(e))if(n.src&&n.src.includes(q_)&&n.src.includes(t))return n;return null}var a$=30,c$=1e3,j_=class{constructor(e={},n=c$){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},uR=new j_;function u$(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function l$(t){return v(this,null,function*(){var e;let{appId:n,apiKey:r}=t,i={method:"GET",headers:u$(r)},o=YB.replace("{app-id}",n),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{let u=yield s.json();!((e=u.error)===null||e===void 0)&&e.message&&(a=u.error.message)}catch{}throw Kt.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function d$(r){return v(this,arguments,function*(t,e=uR,n){let{appId:i,apiKey:o,measurementId:s}=t.options;if(!i)throw Kt.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw Kt.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new U_;return setTimeout(()=>v(this,null,function*(){u.abort()}),n!==void 0?n:QB),lR({appId:i,apiKey:o,measurementId:s},a,u,e)})}function lR(o,s,a){return v(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=uR){var u;let{appId:l,measurementId:h}=t;try{yield h$(r,e)}catch(p){if(h)return Vt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:h};throw p}try{let p=yield l$(t);return i.deleteThrottleMetadata(l),p}catch(p){let y=p;if(!f$(y)){if(i.deleteThrottleMetadata(l),h)return Vt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${y?.message}]`),{appId:l,measurementId:h};throw p}let m=Number((u=y?.customData)===null||u===void 0?void 0:u.httpStatus)===503?Ym(n,i.intervalMillis,a$):Ym(n,i.intervalMillis),T={throttleEndTimeMillis:Date.now()+m,backoffCount:n+1};return i.setThrottleMetadata(l,T),Vt.debug(`Calling attemptFetch again in ${m} millis`),lR(t,T,r,i)}})}function h$(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(o),r(Kt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function f$(t){if(!(t instanceof lt)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var U_=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var B_;function p$(t,e,n,r,i){return v(this,null,function*(){if(i&&i.global){t("event",n,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});t("event",n,s)}})}var $_;function g$(t){$_=t}function m$(t){B_=t}function y$(){return v(this,null,function*(){if(oc())try{yield md()}catch(t){return Vt.warn(Kt.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Vt.warn(Kt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function v$(t,e,n,r,i,o,s){return v(this,null,function*(){var a;let u=d$(t);u.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Vt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Vt.error(m)),e.push(u);let l=y$().then(m=>{if(m)return r.getId()}),[h,p]=yield Promise.all([u,l]);s$(o)||e$(o,h.measurementId),$_&&(i("consent","default",$_),g$(void 0)),i("js",new Date);let y=(a=s?.config)!==null&&a!==void 0?a:{};return y[KB]="firebase",y.update=!0,p!=null&&(y[WB]=p),i("config",h.measurementId,y),B_&&(i("set",B_),m$(void 0)),h.measurementId})}var H_=class{constructor(e){this.app=e}_delete(){return delete xc[this.app.options.appId],Promise.resolve()}},xc={},nR=[],rR={},L_="dataLayer",_$="gtag",iR,dR,oR=!1;function w$(){let t=[];if(gd()&&t.push("This is a browser extension environment."),tT()||t.push("Cookies are not available."),t.length>0){let e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Kt.create("invalid-analytics-context",{errorInfo:e});Vt.warn(n.message)}}function I$(t,e,n){w$();let r=t.options.appId;if(!r)throw Kt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Vt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Kt.create("no-api-key");if(xc[r]!=null)throw Kt.create("already-exists",{id:r});if(!oR){t$(L_);let{wrappedGtag:o,gtagCore:s}=o$(xc,nR,rR,L_,_$);dR=o,iR=s,oR=!0}return xc[r]=v$(t,nR,rR,e,iR,L_,n),new H_(t)}function hR(t=ki()){t=qe(t);let e=_n(t,wh);return e.isInitialized()?e.getImmediate():E$(t)}function E$(t,e={}){let n=_n(t,wh);if(n.isInitialized()){let i=n.getImmediate();if(rn(e,n.getOptions()))return i;throw Kt.create("already-initialized")}return n.initialize({options:e})}function b$(t,e,n,r){t=qe(t),p$(dR,xc[t.app.options.appId],e,n,r).catch(i=>Vt.error(i))}var sR="@firebase/analytics",aR="0.10.12";function D$(){Ot(new nt(wh,(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return I$(r,i,n)},"PUBLIC")),Ot(new nt("analytics-internal",t,"PRIVATE")),dt(sR,aR),dt(sR,aR,"esm2017");function t(e){try{let n=e.getProvider(wh).getImmediate();return{logEvent:(r,i,o)=>b$(n,r,i,o)}}catch(n){throw Kt.create("interop-component-reg-failed",{reason:n})}}}D$();var C$={apiKey:"AIzaSyA_KdEMCw0YCZwQ7bBWq0UfT1Keqv0pjPE",authDomain:"philproj-58c07.firebaseapp.com",projectId:"philproj-58c07",storageBucket:"philproj-58c07.firebasestorage.app",messagingSenderId:"918832186488",appId:"1:918832186488:web:5504f11488e4a3a1a9998d",measurementId:"G-WQW4NQTHLN"},fR=dy(C$),K5=hR(fR),Qt=CA(fR);function T$(t,e){t&1&&(R(0,"label",10)(1,"span",14),O(2,"Please enter a valid email address"),M()())}function S$(t,e){if(t&1&&(R(0,"label",10)(1,"span",14),O(2),M()()),t&2){let n=pe();U(2),Le(n.errorMessage)}}function A$(t,e){t&1&&we(0,"span",13)}var Ih=class t{constructor(e){this.router=e}email="";isValidEmail=!1;isChecking=!1;errorMessage="";validateEmail(){let e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;this.isValidEmail=e.test(this.email),this.errorMessage=""}checkAndProceed(){return v(this,null,function*(){if(this.isValidEmail){this.isChecking=!0,this.errorMessage="";try{let e=Ft(Qt,"Answers"),n=gh(e,mh("userEmail","==",this.email));if(!(yield bn(n)).empty){this.errorMessage="This email has already completed the survey.",this.isChecking=!1;return}this.router.navigate(["/survey"],{queryParams:{email:this.email}})}catch(e){this.errorMessage="An error occurred. Please try again.",console.error("Error checking email:",e)}this.isChecking=!1}})}static \u0275fac=function(n){return new(n||t)(Q(et))};static \u0275cmp=He({type:t,selectors:[["app-email-check"]],decls:19,vars:7,consts:[[1,"min-h-screen","bg-base-200","flex","items-center","justify-center","p-4"],[1,"w-full","max-w-md"],[1,"card","bg-base-100","shadow-xl"],[1,"card-body","p-4","md:p-8"],[1,"card-title","text-2xl","mb-2"],[1,"text-base-content/70","mb-6"],[1,"form-control","w-full"],[1,"label","pt-0"],[1,"label-text"],["type","email","placeholder","your.email@example.com",1,"input","input-bordered","w-full",3,"ngModelChange","input","ngModel"],[1,"label"],[1,"card-actions","justify-end","mt-6"],[1,"btn","btn-primary",3,"click","disabled"],[1,"loading","loading-spinner","loading-sm"],[1,"label-text-alt","text-error"]],template:function(n,r){n&1&&(R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),O(5,"Before we begin..."),M(),R(6,"p",5),O(7," Please provide your email address. This helps us ensure the integrity of our research by making sure each person only completes the survey once. "),M(),R(8,"div",6)(9,"label",7)(10,"span",8),O(11,"Email address"),M()(),R(12,"input",9),Pn("ngModelChange",function(o){return ir(r.email,o)||(r.email=o),o}),be("input",function(){return r.validateEmail()}),M(),xe(13,T$,3,0,"label",10)(14,S$,3,1,"label",10),M(),R(15,"div",11)(16,"button",12),be("click",function(){return r.checkAndProceed()}),xe(17,A$,1,0,"span",13),O(18," Continue "),M()()()()()()),n&2&&(U(12),Lr("input-error",r.email&&!r.isValidEmail),xn("ngModel",r.email),U(),Ee(r.email&&!r.isValidEmail?13:-1),U(),Ee(r.errorMessage?14:-1),U(2),Xe("disabled",!r.isValidEmail||r.isChecking),U(),Ee(r.isChecking?17:-1))},dependencies:[$t,Hr,$r,Jo,xi],encapsulation:2})};var R$=(t,e)=>e.id;function M$(t,e){t&1&&(R(0,"div",2),we(1,"span",4),M())}function N$(t,e){if(t&1){let n=kt();R(0,"div",3)(1,"div",5)(2,"div",6)(3,"h2",7),O(4," Survey Already Completed "),M(),R(5,"p",8),O(6," It looks like you've already completed this survey with the email address: "),R(7,"span",9),O(8),M()(),R(9,"div",10)(10,"button",11),be("click",function(){Tt(n);let i=pe();return St(i.goHome())}),O(11," Return to Home "),M()()()()()}if(t&2){let n=pe();U(8),Le(n.userEmail)}}function x$(t,e){t&1&&(ct(),R(0,"svg",34),we(1,"path",35),M())}function P$(t,e){if(t&1){let n=kt();R(0,"button",31),be("click",function(){let i=Tt(n).$implicit,o=pe().$implicit,s=pe(2);return St(s.selectAnswer(o.id,i))}),R(1,"div",32)(2,"span",33),O(3),M(),xe(4,x$,2,0,":svg:svg",34),M()()}if(t&2){let n=e.$implicit,r=pe().$implicit;Lr("selected-answer",r.selectedAnswer===n),U(3),Le(n),U(),Ee(r.selectedAnswer===n?4:-1)}}function k$(t,e){if(t&1&&(R(0,"div",5)(1,"div",26)(2,"h2",27),O(3),M(),R(4,"p",28),O(5),M(),R(6,"div",29),Mn(7,P$,5,4,"button",30,Fo),M()()()),t&2){let n=e.$implicit;U(3),yn(" ",n.questionTitle," "),U(2),Le(n.questionText),U(2),Nn(n.questionAnswers)}}function O$(t,e){t&1&&we(0,"span",25)}function F$(t,e){if(t&1){let n=kt();R(0,"div",12)(1,"h1",13),O(2,"AI in Art Survey"),M(),R(3,"p",14),O(4," Please answer each question based on your ethical perspective "),M(),R(5,"div",15)(6,"div",16)(7,"h3",17),O(8,"Key Factors to Consider:"),M(),R(9,"ul",18)(10,"li",19)(11,"strong"),O(12,"Licensing:"),M(),O(13," Was the training data open source or licensed such that derivative works are allowed? "),M(),R(14,"li",19)(15,"strong"),O(16,"Art Style Similarity:"),M(),O(17," Does the model's generated art closely resemble the style of a particular artist? "),M(),R(18,"li",19)(19,"strong"),O(20,"Content Similarity:"),M(),O(21," Does the model's generated art closely resemble existing paintings in terms of content? "),M(),R(22,"li",19)(23,"strong"),O(24,"Creativity/Regurgitation:"),M(),O(25," Does the model emulate creativity and reasoning, or does it merely recombine elements from the input data? "),M()(),we(26,"div",20),R(27,"p",21),O(28," For all of the questions below, the scenario is as follows: An AI has been trained to generate visual art (paintings, drawings, etc.) using millions of existing pieces of artwork. This AI is pay-to-use. The question is whether the developers of the AI or the creators of the art should receive the profit from its use. "),M()()()(),R(29,"div",22),Mn(30,k$,9,2,"div",5,R$),R(32,"div",23)(33,"button",24),be("click",function(){Tt(n);let i=pe();return St(i.submitSurvey())}),xe(34,O$,1,0,"span",25),O(35," Submit Survey "),M()()()}if(t&2){let n=pe();U(30),Nn(n.questions),U(3),Xe("disabled",!n.areAllQuestionsAnswered()||n.isSubmitting),U(),Ee(n.isSubmitting?34:-1)}}var Eh=class t{constructor(e,n){this.route=e;this.router=n}questions=[];loading=!0;userEmail="";hasCompletedSurvey=!1;isSubmitting=!1;ngOnInit(){return v(this,null,function*(){try{this.route.queryParams.subscribe(e=>v(this,null,function*(){if(!e.email){this.router.navigate(["/email-check"]);return}this.userEmail=e.email;let n=Ft(Qt,"Answers"),r=gh(n,mh("userEmail","==",this.userEmail));if(!(yield bn(r)).empty){this.hasCompletedSurvey=!0,this.loading=!1;return}let o=Ft(Qt,"Questions"),s=yield bn(o);this.questions=s.docs.map(a=>V({id:a.id},a.data())),this.loading=!1}))}catch(e){console.error("Error initializing survey:",e),this.loading=!1}})}selectAnswer(e,n){let r=this.questions.find(i=>i.id===e);r&&(r.selectedAnswer=n)}goHome(){this.router.navigate(["/"])}areAllQuestionsAnswered(){return this.questions.every(e=>e.selectedAnswer!==void 0)}submitSurvey(){return v(this,null,function*(){if(this.areAllQuestionsAnswered()){this.isSubmitting=!0;try{let e=Ft(Qt,"Answers"),n=yield Nc(e,{userEmail:this.userEmail}),r=Ft(e,n.id,"responses"),i=this.questions.map(o=>{let s=o.questionAnswers.indexOf(o.selectedAnswer);return Nc(r,{questionId:o.id,answerIndex:s})});yield Promise.all(i),this.router.navigate(["/"])}catch(e){console.error("Error submitting survey:",e)}this.isSubmitting=!1,this.router.navigate(["/results"])}})}static \u0275fac=function(n){return new(n||t)(Q(lr),Q(et))};static \u0275cmp=He({type:t,selectors:[["app-survey"]],decls:5,vars:3,consts:[[1,"min-h-screen","bg-base-200","py-8"],[1,"container","mx-auto","px-4"],[1,"flex","justify-center","items-center","min-h-[200px]"],[1,"max-w-md","mx-auto"],[1,"loading","loading-spinner","loading-lg"],[1,"card","bg-base-100","shadow-xl"],[1,"card-body","text-center"],[1,"card-title","text-2xl","justify-center","mb-4"],[1,"mb-6"],[1,"font-semibold"],[1,"card-actions","justify-center"],[1,"btn","btn-primary",3,"click"],[1,"text-center","mb-8"],[1,"text-5xl","font-bold","mb-4"],[1,"text-xl","text-base-content/70","mb-8"],[1,"card","bg-base-100","shadow-xl","max-w-4xl","mx-auto","mb-12"],[1,"card-body","prose","max-w-none"],[1,"font-bold","text-xl","mb-4"],[1,"list-none","pl-0"],[1,"mb-3"],[1,"divider"],[1,"text-base-content/80"],[1,"space-y-8","max-w-4xl","mx-auto"],[1,"flex","justify-center","mt-12"],[1,"btn","btn-primary","btn-lg",3,"click","disabled"],[1,"loading","loading-spinner","loading-md"],[1,"card-body"],[1,"card-title","text-xl","font-bold","mb-2"],[1,"text-base-content/80","mb-6"],[1,"space-y-3","mt-4"],[1,"btn","btn-outline","w-full","answer-button",3,"selected-answer"],[1,"btn","btn-outline","w-full","answer-button",3,"click"],[1,"answer-content"],[1,"answer-text"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2.5",1,"check-icon","stroke-success"],["stroke-linecap","round","stroke-linejoin","round","d","M4.5 12.75l6 6 9-13.5"]],template:function(n,r){n&1&&(R(0,"div",0)(1,"div",1),xe(2,M$,2,0,"div",2)(3,N$,12,1,"div",3)(4,F$,36,2),M()()),n&2&&(U(2),Ee(r.loading?2:-1),U(),Ee(!r.loading&&r.hasCompletedSurvey?3:-1),U(),Ee(!r.loading&&!r.hasCompletedSurvey?4:-1))},dependencies:[$t,Hr],styles:[".answer-button[_ngcontent-%COMP%]{min-height:3.5rem!important;height:auto!important;padding:1rem!important;white-space:normal!important;text-align:left!important}.answer-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem;width:100%}.answer-text[_ngcontent-%COMP%]{flex:1;line-height:1.5}.check-icon[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;flex-shrink:0}.selected-answer[_ngcontent-%COMP%]{border-color:#1db954!important;border-width:4px!important;background-color:#1db9541a!important;box-shadow:0 0 0 2px #1db95433;transform:scale(1.01);transition:all .2s ease-in-out}.selected-answer[_ngcontent-%COMP%]:hover{background-color:#1db95433!important}.btn-outline[_ngcontent-%COMP%]{transition:all .2s ease-in-out}"]})};var V$=(t,e)=>e.id;function L$(t,e){t&1&&(R(0,"div",5),we(1,"span",8),M())}function j$(t,e){if(t&1&&(R(0,"div",6)(1,"div",9),ct(),R(2,"svg",10),we(3,"path",11),M(),rr(),R(4,"span"),O(5),M()()()),t&2){let n=pe();U(5),Le(n.error)}}function U$(t,e){if(t&1&&(R(0,"div",17)(1,"span",19),O(2),M(),R(3,"div",20)(4,"span",21),O(5),M(),R(6,"div",22),O(7),M()()()),t&2){let n=e.$implicit,r=e.$index,i=pe().$implicit,o=pe(2);U(2),Le(n),U(3),yn(" ",i.answerCounts[r]," responses "),U(2),yn(" ",o.getResponsePercentage(i.answerCounts[r],i.totalResponses)," ")}}function B$(t,e){if(t&1&&(R(0,"div",12)(1,"div",13)(2,"h2",14),O(3),M(),R(4,"p",15),O(5),M(),R(6,"div",16),Mn(7,U$,8,3,"div",17,Fo),M(),R(9,"div",18),O(10),M()()()),t&2){let n=e.$implicit;U(3),Le(n.questionTitle),U(2),Le(n.questionText),U(2),Nn(n.questionAnswers),U(3),yn(" Total Responses: ",n.totalResponses," ")}}function $$(t,e){if(t&1&&(R(0,"div",7),Mn(1,B$,11,3,"div",12,V$),M()),t&2){let n=pe();U(),Nn(n.questions)}}var bh=class t{loading=!0;questions=[];error=null;ngOnInit(){return v(this,null,function*(){try{let e=Ft(Qt,"Questions"),r=(yield bn(e)).docs.map(s=>oe(V({id:s.id},s.data()),{answerCounts:new Array(s.data().questionAnswers.length).fill(0),totalResponses:0})),i=Ft(Qt,"Answers"),o=yield bn(i);for(let s of o.docs){let a=Ft(i,s.id,"responses");(yield bn(a)).docs.forEach(l=>{let h=l.data(),p=r.find(y=>y.id===h.questionId);p&&(p.answerCounts[h.answerIndex]++,p.totalResponses++)})}this.questions=r}catch(e){console.error("Error fetching results:",e),this.error="Failed to load survey results"}finally{this.loading=!1}})}getResponsePercentage(e,n){return n===0?"0%":`${Math.round(e/n*100)}%`}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=He({type:t,selectors:[["app-results"]],decls:10,vars:3,consts:[[1,"min-h-screen","bg-base-200","py-8"],[1,"container","mx-auto","px-4"],[1,"text-center","mb-12"],[1,"text-5xl","font-bold","mb-4"],[1,"text-xl","text-base-content/70"],[1,"flex","justify-center","items-center","min-h-[200px]"],[1,"max-w-md","mx-auto"],[1,"space-y-12","max-w-4xl","mx-auto"],[1,"loading","loading-spinner","loading-lg"],[1,"alert","alert-error"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-current","shrink-0","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"card","bg-base-100","shadow-xl"],[1,"card-body"],[1,"card-title","mb-2"],[1,"text-base-content/70","mb-6"],[1,"grid","gap-4"],[1,"flex","flex-col","md:flex-row","md:items-center","justify-between","p-4","bg-base-200","rounded-lg"],[1,"text-sm","text-center","mt-4","text-base-content/70"],[1,"flex-1","mb-2","md:mb-0"],[1,"flex","items-center","gap-4","self-end","md:self-auto"],[1,"text-sm","opacity-70"],[1,"badge","badge-primary"]],template:function(n,r){n&1&&(R(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),O(4,"Survey Results"),M(),R(5,"p",4),O(6," See how others responded to the AI in Art survey "),M()(),xe(7,L$,2,0,"div",5)(8,j$,6,1,"div",6)(9,$$,3,0,"div",7),M()()),n&2&&(U(7),Ee(r.loading?7:-1),U(),Ee(r.error?8:-1),U(),Ee(!r.loading&&!r.error?9:-1))},dependencies:[$t],encapsulation:2})};function MR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var NR=MR,xR=new zt("auth","Firebase",MR());var Rh=new On("@firebase/auth");function H$(t,...e){Rh.logLevel<=le.WARN&&Rh.warn(`Auth (${zr}): ${t}`,...e)}function Ch(t,...e){Rh.logLevel<=le.ERROR&&Rh.error(`Auth (${zr}): ${t}`,...e)}function qn(t,...e){throw pw(t,...e)}function Qi(t,...e){return pw(t,...e)}function PR(t,e,n){let r=Object.assign(Object.assign({},NR()),{[e]:n});return new zt("auth","Firebase",r).create(e,{appName:t.name})}function Jr(t){return PR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pw(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xR.create(t,...e)}function Y(t,e,...n){if(!t)throw pw(e,...n)}function wr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Ch(e),new Error(e)}function Xr(t,e){t||wr(e)}function K_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function q$(){return pR()==="http:"||pR()==="https:"}function pR(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function z$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(q$()||gd()||"connection"in navigator)?navigator.onLine:!0}function G$(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Yi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xr(n>e,"Short delay should be less than long delay!"),this.isMobile=YC()||JC()}get(){return z$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function gw(t,e){Xr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Mh=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var W$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var K$=new Yi(3e4,6e4);function Ji(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function ei(o,s,a,u){return v(this,arguments,function*(t,e,n,r,i={}){return kR(t,i,()=>v(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=sc(Object.assign({key:t.config.apiKey},h)).slice(1),y=yield t._getAdditionalHeaders();y["Content-Type"]="application/json",t.languageCode&&(y["X-Firebase-Locale"]=t.languageCode);let m=Object.assign({method:e,headers:y},l);return ZC()||(m.referrerPolicy="no-referrer"),Mh.fetch()(OR(t,t.config.apiHost,n,p),m)}))})}function kR(t,e,n){return v(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},W$),e);try{let i=new Q_(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Dh(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dh(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Dh(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Dh(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw PR(t,h,l);qn(t,h)}}catch(i){if(i instanceof lt)throw i;qn(t,"network-request-failed",{message:String(i)})}})}function Uh(o,s,a,u){return v(this,arguments,function*(t,e,n,r,i={}){let l=yield ei(t,e,n,r,i);return"mfaPendingCredential"in l&&qn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function OR(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?gw(t.config,i):`${t.config.apiScheme}://${i}`}function Q$(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Q_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Qi(this.auth,"network-request-failed")),K$.get())})}};function Dh(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Qi(t,e,r);return i.customData._tokenResponse=n,i}function gR(t){return t!==void 0&&t.enterprise!==void 0}var Y_=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Q$(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function Y$(t,e){return v(this,null,function*(){return ei(t,"GET","/v2/recaptchaConfig",Ji(t,e))})}function Z$(t,e){return v(this,null,function*(){return ei(t,"POST","/v1/accounts:delete",e)})}function FR(t,e){return v(this,null,function*(){return ei(t,"POST","/v1/accounts:lookup",e)})}function kc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function VR(t,e=!1){return v(this,null,function*(){let n=qe(t),r=yield n.getIdToken(e),i=mw(r);Y(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:kc(z_(i.auth_time)),issuedAtTime:kc(z_(i.iat)),expirationTime:kc(z_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function z_(t){return Number(t)*1e3}function mw(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ch("JWT malformed, contained fewer than 3 sections"),null;try{let i=fd(n);return i?JSON.parse(i):(Ch("Failed to decode base64 JWT payload"),null)}catch(i){return Ch("Caught error parsing JWT payload as JSON",i?.toString()),null}}function mR(t){let e=mw(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Fc(t,e,n=!1){return v(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof lt&&J$(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function J$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Z_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),n)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Vc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=kc(this.lastLoginAt),this.creationTime=kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Nh(t){return v(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Fc(t,FR(n,{idToken:r}));Y(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?jR(o.providerUserInfo):[],a=X$(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Vc(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function LR(t){return v(this,null,function*(){let e=qe(t);yield Nh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function X$(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function jR(t){return t.map(e=>{var{providerId:n}=e,r=Vf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function eH(t,e){return v(this,null,function*(){let n=yield kR(t,{},()=>v(this,null,function*(){let r=sc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=OR(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Mh.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function tH(t,e){return v(this,null,function*(){return ei(t,"POST","/v2/accounts:revokeToken",Ji(t,e))})}var Oc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");let n=mR(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return v(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield eH(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(Y(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Y(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return wr("not implemented")}};function Zr(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Rs=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Vf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Z_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Vc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let n=yield Fc(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return VR(this,e)}reload(){return LR(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Nh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(Gt(this.auth.app))return Promise.reject(Jr(this.auth));let e=yield this.getIdToken();return yield Fc(this,Z$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,m=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,T=(s=n.photoURL)!==null&&s!==void 0?s:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,j=(l=n.createdAt)!==null&&l!==void 0?l:void 0,z=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:ne,emailVerified:Me,isAnonymous:Et,providerData:Te,stsTokenManager:b}=n;Y(ne&&b,e,"internal-error");let _=Oc.fromJSON(this.name,b);Y(typeof ne=="string",e,"internal-error"),Zr(p,e.name),Zr(y,e.name),Y(typeof Me=="boolean",e,"internal-error"),Y(typeof Et=="boolean",e,"internal-error"),Zr(m,e.name),Zr(T,e.name),Zr(N,e.name),Zr(P,e.name),Zr(j,e.name),Zr(z,e.name);let I=new t({uid:ne,auth:e,email:y,emailVerified:Me,displayName:p,isAnonymous:Et,photoURL:T,phoneNumber:m,tenantId:N,stsTokenManager:_,createdAt:j,lastLoginAt:z});return Te&&Array.isArray(Te)&&(I.providerData=Te.map(E=>Object.assign({},E))),P&&(I._redirectEventId=P),I}static _fromIdTokenResponse(e,n,r=!1){return v(this,null,function*(){let i=new Oc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Nh(o),o})}static _fromGetAccountInfoResponse(e,n,r){return v(this,null,function*(){let i=n.users[0];Y(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?jR(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Oc;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Vc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var yR=new Map;function Ir(t){Xr(t instanceof Function,"Expected a class definition");let e=yR.get(t);return e?(Xr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,yR.set(t,e),e)}var nH=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(n,r){return v(this,null,function*(){this.storage[n]=r})}_get(n){return v(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return v(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),J_=nH;function Th(t,e,n){return`firebase:${t}:${e}:${n}`}var xh=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Th(this.userKey,i.apiKey,o),this.fullPersistenceKey=Th("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Rs._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(this,null,function*(){if(!n.length)return new t(Ir(J_),e,r);let i=(yield Promise.all(n.map(l=>v(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Ir(J_),s=Th(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p=Rs._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>v(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function vR(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zR(e))return"Blackberry";if(GR(e))return"Webos";if(BR(e))return"Safari";if((e.includes("chrome/")||$R(e))&&!e.includes("edge/"))return"Chrome";if(qR(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function UR(t=tt()){return/firefox\//i.test(t)}function BR(t=tt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $R(t=tt()){return/crios\//i.test(t)}function HR(t=tt()){return/iemobile/i.test(t)}function qR(t=tt()){return/android/i.test(t)}function zR(t=tt()){return/blackberry/i.test(t)}function GR(t=tt()){return/webos/i.test(t)}function yw(t=tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rH(t=tt()){var e;return yw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function iH(){return XC()&&document.documentMode===10}function WR(t=tt()){return yw(t)||qR(t)||GR(t)||zR(t)||/windows phone/i.test(t)||HR(t)}function KR(t,e=[]){let n;switch(t){case"Browser":n=vR(tt());break;case"Worker":n=`${vR(tt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zr}/${r}`}var X_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function oH(n){return v(this,arguments,function*(t,e={}){return ei(t,"GET","/v2/passwordPolicy",Ji(t,e))})}var sH=6,ew=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:sH,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var tw=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ph(this),this.idTokenSubscription=new Ph(this),this.beforeStateQueue=new X_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ir(n)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield xh.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let n=yield FR(this,{idToken:e}),r=yield Rs._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var n;if(Gt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield Nh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=G$()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(Gt(this.app))return Promise.reject(Jr(this));let n=e?qe(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return v(this,null,function*(){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return Gt(this.app)?Promise.reject(Jr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Gt(this.app)?Promise.reject(Jr(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Ir(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield oH(this),n=new ew(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new zt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield tH(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Ir(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=yield xh.create(this,[Ir(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return v(this,null,function*(){var e;if(Gt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&H$(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Ms(t){return qe(t)}var Ph=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=rT(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Bh={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aH(t){Bh=t}function QR(t){return Bh.loadJS(t)}function cH(){return Bh.recaptchaEnterpriseScript}function uH(){return Bh.gapiScript}function YR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var nw=class{constructor(){this.enterprise=new rw}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},rw=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var lH="recaptcha-enterprise",ZR="NO_RECAPTCHA",iw=class{constructor(e){this.type=lH,this.auth=Ms(e)}verify(e="verify",n=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(this,null,function*(){Y$(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Y_(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;gR(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(ZR)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new nw().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&gR(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=cH();u.length!==0&&(u+=a),QR(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Pc(t,e,n,r=!1,i=!1){return v(this,null,function*(){let o=new iw(t),s;if(i)s=ZR;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function _R(t,e,n,r,i){return v(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Pc(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(a=>v(this,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield Pc(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Pc(t,e,n);return r(t,a).catch(u=>v(this,null,function*(){var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let h=yield Pc(t,e,n,!1,!0);return r(t,h)}return Promise.reject(u)}))}else{let a=yield Pc(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")})}function JR(t,e){let n=_n(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(rn(o,e??{}))return i;qn(i,"already-initialized")}return n.initialize({options:e})}function dH(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ir);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function XR(t,e,n){let r=Ms(t);Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=eM(e),{host:s,port:a}=hH(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Y(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Y(rn(l,r.config.emulator)&&rn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,i||fH()}function eM(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function hH(t){let e=eM(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:wR(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:wR(s)}}}function wR(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function fH(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Lc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return wr("not implemented")}_getIdTokenResponse(e){return wr("not implemented")}_linkToIdToken(e,n){return wr("not implemented")}_getReauthenticationResolver(e){return wr("not implemented")}};function pH(t,e){return v(this,null,function*(){return ei(t,"POST","/v1/accounts:signUp",e)})}function gH(t,e){return v(this,null,function*(){return Uh(t,"POST","/v1/accounts:signInWithPassword",Ji(t,e))})}function mH(t,e){return v(this,null,function*(){return Uh(t,"POST","/v1/accounts:signInWithEmailLink",Ji(t,e))})}function yH(t,e){return v(this,null,function*(){return Uh(t,"POST","/v1/accounts:signInWithEmailLink",Ji(t,e))})}var jc=class t extends Lc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _R(e,n,"signInWithPassword",gH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return mH(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}})}_linkToIdToken(e,n){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _R(e,r,"signUpPassword",pH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return yH(e,{idToken:n,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function G_(t,e){return v(this,null,function*(){return Uh(t,"POST","/v1/accounts:signInWithIdp",Ji(t,e))})}function vH(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _H(t){let e=Xo(es(t)).link,n=e?Xo(es(e)).deep_link_id:null,r=Xo(es(t)).deep_link_id;return(r?Xo(es(r)).link:null)||r||n||e||t}var kh=class t{constructor(e){var n,r,i,o,s,a;let u=Xo(es(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=vH((i=u.mode)!==null&&i!==void 0?i:null);Y(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=_H(e);try{return new t(n)}catch{return null}}};var tM=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return jc._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=kh.parseLink(r);return Y(i,"argument-error"),jc._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Oh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ow=class extends Oh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Uc=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return v(this,null,function*(){let o=yield Rs._fromIdTokenResponse(e,r,i),s=IR(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=IR(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function IR(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var sw=class t extends lt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function nM(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?sw._fromErrorAndOperation(t,o,e,r):o})}function wH(t,e,n=!1){return v(this,null,function*(){let r=yield Fc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Uc._forOperation(t,"link",r)})}function IH(t,e,n=!1){return v(this,null,function*(){let{auth:r}=t;if(Gt(r.app))return Promise.reject(Jr(r));let i="reauthenticate";try{let o=yield Fc(t,nM(r,i,e,t),n);Y(o.idToken,r,"internal-error");let s=mw(o.idToken);Y(s,r,"internal-error");let{sub:a}=s;return Y(t.uid===a,r,"user-mismatch"),Uc._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&qn(r,"user-mismatch"),o}})}function rM(t,e,n=!1){return v(this,null,function*(){if(Gt(t.app))return Promise.reject(Jr(t));let r="signIn",i=yield nM(t,r,e),o=yield Uc._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function iM(t,e){return v(this,null,function*(){return rM(Ms(t),e)})}function EH(t){return v(this,null,function*(){let e=Ms(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function vw(t,e,n){return Gt(t.app)?Promise.reject(Jr(t)):iM(qe(t),tM.credential(e,n)).catch(r=>v(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&EH(t),r}))}function oM(t,e,n,r){return qe(t).onIdTokenChanged(e,n,r)}function sM(t,e,n){return qe(t).beforeAuthStateChanged(e,n)}function _w(t,e,n,r){return qe(t).onAuthStateChanged(e,n,r)}function ww(t){return qe(t).signOut()}var Fh="__sak";var Vh=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fh,"1"),this.storage.removeItem(Fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var bH=1e3,DH=10,CH=(()=>{class t extends Vh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WR(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);iH()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,DH):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},bH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return v(this,null,function*(){yield Tr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return v(this,null,function*(){let r=yield Tr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return v(this,null,function*(){yield Tr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),aM=CH;var TH=(()=>{class t extends Vh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Iw=TH;function SH(t){return Promise.all(t.map(e=>v(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var AH=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return v(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,s)})),l=yield SH(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function cM(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var aw=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=cM("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(y.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Hn(){return window}function RH(t){Hn().location.href=t}function uM(){return typeof Hn().WorkerGlobalScope<"u"&&typeof Hn().importScripts=="function"}function MH(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function NH(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function xH(){return uM()?self:null}var lM="firebaseLocalStorageDb",PH=1,Lh="firebaseLocalStorage",dM="fbase_key",Zi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function $h(t,e){return t.transaction([Lh],e?"readwrite":"readonly").objectStore(Lh)}function kH(){let t=indexedDB.deleteDatabase(lM);return new Zi(t).toPromise()}function cw(){let t=indexedDB.open(lM,PH);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Lh,{keyPath:dM})}catch(i){n(i)}}),t.addEventListener("success",()=>v(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Lh)?e(r):(r.close(),yield kH(),e(yield cw()))}))})}function ER(t,e,n){return v(this,null,function*(){let r=$h(t,!0).put({[dM]:e,value:n});return new Zi(r).toPromise()})}function OH(t,e){return v(this,null,function*(){let n=$h(t,!1).get(e),r=yield new Zi(n).toPromise();return r===void 0?null:r.value})}function bR(t,e){let n=$h(t,!0).delete(e);return new Zi(n).toPromise()}var FH=800,VH=3,LH=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield cw(),this.db)})}_withRetries(n){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>VH)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return uM()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=AH._getInstance(xH()),this.receiver._subscribe("keyChanged",(n,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var n,r;if(this.activeServiceWorker=yield MH(),!this.activeServiceWorker)return;this.sender=new aw(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||NH()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let n=yield cw();return yield ER(n,Fh,"1"),yield bR(n,Fh),!0}catch{}return!1})}_withPendingWrite(n){return v(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>ER(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return v(this,null,function*(){let r=yield this._withRetries(i=>OH(i,n));return this.localCache[n]=r,r})}_remove(n){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>bR(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return v(this,null,function*(){let n=yield this._withRetries(o=>{let s=$h(o,!1).getAll();return new Zi(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),FH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),hM=LH;var IK=YR("rcb"),EK=new Yi(3e4,6e4);function jH(t,e){return e?Ir(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Bc=class extends Lc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return G_(e,this._buildIdpRequest())}_linkToIdToken(e,n){return G_(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return G_(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function UH(t){return rM(t.auth,new Bc(t),t.bypassAuthState)}function BH(t){let{auth:e,user:n}=t;return Y(n,e,"internal-error"),IH(n,new Bc(t),t.bypassAuthState)}function $H(t){return v(this,null,function*(){let{auth:e,user:n}=t;return Y(n,e,"internal-error"),wH(n,new Bc(t),t.bypassAuthState)})}var uw=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UH;case"linkViaPopup":case"linkViaRedirect":return $H;case"reauthViaPopup":case"reauthViaRedirect":return BH;default:qn(this.auth,"internal-error")}}resolve(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var bK=new Yi(2e3,1e4);var HH="pendingRedirect",Sh=new Map,lw=class t extends uw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=Sh.get(this.auth._key());if(!e){try{let r=(yield qH(this.resolver,this.auth))?yield Tr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Sh.set(this.auth._key(),e)}return this.bypassAuthState||Sh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return Tr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Tr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function qH(t,e){return v(this,null,function*(){let n=WH(e),r=GH(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function zH(t,e){Sh.set(t._key(),e)}function GH(t){return Ir(t._redirectPersistence)}function WH(t){return Th(HH,t.config.apiKey,t.name)}function KH(t,e,n=!1){return v(this,null,function*(){if(Gt(t.app))return Promise.reject(Jr(t));let r=Ms(t),i=jH(r,e),s=yield new lw(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var QH=10*60*1e3,dw=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YH(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!fM(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Qi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QH&&this.cachedEventUids.clear(),this.cachedEventUids.has(DR(e))}saveEventToCache(e){this.cachedEventUids.add(DR(e)),this.lastProcessedEventTime=Date.now()}};function DR(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fM({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function YH(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fM(t);default:return!1}}function ZH(n){return v(this,arguments,function*(t,e={}){return ei(t,"GET","/v1/projects",e)})}var JH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XH=/^https?/;function eq(t){return v(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield ZH(t);for(let n of e)try{if(tq(n))return}catch{}qn(t,"unauthorized-domain")})}function tq(t){let e=K_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!XH.test(n))return!1;if(JH.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var nq=new Yi(3e4,6e4);function CR(){let t=Hn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function rq(t){return new Promise((e,n)=>{var r,i,o;function s(){CR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{CR(),n(Qi(t,"network-request-failed"))},timeout:nq.get()})}if(!((i=(r=Hn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Hn().gapi)===null||o===void 0)&&o.load)s();else{let a=YR("iframefcb");return Hn()[a]=()=>{gapi.load?s():n(Qi(t,"network-request-failed"))},QR(`${uH()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Ah=null,e})}var Ah=null;function iq(t){return Ah=Ah||rq(t),Ah}var oq=new Yi(5e3,15e3),sq="__/auth/iframe",aq="emulator/auth/iframe",cq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lq(t){let e=t.config;Y(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?gw(e,aq):`https://${t.config.authDomain}/${sq}`,r={apiKey:e.apiKey,appName:t.name,v:zr},i=uq.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${sc(r).slice(1)}`}function dq(t){return v(this,null,function*(){let e=yield iq(t),n=Hn().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:lq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cq,dontclear:!0},r=>new Promise((i,o)=>v(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Qi(t,"network-request-failed"),a=Hn().setTimeout(()=>{o(s)},oq.get());function u(){Hn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var hq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fq=500,pq=600,gq="_blank",mq="http://localhost",jh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function yq(t,e,n,r=fq,i=pq){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},hq),{width:r.toString(),height:i.toString(),top:o,left:s}),l=tt().toLowerCase();n&&(a=$R(l)?gq:n),UR(l)&&(e=e||mq,u.scrollbars="yes");let h=Object.entries(u).reduce((y,[m,T])=>`${y}${m}=${T},`,"");if(rH(l)&&a!=="_self")return vq(e||"",a),new jh(null);let p=window.open(e||"",a,h);Y(p,t,"popup-blocked");try{p.focus()}catch{}return new jh(p)}function vq(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var _q="__/auth/handler",wq="emulator/auth/handler",Iq=encodeURIComponent("fac");function TR(t,e,n,r,i,o){return v(this,null,function*(){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:zr,eventId:i};if(e instanceof Oh){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",nT(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof ow){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${Iq}=${encodeURIComponent(u)}`:"";return`${Eq(t)}?${sc(a).slice(1)}${l}`})}function Eq({config:t}){return t.emulator?gw(t,wq):`https://${t.authDomain}/${_q}`}var W_="webStorageSupport",hw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Iw,this._completeRedirectFn=KH,this._overrideRedirectResult=zH}_openPopup(e,n,r,i){return v(this,null,function*(){var o;Xr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield TR(e,n,r,K_(),i);return yq(e,s,cM())})}_openRedirect(e,n,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield TR(e,n,r,K_(),i);return RH(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Xr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return v(this,null,function*(){let n=yield dq(e),r=new dw(e);return n.register("authEvent",i=>(Y(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(W_,{type:W_},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[W_];s!==void 0&&n(!!s),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eq(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return WR()||BR()||yw()}},pM=hw;var SR="@firebase/auth",AR="1.9.1";var fw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function bq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Dq(t){Ot(new nt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Y(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KR(t)},l=new tw(r,i,o,u);return dH(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ot(new nt("auth-internal",e=>{let n=Ms(e.getProvider("auth").getImmediate());return(r=>new fw(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),dt(SR,AR,bq(t)),dt(SR,AR,"esm2017")}var Cq=5*60,Tq=Qm("authIdTokenMaxAge")||Cq,RR=null,Sq=t=>e=>v(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Tq)return;let i=n?.token;RR!==i&&(RR=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Ew(t=ki()){let e=_n(t,"auth");if(e.isInitialized())return e.getImmediate();let n=JR(t,{popupRedirectResolver:pM,persistence:[hM,aM,Iw]}),r=Qm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=Sq(o.toString());sM(n,s,()=>s(n.currentUser)),oM(n,a=>s(a))}}let i=Wm("auth");return i&&XR(n,`http://${i}`),n}function Aq(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}aH({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Qi("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",Aq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Dq("Browser");var zn=class t{auth=Ew();userSubject=new Be(null);authInitialized=new Be(!1);user$=this.userSubject.asObservable();constructor(){_w(this.auth,e=>{this.userSubject.next(e),this.authInitialized.next(!0)})}login(e,n){return v(this,null,function*(){yield vw(this.auth,e,n)})}logout(){return v(this,null,function*(){yield ww(this.auth)})}isAuthenticated(){return this.userSubject.value!==null}waitForAuthInit(){return v(this,null,function*(){return this.authInitialized.value?this.isAuthenticated():new Promise(e=>{let n=this.authInitialized.subscribe(r=>{r&&(n.unsubscribe(),e(this.isAuthenticated()))})})})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})};function Rq(t,e){if(t&1&&(R(0,"div",5),ct(),R(1,"svg",14),we(2,"path",15),M(),rr(),R(3,"span"),O(4),M()()),t&2){let n=pe();U(4),Le(n.error)}}function Mq(t,e){t&1&&we(0,"span",13)}var qh=class t{constructor(e,n){this.authService=e;this.router=n}email="";password="";error=null;loading=!1;login(){return v(this,null,function*(){if(!this.email||!this.password){this.error="Please enter both email and password";return}this.loading=!0,this.error=null;try{yield this.authService.login(this.email,this.password),this.router.navigate(["/admin-dashboard"])}catch(e){this.error="Invalid email or password",console.error("Login error:",e)}finally{this.loading=!1}})}static \u0275fac=function(n){return new(n||t)(Q(zn),Q(et))};static \u0275cmp=He({type:t,selectors:[["app-admin-login"]],decls:21,vars:7,consts:[[1,"min-h-screen","bg-base-200","flex","items-center","justify-center","p-4"],[1,"w-full","max-w-md"],[1,"card","bg-base-100","shadow-xl"],[1,"card-body","p-4","md:p-8"],[1,"card-title","text-2xl","mb-6"],[1,"alert","alert-error","mb-4"],[1,"space-y-4",3,"submit"],[1,"form-control"],[1,"label"],[1,"label-text","mb-2","mr-2"],["type","email","name","email","placeholder","admin@example.com",1,"input","input-bordered",3,"ngModelChange","ngModel","disabled"],["type","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"input","input-bordered",3,"ngModelChange","ngModel","disabled"],["type","submit",1,"btn","btn-primary","w-full",3,"disabled"],[1,"loading","loading-spinner","loading-sm"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-current","shrink-0","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"]],template:function(n,r){n&1&&(R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),O(5,"Admin Login"),M(),xe(6,Rq,5,1,"div",5),R(7,"form",6),be("submit",function(o){return r.login(),o.preventDefault()}),R(8,"div",7)(9,"label",8)(10,"span",9),O(11,"Email"),M()(),R(12,"input",10),Pn("ngModelChange",function(o){return ir(r.email,o)||(r.email=o),o}),M()(),R(13,"div",7)(14,"label",8)(15,"span",9),O(16,"Password"),M()(),R(17,"input",11),Pn("ngModelChange",function(o){return ir(r.password,o)||(r.password=o),o}),M()(),R(18,"button",12),xe(19,Mq,1,0,"span",13),O(20," Login "),M()()()()()()),n&2&&(U(6),Ee(r.error?6:-1),U(6),xn("ngModel",r.email),Xe("disabled",r.loading),U(5),xn("ngModel",r.password),Xe("disabled",r.loading),U(),Xe("disabled",r.loading),U(),Ee(r.loading?19:-1))},dependencies:[$t,Hr,dd,$r,Jo,ud,xi,rc],encapsulation:2})};var zh=class t{constructor(e,n){this.authService=e;this.router=n}canActivate(){return v(this,null,function*(){return(yield this.authService.waitForAuthInit())?!0:(this.router.navigate(["/admin-login"]),!1)})}static \u0275fac=function(n){return new(n||t)(ae(zn),ae(et))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})};var Nq=(t,e)=>e.id;function xq(t,e){t&1&&(R(0,"div",7),we(1,"span",25),M())}function Pq(t,e){t&1&&(R(0,"div",8),O(1," No questions found. Create one below. "),M())}function kq(t,e){if(t&1&&(R(0,"div",32),O(1),M()),t&2){let n=e.$implicit;U(),yn(" ",n," ")}}function Oq(t,e){if(t&1){let n=kt();R(0,"div",26)(1,"div",27)(2,"div",28)(3,"h3",29),O(4),M(),R(5,"p",30),O(6),M(),R(7,"div",31),Mn(8,kq,2,1,"div",32,Fo),M()(),R(10,"button",33),be("click",function(){let i=Tt(n).$implicit,o=pe(2);return St(o.deleteQuestion(i.id))}),ct(),R(11,"svg",34),we(12,"path",35),M(),O(13," Delete "),M()()()}if(t&2){let n=e.$implicit;U(4),Le(n.questionTitle),U(2),yn(" ",n.questionText," "),U(2),Nn(n.questionAnswers)}}function Fq(t,e){if(t&1&&(R(0,"div",9),Mn(1,Oq,14,2,"div",26,Nq),M()),t&2){let n=pe();U(),Nn(n.existingQuestions)}}function Vq(t,e){if(t&1&&(R(0,"div",11),ct(),R(1,"svg",36),we(2,"path",37),M(),rr(),R(3,"span"),O(4),M()()),t&2){let n=pe();U(4),Le(n.error)}}function Lq(t,e){if(t&1&&(R(0,"div",12),ct(),R(1,"svg",36),we(2,"path",38),M(),rr(),R(3,"span"),O(4),M()()),t&2){let n=pe();U(4),Le(n.success)}}function jq(t,e){if(t&1){let n=kt();R(0,"button",41),be("click",function(){Tt(n);let i=pe().$index,o=pe();return St(o.removeAnswerOption(i))}),ct(),R(1,"svg",42),we(2,"path",43),M()()}if(t&2){let n=pe(2);Xe("disabled",n.loading)}}function Uq(t,e){if(t&1){let n=kt();R(0,"div",21)(1,"input",39),Pn("ngModelChange",function(i){let o=Tt(n).$index,s=pe();return ir(s.newQuestion.questionAnswers[o],i)||(s.newQuestion.questionAnswers[o]=i),St(i)}),M(),xe(2,jq,3,1,"button",40),M()}if(t&2){let n=e.$index,r=pe();U(),xn("ngModel",r.newQuestion.questionAnswers[n]),Xe("name","answer"+n)("disabled",r.loading),U(),Ee(r.newQuestion.questionAnswers.length>1?2:-1)}}function Bq(t,e){t&1&&we(0,"span",24)}var Gh=class t{constructor(e,n){this.authService=e;this.router=n}newQuestion={questionTitle:"",questionText:"",questionAnswers:[""]};error=null;success=null;loading=!1;existingQuestions=[];isLoading=!0;deleteError=null;ngOnInit(){return v(this,null,function*(){yield this.loadQuestions()})}loadQuestions(){return v(this,null,function*(){this.isLoading=!0;try{let e=Ft(Qt,"Questions"),n=yield bn(e);this.existingQuestions=n.docs.map(r=>V({id:r.id},r.data()))}catch(e){console.error("Error loading questions:",e),this.error="Failed to load questions"}finally{this.isLoading=!1}})}deleteQuestion(e){return v(this,null,function*(){if(confirm("Are you sure you want to delete this question?"))try{let n=A_(Qt,"Questions",e);yield kA(n),yield this.loadQuestions(),this.success="Question deleted successfully"}catch(n){console.error("Error deleting question:",n),this.error="Failed to delete question"}})}addAnswerOption(){this.newQuestion.questionAnswers.push(""),this.error=null}removeAnswerOption(e){this.newQuestion.questionAnswers.length>1&&(this.newQuestion.questionAnswers.splice(e,1),this.error=null)}validateQuestion(){return this.newQuestion.questionTitle.trim()?this.newQuestion.questionText.trim()?this.newQuestion.questionAnswers.length===0?(this.error="At least one answer option is required",!1):this.newQuestion.questionAnswers.some(e=>!e.trim())?(this.error="All answer options must have text",!1):!0:(this.error="Question text is required",!1):(this.error="Question title is required",!1)}submitQuestion(){return v(this,null,function*(){if(this.error=null,this.success=null,!!this.validateQuestion()){this.loading=!0;try{let e=Ft(Qt,"Questions");yield Nc(e,{questionTitle:this.newQuestion.questionTitle.trim(),questionText:this.newQuestion.questionText.trim(),questionAnswers:this.newQuestion.questionAnswers.map(n=>n.trim())}),this.success="Question created successfully",this.newQuestion={questionTitle:"",questionText:"",questionAnswers:[""]}}catch(e){console.error("Error creating question:",e),this.error="Failed to create question. Please try again."}finally{this.loading=!1}}})}static \u0275fac=function(n){return new(n||t)(Q(zn),Q(et))};static \u0275cmp=He({type:t,selectors:[["app-admin-dashboard"]],decls:41,vars:10,consts:[[1,"min-h-screen","bg-base-200","py-4","md:py-8"],[1,"container","mx-auto","px-4"],[1,"mb-8","md:mb-12"],[1,"text-3xl","md:text-4xl","font-bold"],[1,"card","bg-base-100","shadow-xl","mb-4","md:mb-8"],[1,"card-body","p-4","md:p-8"],[1,"card-title","text-xl","md:text-2xl","mb-4","md:mb-6"],[1,"flex","justify-center","py-8"],[1,"text-center","py-8","text-base-content/70"],[1,"space-y-4"],[1,"card","bg-base-100","shadow-xl"],[1,"alert","alert-error","mb-4"],[1,"alert","alert-success","mb-4"],[1,"space-y-4",3,"submit"],[1,"form-control"],[1,"label"],[1,"label-text"],["type","text","name","questionTitle","placeholder","Enter the question title",1,"input","input-bordered",3,"ngModelChange","ngModel","disabled"],["name","questionText","placeholder","Enter the question description",1,"textarea","textarea-bordered","h-24",3,"ngModelChange","ngModel","disabled"],[1,"label","mb-2"],[1,"space-y-2"],[1,"flex","gap-2"],["type","button",1,"btn","btn-outline","mt-2",3,"click","disabled"],["type","submit",1,"btn","btn-primary","w-full",3,"disabled"],[1,"loading","loading-spinner","loading-sm"],[1,"loading","loading-spinner","loading-lg"],[1,"border","border-base-300","rounded-lg","p-3","md:p-4"],[1,"flex","flex-col","md:flex-row","md:items-start","gap-4"],[1,"flex-1"],[1,"font-bold","mb-2"],[1,"text-base-content/70","mb-3"],[1,"space-y-1"],[1,"text-sm","bg-base-200","rounded","px-2","py-1","inline-block","mr-2"],[1,"btn","btn-error","btn-sm","w-full","md:w-auto",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","md:mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-current","shrink-0","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],["type","text","placeholder","Enter answer option",1,"input","input-bordered","flex-1",3,"ngModelChange","ngModel","name","disabled"],["type","button",1,"btn","btn-square","btn-error",3,"disabled"],["type","button",1,"btn","btn-square","btn-error",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"]],template:function(n,r){n&1&&(R(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),O(4,"Admin Dashboard"),M()(),R(5,"div",4)(6,"div",5)(7,"h2",6),O(8," Existing Questions "),M(),xe(9,xq,2,0,"div",7)(10,Pq,2,0,"div",8)(11,Fq,3,0,"div",9),M()(),R(12,"div",10)(13,"div",5)(14,"h2",6),O(15," Create New Question "),M(),xe(16,Vq,5,1,"div",11)(17,Lq,5,1,"div",12),R(18,"form",13),be("submit",function(o){return r.submitQuestion(),o.preventDefault()}),R(19,"div",14)(20,"label",15)(21,"span",16),O(22,"Question Title"),M()(),R(23,"input",17),Pn("ngModelChange",function(o){return ir(r.newQuestion.questionTitle,o)||(r.newQuestion.questionTitle=o),o}),M()(),R(24,"div",14)(25,"label",15)(26,"span",16),O(27,"Question Text"),M()(),R(28,"textarea",18),Pn("ngModelChange",function(o){return ir(r.newQuestion.questionText,o)||(r.newQuestion.questionText=o),o}),M()(),R(29,"div",14)(30,"label",19)(31,"span",16),O(32,"Answer Options"),M()(),R(33,"div",20),Mn(34,Uq,3,4,"div",21,lD),M(),R(36,"button",22),be("click",function(){return r.addAnswerOption()}),O(37," Add Answer Option "),M()(),R(38,"button",23),xe(39,Bq,1,0,"span",24),O(40," Create Question "),M()()()()()()),n&2&&(U(9),Ee(r.isLoading?9:r.existingQuestions.length===0?10:11),U(7),Ee(r.error?16:-1),U(),Ee(r.success?17:-1),U(6),xn("ngModel",r.newQuestion.questionTitle),Xe("disabled",r.loading),U(5),xn("ngModel",r.newQuestion.questionText),Xe("disabled",r.loading),U(6),Nn(r.newQuestion.questionAnswers),U(2),Xe("disabled",r.loading),U(2),Xe("disabled",r.loading),U(),Ee(r.loading?39:-1))},dependencies:[$t,Hr,dd,$r,Jo,ud,xi,rc],encapsulation:2})};var gM=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:td},{path:"email-check",component:Ih},{path:"survey",component:Eh},{path:"results",component:bh},{path:"admin-login",component:qh},{path:"admin-dashboard",component:Gh,canActivate:[zh]},{path:"**",component:ed}];var mM={providers:[yD({eventCoalescing:!0}),EC(gM)]};function $q(t,e){t&1&&(ct(),we(0,"path",7))}function Hq(t,e){t&1&&(ct(),we(0,"path",8))}function qq(t,e){t&1&&(R(0,"nav",10)(1,"a",17),O(2," Home "),M(),R(3,"a",18),O(4," Survey Results "),M()())}function zq(t,e){t&1&&(R(0,"nav",11)(1,"a",19),O(2," Admin Dashboard "),M()())}function Gq(t,e){if(t&1){let n=kt();R(0,"button",20),be("click",function(){Tt(n);let i=pe();return St(i.logout())}),O(1," Logout "),M()}}function Wq(t,e){t&1&&(R(0,"a",14),O(1," Admin Login "),M())}function Kq(t,e){if(t&1){let n=kt();R(0,"nav",21)(1,"a",25),be("click",function(){Tt(n);let i=pe(2);return St(i.isMenuOpen=!1)}),O(2," Home "),M(),R(3,"a",26),be("click",function(){Tt(n);let i=pe(2);return St(i.isMenuOpen=!1)}),O(4," Survey Results "),M()()}}function Qq(t,e){if(t&1){let n=kt();R(0,"nav",21)(1,"a",27),be("click",function(){Tt(n);let i=pe(2);return St(i.isMenuOpen=!1)}),O(2," Admin Dashboard "),M()()}}function Yq(t,e){if(t&1){let n=kt();R(0,"button",28),be("click",function(){Tt(n);let i=pe(2);return St(i.logout())}),O(1," Logout "),M()}}function Zq(t,e){if(t&1){let n=kt();R(0,"a",29),be("click",function(){Tt(n);let i=pe(2);return St(i.isMenuOpen=!1)}),O(1," Admin Login "),M()}}function Jq(t,e){if(t&1&&(R(0,"div",15),xe(1,Kq,5,0,"nav",21)(2,Qq,3,0,"nav",21),R(3,"div",22),xe(4,Yq,2,0,"button",23)(5,Zq,2,0,"a",24),M()()),t&2){let n=pe();U(),Ee(n.isAuthenticated()?2:1),U(3),Ee(n.isAuthenticated()?4:5)}}var Wh=class t{constructor(e,n){this.authService=e;this.router=n}isMenuOpen=!1;isAuthenticated(){return this.authService.isAuthenticated()}logout(){return v(this,null,function*(){yield this.authService.logout(),this.isMenuOpen=!1,this.router.navigate(["/"])})}static \u0275fac=function(n){return new(n||t)(Q(zn),Q(et))};static \u0275cmp=He({type:t,selectors:[["app-navbar"]],decls:18,vars:5,consts:[[1,"bg-base-100","border-b","border-base-200","fixed","w-full","top-0","z-50","shadow-lg"],[1,"container","mx-auto"],[1,"p-4"],[1,"flex","items-center","justify-between"],[1,"text-xl","font-bold","text-primary","hover:opacity-80","transition-opacity",3,"routerLink"],[1,"md:hidden","btn","btn-ghost","btn-sm",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],[1,"hidden","md:flex","md:items-center","md:gap-8"],[1,"flex","gap-4"],[1,"flex","gap-6"],[1,"ml-4"],[1,"btn","btn-error","btn-sm"],["routerLink","/admin-login","routerLinkActive","admin-active",1,"btn","btn-primary","btn-sm"],[1,"md:hidden","mt-4","pb-4","border-t","border-base-200"],[1,"h-[4.5rem]","md:h-16"],["routerLink","/home","routerLinkActive","active",1,"px-3","py-2","text-sm","font-medium","rounded-md","hover:bg-base-200","transition-all","duration-200","nav-link"],["routerLink","/results","routerLinkActive","active",1,"px-3","py-2","text-sm","font-medium","rounded-md","hover:bg-base-200","transition-all","duration-200","nav-link"],["routerLink","/admin-dashboard","routerLinkActive","active",1,"px-4","py-2","text-sm","font-medium","rounded-md","hover:bg-base-200","transition-all","duration-200","nav-link"],[1,"btn","btn-error","btn-sm",3,"click"],[1,"flex","flex-col","gap-2","mt-4"],[1,"mt-4"],[1,"btn","btn-error","btn-sm","w-full"],["routerLink","/admin-login","routerLinkActive","admin-active",1,"btn","btn-primary","btn-sm","w-full"],["routerLink","/home","routerLinkActive","active",1,"px-3","py-2","text-sm","font-medium","rounded-md","hover:bg-base-200","transition-all","duration-200","nav-link",3,"click"],["routerLink","/results","routerLinkActive","active",1,"px-3","py-2","text-sm","font-medium","rounded-md","hover:bg-base-200","transition-all","duration-200","nav-link",3,"click"],["routerLink","/admin-dashboard","routerLinkActive","active",1,"px-4","py-2","text-sm","font-medium","rounded-md","hover:bg-base-200","transition-all","duration-200","nav-link",3,"click"],[1,"btn","btn-error","btn-sm","w-full",3,"click"],["routerLink","/admin-login","routerLinkActive","admin-active",1,"btn","btn-primary","btn-sm","w-full",3,"click"]],template:function(n,r){n&1&&(R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),O(5," AI Ethics Survey "),M(),R(6,"button",5),be("click",function(){return r.isMenuOpen=!r.isMenuOpen}),ct(),R(7,"svg",6),xe(8,$q,1,0,":svg:path",7)(9,Hq,1,0,":svg:path",8),M()(),rr(),R(10,"div",9),xe(11,qq,5,0,"nav",10)(12,zq,3,0,"nav",11),R(13,"div",12),xe(14,Gq,2,0,"button",13)(15,Wq,2,0,"a",14),M()()(),xe(16,Jq,6,2,"div",15),M()()(),we(17,"div",16)),n&2&&(U(4),Xe("routerLink",r.isAuthenticated()?"/admin-dashboard":"/"),U(4),Ee(r.isMenuOpen?8:9),U(3),Ee(r.isAuthenticated()?12:11),U(3),Ee(r.isAuthenticated()?14:15),U(2),Ee(r.isMenuOpen?16:-1))},dependencies:[$t,Go,IC],styles:['.nav-link[_ngcontent-%COMP%]{position:relative}.nav-link[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:0;width:100%;height:2px;background-color:hsl(var(--p));transform:scaleX(0);transition:transform .2s ease}.active[_ngcontent-%COMP%]{color:hsl(var(--p))}.active[_ngcontent-%COMP%]:after{transform:scaleX(1)}.admin-active[_ngcontent-%COMP%]{background-color:hsl(var(--p))!important;color:hsl(var(--pc))!important}']})};var Kh=class t{title="survey-app";static \u0275fac=function(n){return new(n||t)};static \u0275cmp=He({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(n,r){n&1&&we(0,"app-navbar")(1,"router-outlet")},dependencies:[xm,Wh],encapsulation:2})};LD(Kh,mM).catch(t=>console.error(t));
